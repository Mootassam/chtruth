import{H as S,u as w,A as f,r as a,D as k,E as s,J as M,a3 as A,K as N,j as e,L as q}from"./index-fae849d1.js";import{y as o,u as I,a as B,F}from"./FormErrors-df85b60a.js";import{I as t}from"./InputFormItem-b5e75925.js";import{B as R}from"./ButtonIcon-9e049134.js";import{u as T}from"./useDispatch-00ceb992.js";function U(){const i=T(),u=S(),h=w(f.selectLoading),d=w(f.selectErrorMessage),[m,j]=a.useState(!1),[p,g]=a.useState("");a.useEffect(()=>{x()},[]);const b=k().shape({email:o.string(s("user.fields.username"),{required:!0}),password:o.string(s("user.fields.password"),{required:!0,min:8}),newPasswordConfirmation:o.string(s("user.fields.newPasswordConfirmation"),{required:!0}).oneOf([M("password"),null],s("auth.passwordChange.mustMatch")),phoneNumber:o.string(s("user.fields.phoneNumber"),{required:!0}),invitationcode:o.string(s("user.fields.invitationcode"),{required:!0}),withdrawPassword:o.string(s("user.fields.withdrawPassword"),{required:!0}),captcha:A().required(s("user.fields.captcha")).test("captcha-match","Captcha does not match",function(r){return r===p})}),n=I({resolver:B.yupResolver(b),mode:"onSubmit",defaultValues:{email:"",password:"",newPasswordConfirmation:"",phoneNumber:"",withdrawPassword:"",invitationcode:"",captcha:""}});a.useEffect(()=>{i(N.doClearErrorMessage())},[i]);const x=a.useCallback(()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let c="";for(let l=0;l<6;l++)c+=r.charAt(Math.floor(Math.random()*r.length));g(c),n.setValue("captcha",""),n.clearErrors("captcha")},[n]),y=a.useCallback(r=>{const{email:c,password:l,phoneNumber:v,withdrawPassword:P,invitationcode:E}=r;i(N.doRegisterEmailAndPassword(c,l,v,P,E))},[i]),C=a.useCallback(()=>{u.goBack()},[u]);return a.useCallback(()=>{j(!m)},[m]),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"header",style:{display:"flex"},children:[e.jsx("div",{className:"back-button",onClick:C,style:{cursor:"pointer"},children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"page-title",children:"SIGN UP"}),e.jsx("div",{className:"language-icon",style:{cursor:"pointer"},children:e.jsx("i",{className:"fas fa-globe"})})]}),e.jsx(F,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(y),className:"form-section",children:[e.jsx(t,{type:"email",name:"email",placeholder:"Enter your email",className:"text-input",externalErrorMessage:d,autoComplete:"email",label:"Email"}),e.jsx(t,{type:"tel",name:"phoneNumber",placeholder:"Enter your phone number",className:"text-input",autoComplete:"tel",label:"Phone Number"}),e.jsx("label",{className:"input-label",children:"Graphical Captcha"}),e.jsxs("div",{className:"captcha-container",children:[e.jsx("div",{className:"captcha-display",children:e.jsx("div",{className:"captcha-text",children:p})}),e.jsxs("div",{className:"captcha-controls",children:[e.jsxs("div",{className:"refresh-captcha",onClick:x,children:[e.jsx("i",{className:"fas fa-sync-alt"}),e.jsx("span",{children:"Refresh"})]}),e.jsx(t,{type:"text",name:"captcha",placeholder:"Enter code",className:"captcha-input"})]})]}),e.jsx(t,{type:m?"text":"password",name:"password",placeholder:"Create a password",className:"text-input",autoComplete:"new-password",label:"Password"}),e.jsx(t,{type:"password",name:"newPasswordConfirmation",placeholder:"Confirm your password",className:"text-input",autoComplete:"new-password",label:"Confirm Password"}),e.jsx(t,{type:"text",name:"withdrawPassword",placeholder:"Enter the withdraw Password",className:"text-input",externalErrorMessage:d,label:"withdraw Password"}),e.jsx(t,{type:"text",name:"invitationcode",placeholder:"Enter invitation code",className:"text-input",externalErrorMessage:d,label:"Invitation Code"}),e.jsxs("button",{className:"signup-button",disabled:h,type:"submit",children:[e.jsx(R,{loading:h}),e.jsx("span",{children:"CREATE ACCOUNT"})]})]})}),e.jsx("div",{className:"footer-links",style:{textAlign:"center",margin:"20px 0"},children:e.jsx(q,{to:"/auth/signin",className:"footer-link",children:"Already have an account? Log in"})}),e.jsxs("div",{className:"terms",children:["By creating an account, you agree to our ",e.jsx("a",{href:"#",children:"Terms of Service"})," and ",e.jsx("a",{href:"#",children:"Privacy Policy"})]})]})}export{U as default};
