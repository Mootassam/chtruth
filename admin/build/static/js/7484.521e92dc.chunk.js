"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[7484],{15021:function(e,s,n){var t=n(76747),a=n(86495),r=n(26319),l=n(71945),c=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new r.Z(e,s).match(l.Z.values.userRead)})),i=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new r.Z(e,s).match(l.Z.values.userEdit)})),o=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new r.Z(e,s).match(l.Z.values.userDestroy)})),d={selectPermissionToRead:c,selectPermissionToEdit:i,selectPermissionToCreate:(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new r.Z(e,s).match(l.Z.values.userCreate)})),selectPermissionToImport:(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new r.Z(e,s).match(l.Z.values.userImport)})),selectPermissionToDestroy:o};s.Z=d},27484:function(e,s,n){n.r(s),n.d(s,{default:function(){return q}});var t=n(47313),a=n(10499),r=n(27829),l=n(75352),c=n(22102),i=n(63849),o=n(31616),d=n(70885),u=n(23516),m=n(76747),h=n(86495),f=n(26319),Z=n(71945),x=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,s){return new f.Z(e,s).match(Z.Z.values.categoryRead)})),v=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,s){return new f.Z(e,s).match(Z.Z.values.categoryRead)})),j=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,s){return new f.Z(e,s).match(Z.Z.values.categoryRead)})),b=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,s){return new f.Z(e,s).match(Z.Z.values.categoryRead)})),p={selectPermissionToRead:x,selectPermissionToEdit:v,selectPermissionToCreate:j,selectPermissionToDestroy:(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,s){return new f.Z(e,s).match(Z.Z.values.categoryRead)})),selectPermissionToImport:b},g=n(99515),N=n(45788),C=n(95748),w=n(10419),P=n(28745),y=n(98072),T=n(46417);var k=function(e){var s=(0,t.useState)(!1),n=(0,d.Z)(s,2),r=(n[0],n[1],(0,N.I0)()),l=((0,N.v9)(g.Z.selectSelectedKeys),(0,N.v9)(g.Z.selectLoading),(0,N.v9)(g.Z.selectExportLoading),(0,N.v9)(g.Z.selectHasRows),(0,N.v9)(u.Z.selectPermissionToRead),(0,N.v9)(p.selectPermissionToDestroy),(0,N.v9)(p.selectPermissionToCreate));return(0,N.v9)(p.selectPermissionToImport),(0,T.jsx)(w.Z,{children:l&&(0,T.jsx)("div",{onClick:function(){r(y.Z.doCreate())},children:(0,T.jsxs)("span",{"data-tip":(0,a.ag)("common.new"),"data-for":"charge-list-toolbar-new-tooltip",children:[(0,T.jsx)("button",{className:"btn btn-primary",type:"button",children:(0,T.jsx)(C.Z,{iconClass:"fas fa-plus"})}),(0,T.jsx)(P.Z,{id:"charge-list-toolbar-new-tooltip"})]})})})},S=n(1413),R=n(97972),U=n(43270),I=n(47590),E=n(69138),V=n(3463),M=n(67357),F=n(13586),A=n(40846),D=n(47575),L=n(68031),O=V.Ry().shape({user:I.Z.relationToOne((0,a.ag)("entities.transaction.fields.user")),idnumber:I.Z.decimal((0,a.ag)("entities.stackingPlan.fields.idnumber"))}),$={user:null,levellimit:null},B={user:{label:(0,a.ag)("entities.transaction.fields.user"),render:A.Z.relationToOne()},idnumer:{label:(0,a.ag)("entities.stackingPlan.fields.idnumer"),render:A.Z.decimal()}};var H=function(e){var s=(0,N.v9)(g.Z.selectRawFilter),n=(0,N.I0)(),r=(0,t.useState)(!1),l=(0,d.Z)(r,2),c=l[0],i=l[1],o=(0,t.useState)((function(){return(0,S.Z)((0,S.Z)({},$),s)})),u=(0,d.Z)(o,1)[0],m=(0,U.cI)({resolver:(0,M.X)(O),defaultValues:u,mode:"all"});(0,t.useEffect)((function(){n(R.Z.doFetch(O.cast(u),s))}),[n]);var h=function(e){var s=m.getValues();n(R.Z.doFetch(e,s)),i(!1)};return(0,T.jsxs)(E.Z,{children:[(0,T.jsx)(F.Z,{onClick:function(){i(!c)},renders:B,values:s,expanded:c,onRemove:function(e){return m.setValue(e,$[e]),m.handleSubmit(h)()}}),(0,T.jsx)("div",{className:"container",children:(0,T.jsx)("div",{className:"collapse ".concat(c?"show":""),children:(0,T.jsx)(U.RV,(0,S.Z)((0,S.Z)({},m),{},{children:(0,T.jsxs)("form",{onSubmit:m.handleSubmit(h),children:[(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("div",{className:"col-lg-6 col-12",children:(0,T.jsx)(L.Z,{name:"user",label:(0,a.ag)("entities.transaction.fields.user")})}),(0,T.jsx)("div",{className:"col-lg-6 col-12",children:(0,T.jsx)(D.Z,{name:"idnumber",label:(0,a.ag)("entities.stackingPlan.fields.idnumber")})})]}),(0,T.jsx)("div",{className:"row",children:(0,T.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,T.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,T.jsx)(C.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,a.ag)("common.search")]}),(0,T.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys($).forEach((function(e){m.setValue(e,$[e])})),n(R.Z.doReset()),i(!1)},disabled:e.loading,children:[(0,T.jsx)(C.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,a.ag)("common.reset")]})]})})]})}))})})]})},K=n(28303),_=n(61567),G=n(97249);var X=function(){var e=(0,N.I0)(),s=(0,N.v9)(g.Z.selectLoading),n=(0,N.v9)(g.Z.selectRows);console.log(n);var t=(0,N.v9)(g.Z.selectPagination),r=(0,N.v9)(g.Z.selectSelectedKeys),l=(0,N.v9)(g.Z.selectHasRows),c=(0,N.v9)(g.Z.selectSorter),i=(0,N.v9)(g.Z.selectIsAllSelected),o=(0,N.v9)(p.selectPermissionToEdit),d=function(s){var n=c.field===s&&"ascend"===c.order?"descend":"ascend";e(R.Z.doChangeSort({field:s,order:n}))};return(0,T.jsxs)("div",{className:"deposit-method-list-container",children:[(0,T.jsx)("div",{className:"table-responsive",children:(0,T.jsxs)("table",{className:"deposit-method-list-table",children:[(0,T.jsx)("thead",{className:"table-header",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"checkbox-column",children:l&&(0,T.jsx)("div",{className:"checkbox-wrapper",children:(0,T.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:Boolean(i),onChange:function(){return e(R.Z.doToggleAllSelected())}})})}),(0,T.jsxs)("th",{className:"sortable-header",onClick:function(){return d("symbol")},children:[(0,a.ag)("entities.depositMethod.fields.symbol"),"symbol"===c.field&&(0,T.jsx)("span",{className:"sort-icon",children:"ascend"===c.order?"\u2191":"\u2193"})]}),(0,T.jsxs)("th",{className:"sortable-header",onClick:function(){return d("name")},children:[(0,a.ag)("entities.depositMethod.fields.name"),"name"===c.field&&(0,T.jsx)("span",{className:"sort-icon",children:"ascend"===c.order?"\u2191":"\u2193"})]}),(0,T.jsxs)("th",{className:"sortable-header",onClick:function(){return d("address")},children:[(0,a.ag)("entities.depositMethod.fields.address"),"address"===c.field&&(0,T.jsx)("span",{className:"sort-icon",children:"ascend"===c.order?"\u2191":"\u2193"})]}),(0,T.jsx)("th",{className:"actions-header",children:"Actions"})]})}),(0,T.jsxs)("tbody",{className:"table-body",children:[s&&(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:5,className:"loading-cell",children:(0,T.jsxs)("div",{className:"loading-container",children:[(0,T.jsx)(_.Z,{}),(0,T.jsx)("span",{className:"loading-text",children:"Loading data..."})]})})}),!s&&!l&&(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:5,className:"no-data-cell",children:(0,T.jsxs)("div",{className:"no-data-content",children:[(0,T.jsx)("i",{className:"fas fa-database no-data-icon"}),(0,T.jsx)("p",{children:(0,a.ag)("table.noData")})]})})}),!s&&n.map((function(s){return(0,T.jsxs)("tr",{className:"table-row",children:[(0,T.jsx)("td",{className:"checkbox-column",children:(0,T.jsx)("div",{className:"checkbox-wrapper",children:(0,T.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:r.includes(s.id),onChange:function(){return n=s.id,e(R.Z.doToggleOneSelected(n));var n}})})}),(0,T.jsx)("td",{className:"table-cell",children:s.symbol}),(0,T.jsx)("td",{className:"table-cell",children:s.name}),(0,T.jsx)("td",{className:"table-cell",children:s.address}),(0,T.jsx)("td",{className:"actions-cell",children:(0,T.jsx)("div",{className:"actions-container",children:o&&(0,T.jsxs)(K.rU,{className:"btn-action edit",to:"/depositMethod/".concat(s.id,"/edit"),children:[(0,T.jsx)("i",{className:"fas fa-edit"}),(0,T.jsx)("span",{children:(0,a.ag)("common.edit")})]})})})]},s.id)}))]})]})}),(0,T.jsx)("div",{className:"pagination-container",children:(0,T.jsx)(G.Z,{onChange:function(s){e(R.Z.doChangePagination(s))},disabled:s,pagination:t})})]})};var q=function(e){return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(r.Z,{children:[(0,T.jsx)(c.Z,{fluid:!0,children:(0,T.jsxs)(i.Z,{children:[(0,T.jsx)(o.Z,{xs:9,children:(0,T.jsx)(l.Z,{children:(0,a.ag)("entities.depositMethod.list.title")})}),(0,T.jsx)(o.Z,{md:"auto",children:(0,T.jsx)(k,{})})]})}),(0,T.jsx)(H,{}),(0,T.jsx)(X,{})]})})}},68031:function(e,s,n){n.d(s,{Z:function(){return p}});var t=n(1413),a=n(42982),r=n(70885),l=n(47313),c=n(74773),i=n(74165),o=n(15861),d=n(1168),u=n(10499),m=n(89333),h=n(33512),f=n(46417);var Z=function(e){var s=(0,l.useRef)(),n=(0,l.useState)(!1),t=(0,r.Z)(n,2),a=t[0],Z=t[1];(0,l.useEffect)((function(){window.$(s.current).modal("show"),window.$(s.current).on("hidden.bs.modal",e.onClose)}),[]);var x=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(t,a){var r,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,Z(!0),n.next=4,c.Z.create(a);case 4:return n.next=6,c.Z.fetchUsers({email:a.emails[0]},null,1,0);case 6:r=n.sent,l=r.rows,window.$(s.current).modal("hide"),e.onSuccess(l[0]),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),h.Z.handle(n.t0);case 15:return n.prev=15,Z(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e,s){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:s,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("user.new.titleModal")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(m.Z,{saveLoading:a,onSubmit:x,onCancel:function(){window.$(s.current).modal("hide")},modal:!0,single:!0})})]})})}),document.getElementById("modal-root"))},x=n(49513),v=n(43270),j=n(45788),b=n(15021);var p=function(e){var s=(0,v.Gc)(),n=s.setValue,i=s.getValues,o=(0,l.useState)(!1),d=(0,r.Z)(o,2),u=d[0],m=d[1],h=(0,j.v9)(b.Z.selectPermissionToCreate);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,(0,t.Z)((0,t.Z)({},e),{},{fetchFn:function(e,s){return c.Z.fetchUserAutocomplete(e,s)},mapper:{toAutocomplete:function(e){if(!e)return null;if(e.fullName||e.email){var s=e.email;return e.fullName&&(s="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:s}}return{value:e.id,label:e.label}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){return m(!0)},hasPermissionToCreate:h})),u&&(0,f.jsx)(Z,{visible:u,onClose:function(){return m(!1)},onSuccess:function(s){var t=e.name,r=e.mode;n(t,r&&"multiple"===r?[].concat((0,a.Z)(i()[t]||[]),[s]):s),m(!1)}})]})}},22102:function(e,s,n){var t=n(1413),a=n(45987),r=n(46123),l=n.n(r),c=n(47313),i=n(68524),o=n(46417),d=["bsPrefix","fluid","as","className"],u=c.forwardRef((function(e,s){var n=e.bsPrefix,r=e.fluid,c=void 0!==r&&r,u=e.as,m=void 0===u?"div":u,h=e.className,f=(0,a.Z)(e,d),Z=(0,i.vE)(n,"container"),x="string"===typeof c?"-".concat(c):"-fluid";return(0,o.jsx)(m,(0,t.Z)((0,t.Z)({ref:s},f),{},{className:l()(h,c?"".concat(Z).concat(x):Z)}))}));u.displayName="Container",s.Z=u}}]);