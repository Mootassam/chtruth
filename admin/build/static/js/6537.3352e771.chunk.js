"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[6537],{56537:function(e,n,a){a.r(n),a.d(n,{default:function(){return O}});var t=a(47313),l=a(10499),i=a(1413),s=a(70885),r=a(43270),o=a(35188),d=a(23516),c=a(45788),u=a(63830),m=a(25803),h=a(94561),f=a(49384),g=a(46417);function p(e){var n=e.label,a=e.name,s=e.hint,o=e.externalErrorMessage,d=e.required,c=e.placeholder,u=e.isClearable,m=e.notFoundContent,p=(0,r.Gc)(),x=p.register,v=p.errors,y=p.formState,b=y.touched,j=y.isSubmitted,Z=p.setValue,N=p.watch,C=f.Z.errorMessage(a,v,b,j,o);(0,t.useEffect)((function(){x({name:a})}),[x,a]);var w=N(a),B=Boolean(C)?{control:function(e){return(0,i.Z)((0,i.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,g.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,g.jsx)("label",{className:"col-form-label ".concat(d?"required":null),children:n}),(0,g.jsx)("br",{}),(0,g.jsx)(h.ZP,{className:"w-100",value:w&&w.length?w.map((function(e){return{value:e,label:e}})):[],onChange:function(n){if(!n||!n.length)return Z(a,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var t=n.map((function(e){return e.value})).join(",").split(",");Z(a,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:a,name:a,placeholder:c||"",isClearable:u,styles:B,isMulti:!0,formatCreateLabel:function(e){return e},loadingMessage:function(){return(0,l.ag)("autocomplete.loading")},noOptionsMessage:function(){return m||""}}),(0,g.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(s)&&(0,g.jsx)("small",{className:"form-text text-muted",children:s})]})}p.defaultProps={required:!1,isClearable:!0};var x=p,v=a(47575),y=a(95748),b=a(69138),j=a(47590),Z=a(6473),N=a(31172),C=a(67357),w=a(13586),B=a(40846),E=Z.Ry().shape({timestampRange:j.Z.datetimeRange((0,l.ag)("auditLog.fields.timestampRange")),entityNames:j.Z.stringArray((0,l.ag)("auditLog.fields.entityNames")),entityId:j.Z.string((0,l.ag)("auditLog.fields.entityId")),action:j.Z.string((0,l.ag)("auditLog.fields.action")),createdByEmail:j.Z.email((0,l.ag)("auditLog.fields.createdByEmail"))}),L={timestampRange:[],entityNames:[],entityId:null,action:null,createdByEmail:null},R={timestampRange:{label:(0,l.ag)("auditLog.fields.timestampRange"),render:B.Z.datetimeRange()},entityNames:{label:(0,l.ag)("auditLog.fields.entityNames"),render:B.Z.stringArray()},entityId:{label:(0,l.ag)("auditLog.fields.entityId"),render:B.Z.generic()},action:{label:(0,l.ag)("auditLog.fields.action"),render:B.Z.generic()},createdByEmail:{label:(0,l.ag)("auditLog.fields.createdByEmail"),render:B.Z.generic()}};var S=function(e){var n=(0,c.v9)(d.Z.selectRawFilter),a=(0,c.I0)(),h=(0,u.TH)(),f=(0,t.useState)(!1),p=(0,s.Z)(f,2),j=p[0],Z=p[1],B=(0,t.useState)((function(){var e=(0,i.Z)((0,i.Z)({},L),n),a=N.parse(h.search);return e.entityNames=a.entityNames||e.entityNames,e.entityNames&&!Array.isArray(e.entityNames)&&(e.entityNames=[e.entityNames]),e.entityId=a.entityId||e.entityId,e.createdByEmail=a.createdByEmail||e.createdByEmail,e})),S=(0,s.Z)(B,1)[0],I=(0,r.cI)({resolver:(0,C.X)(E),defaultValues:S,mode:"all"});(0,t.useEffect)((function(){a(o.Z.doFetch(E.cast(S),n))}),[a]);var M=function(e){var n=I.getValues();a(o.Z.doFetch(e,n)),Z(!1)},k=e.loading;return(0,g.jsxs)(b.Z,{children:[(0,g.jsx)(w.Z,{onClick:function(){Z(!j)},renders:R,values:n,expanded:j,onRemove:function(e){return I.setValue(e,L[e]),I.handleSubmit(M)()}}),(0,g.jsx)("div",{className:"container",children:(0,g.jsx)("div",{className:"collapse ".concat(j?"show":""),children:(0,g.jsx)(r.RV,(0,i.Z)((0,i.Z)({},I),{},{children:(0,g.jsxs)("form",{onSubmit:I.handleSubmit(M),children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(m.Z,{name:"timestampRange",label:(0,l.ag)("auditLog.fields.timestampRange"),showTimeInput:!0})}),(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(v.Z,{name:"createdByEmail",label:(0,l.ag)("auditLog.fields.createdByEmail")})}),(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(x,{name:"entityNames",label:(0,l.ag)("auditLog.fields.entityNames"),notFoundContent:(0,l.ag)("auditLog.entityNamesHint")})}),(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(v.Z,{name:"entityId",label:(0,l.ag)("auditLog.fields.entityId")})}),(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(v.Z,{name:"action",label:(0,l.ag)("auditLog.fields.action")})})]}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,g.jsxs)("button",{className:"btn btn-primary",type:"submit",children:[(0,g.jsx)(y.Z,{loading:k,iconClass:"fas fa-search"}),(0,l.ag)("common.search")]}),(0,g.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(L).forEach((function(e){I.setValue(e,L[e])})),a(o.Z.doReset()),Z(!1)},children:[(0,g.jsx)(y.Z,{loading:k,iconClass:"fas fa-undo"}),(0,l.ag)("common.reset")]})]})})]})}))})})]})},I=a(61567),M=a(27216),k=a(97249),F=a(98848),V=a(70816),A=a.n(V);var H=function(e){var n=(0,c.I0)(),a=function(e){var a=u.field===e&&"ascend"===u.order?"descend":"ascend";n(o.Z.doChangeSort({field:e,order:a}))},t=(0,c.v9)(d.Z.selectLoading),i=(0,c.v9)(d.Z.selectRows),s=(0,c.v9)(d.Z.selectPagination),r=(0,c.v9)(d.Z.selectHasRows),u=(0,c.v9)(d.Z.selectSorter);return(0,g.jsxs)(M.Z,{children:[(0,g.jsx)("div",{className:"table-responsive",children:(0,g.jsxs)("table",{className:"table table-striped mt-2",children:[(0,g.jsx)("thead",{className:"thead",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)(F.Z,{onSort:a,hasRows:r,sorter:u,name:"timestamp",label:(0,l.ag)("auditLog.fields.timestamp")}),(0,g.jsx)(F.Z,{onSort:a,hasRows:r,sorter:u,name:"createdByEmail",label:(0,l.ag)("auditLog.fields.createdByEmail")}),(0,g.jsx)(F.Z,{onSort:a,hasRows:r,sorter:u,name:"entityName",label:(0,l.ag)("auditLog.fields.entityName")}),(0,g.jsx)(F.Z,{onSort:a,hasRows:r,sorter:u,name:"action",label:(0,l.ag)("auditLog.fields.action")}),(0,g.jsx)(F.Z,{onSort:a,hasRows:r,sorter:u,name:"entityId",label:(0,l.ag)("auditLog.fields.entityId")}),(0,g.jsx)(F.Z,{className:"th-actions-sm"})]})}),(0,g.jsxs)("tbody",{children:[t&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:100,children:(0,g.jsx)(I.Z,{})})}),!t&&!r&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:100,children:(0,g.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.ag)("table.noData")})})}),!t&&i.map((function(e){return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:A()(e.timestamp).format("YYYY-MM-DD HH:mm")}),(0,g.jsx)("td",{children:e.createdByEmail}),(0,g.jsx)("td",{children:e.entityName}),(0,g.jsx)("td",{children:e.action}),(0,g.jsx)("td",{children:e.entityId}),(0,g.jsx)("td",{children:(0,g.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return function(e){var n=JSON.stringify(e,null,2);window.open("","_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=400,height=400").document.write("<pre>".concat(n,"</pre>"))}(e.values)},children:(0,l.ag)("common.view")})})]},e.id)}))]})]})}),(0,g.jsx)(k.Z,{onChange:function(e){n(o.Z.doChangePagination(e))},disabled:t,pagination:s})]})},T=a(28745),q=a(10419);var D=function(e){var n=(0,c.v9)(d.Z.selectLoading),a=(0,c.v9)(d.Z.selectExportLoading),t=(0,c.v9)(d.Z.selectHasRows),i=(0,c.I0)(),s=!t||n;return(0,g.jsxs)(q.Z,{children:[(0,g.jsx)("span",{"data-tip":(0,l.ag)("common.noDataToExport"),"data-tip-disable":!s,"data-for":"audit-log-toolbar-export-tooltip",children:(0,g.jsx)("button",{className:"btn btn-light",type:"button",disabled:s,onClick:function(){i(o.Z.doExport())},children:(0,g.jsx)(y.Z,{loading:a,iconClass:"far fa-file-excel"})})}),(0,g.jsx)(T.Z,{id:"audit-log-toolbar-export-tooltip"})]})},P=a(27829),_=a(75352);var O=function(e){return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(P.Z,{children:[(0,g.jsx)(_.Z,{children:(0,l.ag)("auditLog.title")}),(0,g.jsx)(D,{}),(0,g.jsx)(S,{}),(0,g.jsx)(H,{})]})})}},95748:function(e,n,a){a(47313);var t=a(46417);n.Z=function(e){return e.loading?(0,t.jsx)("span",{className:"spinner-border spinner-border-sm"}):e.iconClass?(0,t.jsx)("i",{className:e.iconClass}):null}},49384:function(e,n,a){a.d(n,{Z:function(){return i}});var t=a(15671),l=a(43144),i=function(){function e(){(0,t.Z)(this,e)}return(0,l.Z)(e,null,[{key:"errorMessage",value:function(e,n,a,t){var l,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i)return i;if(!t&&!a[e])return null;var s=n[e];return(null===s||void 0===s||null===(l=s[0])||void 0===l?void 0:l.message)||(null===s||void 0===s?void 0:s.message)||s||null}}]),e}()},25803:function(e,n,a){var t=a(47313),l=a(43270),i=a(49384),s=a(61378),r=a.n(s),o=(a(72632),a(46417));function d(e){var n=e.label,a=e.name,s=e.hint,d=e.placeholder,c=e.autoFocus,u=e.required,m=e.showTimeInput,h=e.externalErrorMessage,f=(0,l.Gc)(),g=f.register,p=f.errors,x=f.formState,v=x.touched,y=x.isSubmitted,b=f.setValue,j=f.watch,Z=i.Z.errorMessage(a,p,v,y,h),N=j(a);(0,t.useEffect)((function(){g({name:a})}),[g,a]);var C=function(){return N?Array.isArray(!N)?null:N.length&&N[0]||null:null},w=function(){return N?Array.isArray(!N)||N.length<2?null:N[1]||null:null};return(0,o.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,o.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:a,children:n}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"baseline"},children:[(0,o.jsx)(r(),{id:"".concat(a,"Start"),name:"".concat(a,"Start"),onChange:function(n){return function(n){b(a,[n,w()],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([n,w()])}(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},selected:C(),className:"form-control ".concat(Z?"is-invalid":""),showTimeInput:m,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}},placeholderText:d||"",autoFocus:c||void 0,autoComplete:"off",dateFormat:m?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15}),(0,o.jsx)("div",{style:{flexShrink:1,marginLeft:"8px",marginRight:"8px"},children:"~"}),(0,o.jsx)(r(),{id:"".concat(a,"End"),name:"".concat(a,"End"),onChange:function(n){return function(n){b(a,[C(),n],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([C(),n])}(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},selected:w(),className:"form-control ".concat(Z?"is-invalid":""),showTimeInput:m,placeholderText:d||"",autoFocus:c||void 0,autoComplete:"off",dateFormat:m?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}})]}),(0,o.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(s)&&(0,o.jsx)("small",{className:"form-text text-muted",children:s})]})}d.defaultProps={required:!1},n.Z=d},47575:function(e,n,a){a(47313);var t=a(43270),l=a(49384),i=a(46417);function s(e){var n=e.label,a=e.description,s=e.name,r=e.hint,o=e.type,d=e.placeholder,c=e.autoFocus,u=e.autoComplete,m=e.required,h=e.externalErrorMessage,f=e.disabled,g=e.endAdornment,p=(0,t.Gc)(),x=p.register,v=p.errors,y=p.formState,b=y.touched,j=y.isSubmitted,Z=l.Z.errorMessage(s,v,b,j,h);return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("div",{className:g?"input-group":"",children:[Boolean(n)&&(0,i.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:s,children:n}),a,(0,i.jsx)("input",{id:s,name:s,type:o,ref:x,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:d||void 0,autoFocus:c||void 0,autoComplete:u||void 0,disabled:f,className:"form-control ".concat(Z?"is-invalid":"")}),g&&(0,i.jsx)("div",{className:"input-group-append",children:(0,i.jsx)("span",{className:"input-group-text",children:g})})]}),(0,i.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(r)&&(0,i.jsx)("small",{className:"form-text text-muted",children:r})]})}s.defaultProps={type:"text",required:!1},n.Z=s},27216:function(e,n,a){var t,l=a(30168),i=a(38269).ZP.div(t||(t=(0,l.Z)(["\n  .table td {\n    white-space: nowrap;\n    border-collapse: collapse;\n  }\n  .itemType {\n    cursor:pointer;\n    background-color: #009efb;\n    padding: 0.5rem 1rem;\n    border-radius: 0.5rem;\n\n    \n  }\n  .itemType  span { \n   \n    color :#fff;\n\n  }\n  .p_items {\n  padding 0.3rem 1rem ;\n  cursor : pointer ;\n  }\n\n  .table td,\n  .table th {\n    vertical-align: middle;\n  }\n\n  .table .th-checkbox {\n    width: 50px;\n    vertical-align: middle;\n    text-align: center;\n  }\n\n  .table .th-actions,\n  .table .td-actions {\n    width: 230px;\n    vertical-align: middle;\n    text-align: right;\n  }\n\n  .table .th-actions-sm,\n  .table .td-actions-sm {\n    width: 100px;\n    vertical-align: middle;\n    text-align: right;\n  }\n\n  .table .td-actions a {\n    margin-right: 8px;\n  }\n"])));n.Z=i},98848:function(e,n,a){var t,l=a(30168),i=(a(47313),a(38269)),s=a(46417),r=i.ZP.th(t||(t=(0,l.Z)(["\n  cursor: pointer;\n  opacity: 1;\n  transition: opacity 0.15s ease-in;\n\n  &:hover,\n  &:focus {\n    opacity: 0.5;\n    transition: opacity 0.15s ease-in;\n  }\n\n  &:active {\n    opacity: 0.8;\n    transition: opacity 0.15s ease-out;\n  }\n"])));n.Z=function(e){var n=e.sorter,a=e.onSort,t=e.name,l=e.label,i=e.hasRows,o=e.children,d=e.align,c=void 0===d?"left":d;return i&&a?(0,s.jsx)(r,{onClick:function(){return a(t)},className:"".concat(e.className||""," sortable"),scope:"col",children:(0,s.jsxs)("div",{className:"table__th",children:[o||l||"",n.field===t&&"descend"===n.order&&(0,s.jsx)("i",{className:"ml-2 fas fa-sort-up"}),n.field===t&&"ascend"===n.order&&(0,s.jsx)("i",{className:"ml-2 fas fa-sort-down"})]})}):(0,s.jsx)("th",{className:e.className||"",style:{textAlign:c},scope:"col",children:o||l||""})}}}]);