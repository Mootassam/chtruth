"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[6988],{15021:function(e,s,n){var a=n(76747),t=n(86495),l=n(26319),i=n(71945),r=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(i.Z.values.userRead)})),c=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(i.Z.values.userEdit)})),o=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(i.Z.values.userDestroy)})),d={selectPermissionToRead:r,selectPermissionToEdit:c,selectPermissionToCreate:(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(i.Z.values.userCreate)})),selectPermissionToImport:(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(i.Z.values.userImport)})),selectPermissionToDestroy:o};s.Z=d},46988:function(e,s,n){n.r(s),n.d(s,{default:function(){return H}});var a=n(47313),t=n(10499),l=n(27829),i=n(75352),r=n(22102),c=n(63849),o=n(31616),d=n(70885),u=n(23516),m=n(26270),h=n(52540),f=n(42715),x=n(2262),j=n(72053),b=n(45788),p=n(44587),N=n(95748),g=n(10419),Z=n(28745),v=n(46417);var C=function(e){var s=(0,a.useState)(!1),n=(0,d.Z)(s,2),l=n[0],i=n[1],r=(0,b.I0)(),c=(0,b.v9)(j.Z.selectSelectedKeys),o=(0,b.v9)(j.Z.selectLoading),x=(0,b.v9)(f.Z.selectLoading),C=((0,b.v9)(j.Z.selectExportLoading),(0,b.v9)(j.Z.selectHasRows),(0,b.v9)(u.Z.selectPermissionToRead),(0,b.v9)(m.Z.selectPermissionToDestroy)),y=((0,b.v9)(m.Z.selectPermissionToCreate),(0,b.v9)(m.Z.selectPermissionToImport),function(){i(!0)}),k=function(){i(!1)};return(0,v.jsxs)(g.Z,{children:[function(){if(!C)return null;var e=!c.length||o,s=(0,v.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:y,children:(0,v.jsx)(N.Z,{loading:x,iconClass:"far fa-trash-alt"})});return e?(0,v.jsxs)("span",{"data-tip":(0,t.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[s,(0,v.jsx)(Z.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):s}(),l&&(0,v.jsx)(p.Z,{title:(0,t.ag)("common.areYouSure"),onConfirm:function(){return k(),void r(h.Z.doDestroyAll(c))},onClose:function(){return k()},okText:(0,t.ag)("common.yes"),cancelText:(0,t.ag)("common.no")})]})},y=n(28303),k=n(61567),T=n(97249),P=n(1296);var w=function(){var e=(0,a.useState)(null),s=(0,d.Z)(e,2),n=s[0],l=s[1],i=(0,b.I0)(),r=(0,b.v9)(j.Z.selectLoading),c=(0,b.v9)(f.Z.selectLoading),o=r||c,u=(0,b.v9)(j.Z.selectRows),N=(0,b.v9)(j.Z.selectPagination),g=(0,b.v9)(j.Z.selectSelectedKeys),Z=(0,b.v9)(j.Z.selectHasRows),C=(0,b.v9)(j.Z.selectSorter),w=(0,b.v9)(j.Z.selectIsAllSelected),S=(0,b.v9)(m.Z.selectPermissionToEdit),V=(0,b.v9)(m.Z.selectPermissionToDestroy),R=function(){return l(null)},A=function(e){var s=C.field===e&&"ascend"===C.order?"descend":"ascend";i(x.Z.doChangeSort({field:e,order:s}))};return(0,v.jsxs)("div",{className:"spot-list-container",children:[(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)("table",{className:"spot-list-table",children:[(0,v.jsx)("thead",{className:"table-header",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"checkbox-column",children:Z&&(0,v.jsx)("div",{className:"checkbox-wrapper",children:(0,v.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:Boolean(w),onChange:function(){return i(x.Z.doToggleAllSelected())}})})}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("orderNo")},children:[(0,t.ag)("entities.spot.fields.orderNo"),"orderNo"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("userAccount")},children:[(0,t.ag)("entities.spot.fields.userAccount"),"userAccount"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("tradingPair")},children:[(0,t.ag)("entities.spot.fields.tradingPair"),"tradingPair"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("direction")},children:[(0,t.ag)("entities.spot.fields.direction"),"direction"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("delegateType")},children:[(0,t.ag)("entities.spot.fields.delegateType"),"delegateType"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("delegateState")},children:[(0,t.ag)("entities.spot.fields.delegateState"),"delegateState"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("orderQuantity")},children:[(0,t.ag)("entities.spot.fields.orderQuantity"),"orderQuantity"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("commissionPrice")},children:[(0,t.ag)("entities.spot.fields.commissionPrice"),"commissionPrice"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("entrustedValue")},children:[(0,t.ag)("entities.spot.fields.entrustedValue"),"entrustedValue"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("transactionQuantity")},children:[(0,t.ag)("entities.spot.fields.transactionQuantity"),"transactionQuantity"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("transactionValue")},children:[(0,t.ag)("entities.spot.fields.transactionValue"),"transactionValue"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("closingPrice")},children:[(0,t.ag)("entities.spot.fields.closingPrice"),"closingPrice"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("handlingFee")},children:[(0,t.ag)("entities.spot.fields.handlingFee"),"handlingFee"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("commissionTime")},children:[(0,t.ag)("entities.spot.fields.commissionTime"),"commissionTime"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("closingTime")},children:[(0,t.ag)("entities.spot.fields.closingTime"),"closingTime"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsxs)("th",{className:"sortable-header",onClick:function(){return A("createdBy")},children:[(0,t.ag)("entities.spot.fields.createdBy"),"createdBy"===C.field&&(0,v.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,v.jsx)("th",{className:"actions-header",children:"Actions"})]})}),(0,v.jsxs)("tbody",{className:"table-body",children:[o&&(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:18,className:"loading-cell",children:(0,v.jsxs)("div",{className:"loading-container",children:[(0,v.jsx)(k.Z,{}),(0,v.jsx)("span",{className:"loading-text",children:"Loading data..."})]})})}),!o&&!Z&&(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:18,className:"no-data-cell",children:(0,v.jsxs)("div",{className:"no-data-content",children:[(0,v.jsx)("i",{className:"fas fa-database no-data-icon"}),(0,v.jsx)("p",{children:(0,t.ag)("table.noData")})]})})}),!o&&u.map((function(e){return(0,v.jsxs)("tr",{className:"table-row",children:[(0,v.jsx)("td",{className:"checkbox-column",children:(0,v.jsx)("div",{className:"checkbox-wrapper",children:(0,v.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:g.includes(e.id),onChange:function(){return s=e.id,i(x.Z.doToggleOneSelected(s));var s}})})}),(0,v.jsx)("td",{className:"table-cell",children:e.orderNo}),(0,v.jsx)("td",{className:"table-cell",children:e.userAccount}),(0,v.jsx)("td",{className:"table-cell",children:e.tradingPair}),(0,v.jsx)("td",{className:"table-cell",children:(0,v.jsx)("span",{className:"direction-badge ".concat("buy"===e.direction?"buy":"sell"),children:e.direction})}),(0,v.jsx)("td",{className:"table-cell",children:e.delegateType}),(0,v.jsx)("td",{className:"table-cell",children:(0,v.jsx)("span",{className:"status-badge",children:e.delegateState})}),(0,v.jsx)("td",{className:"table-cell numeric",children:e.orderQuantity}),(0,v.jsx)("td",{className:"table-cell numeric",children:e.commissionPrice}),(0,v.jsx)("td",{className:"table-cell numeric",children:e.entrustedValue}),(0,v.jsx)("td",{className:"table-cell numeric",children:e.transactionQuantity}),(0,v.jsx)("td",{className:"table-cell numeric",children:e.transactionValue}),(0,v.jsx)("td",{className:"table-cell numeric",children:e.closingPrice}),(0,v.jsx)("td",{className:"table-cell numeric",children:e.handlingFee}),(0,v.jsx)("td",{className:"table-cell",children:e.commissionTime}),(0,v.jsx)("td",{className:"table-cell",children:e.closingTime}),(0,v.jsx)("td",{className:"table-cell",children:(0,v.jsx)(P.Z,{value:e.createdBy})}),(0,v.jsx)("td",{className:"actions-cell",children:(0,v.jsxs)("div",{className:"actions-container",children:[S&&(0,v.jsxs)(y.rU,{className:"btn-action edit",to:"/spot/".concat(e.id,"/edit"),children:[(0,v.jsx)("i",{className:"fas fa-edit"}),(0,v.jsx)("span",{children:"Edit"})]}),V&&(0,v.jsxs)("button",{className:"btn-action delete",type:"button",onClick:function(){return s=e.id,l(s);var s},children:[(0,v.jsx)("i",{className:"fas fa-trash"}),(0,v.jsx)("span",{children:"Delete"})]})]})})]},e.id)}))]})]})}),(0,v.jsx)("div",{className:"pagination-container",children:(0,v.jsx)(T.Z,{onChange:function(e){return i(x.Z.doChangePagination(e))},disabled:o,pagination:N})}),n&&(0,v.jsx)(p.Z,{title:(0,t.ag)("common.areYouSure"),onConfirm:function(){return e=n,R(),void i(h.Z.doDestroy(e));var e},onClose:R,okText:(0,t.ag)("common.yes"),cancelText:(0,t.ag)("common.no")}),(0,v.jsx)("style",{children:"\n     \n      "})]})},S=n(1413),V=n(43270),R=n(47590),A=n(69138),F=n(3463),E=n(67357),I=n(13586),U=n(40846),D=n(47575),Q=n(68031),L=F.Ry().shape({user:R.Z.relationToOne((0,t.ag)("entities.transaction.fields.user")),idnumber:R.Z.decimal((0,t.ag)("entities.spot.fields.idnumber"))}),B={user:null,levellimit:null},O={user:{label:(0,t.ag)("entities.transaction.fields.user"),render:U.Z.relationToOne()},idnumer:{label:(0,t.ag)("entities.spot.fields.idnumer"),render:U.Z.decimal()}};var $=function(e){var s=(0,b.v9)(j.Z.selectRawFilter),n=(0,b.I0)(),l=(0,a.useState)(!1),i=(0,d.Z)(l,2),r=i[0],c=i[1],o=(0,a.useState)((function(){return(0,S.Z)((0,S.Z)({},B),s)})),u=(0,d.Z)(o,1)[0],m=(0,V.cI)({resolver:(0,E.X)(L),defaultValues:u,mode:"all"});(0,a.useEffect)((function(){n(x.Z.doFetch(L.cast(u),s))}),[n]);var h=function(e){var s=m.getValues();n(x.Z.doFetch(e,s)),c(!1)};return(0,v.jsxs)(A.Z,{children:[(0,v.jsx)(I.Z,{onClick:function(){c(!r)},renders:O,values:s,expanded:r,onRemove:function(e){return m.setValue(e,B[e]),m.handleSubmit(h)()}}),(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"collapse ".concat(r?"show":""),children:(0,v.jsx)(V.RV,(0,S.Z)((0,S.Z)({},m),{},{children:(0,v.jsxs)("form",{onSubmit:m.handleSubmit(h),children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-lg-6 col-12",children:(0,v.jsx)(Q.Z,{name:"user",label:(0,t.ag)("entities.transaction.fields.user")})}),(0,v.jsx)("div",{className:"col-lg-6 col-12",children:(0,v.jsx)(D.Z,{name:"idnumber",label:(0,t.ag)("entities.spot.fields.idnumber")})})]}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,v.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,v.jsx)(N.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,t.ag)("common.search")]}),(0,v.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(B).forEach((function(e){m.setValue(e,B[e])})),n(x.Z.doReset()),c(!1)},disabled:e.loading,children:[(0,v.jsx)(N.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,t.ag)("common.reset")]})]})})]})}))})})]})};var H=function(e){return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(l.Z,{children:[(0,v.jsx)(r.Z,{fluid:!0,children:(0,v.jsxs)(c.Z,{children:[(0,v.jsx)(o.Z,{xs:9,children:(0,v.jsx)(i.Z,{children:(0,t.ag)("entities.spot.list.title")})}),(0,v.jsx)(o.Z,{md:"auto",children:(0,v.jsx)(C,{})})]})}),(0,v.jsx)($,{}),(0,v.jsx)(w,{})]})})}},68031:function(e,s,n){n.d(s,{Z:function(){return g}});var a=n(1413),t=n(42982),l=n(70885),i=n(47313),r=n(74773),c=n(74165),o=n(15861),d=n(1168),u=n(10499),m=n(89333),h=n(33512),f=n(46417);var x=function(e){var s=(0,i.useRef)(),n=(0,i.useState)(!1),a=(0,l.Z)(n,2),t=a[0],x=a[1];(0,i.useEffect)((function(){window.$(s.current).modal("show"),window.$(s.current).on("hidden.bs.modal",e.onClose)}),[]);var j=function(){var n=(0,o.Z)((0,c.Z)().mark((function n(a,t){var l,i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,x(!0),n.next=4,r.Z.create(t);case 4:return n.next=6,r.Z.fetchUsers({email:t.emails[0]},null,1,0);case 6:l=n.sent,i=l.rows,window.$(s.current).modal("hide"),e.onSuccess(i[0]),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),h.Z.handle(n.t0);case 15:return n.prev=15,x(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e,s){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:s,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("user.new.titleModal")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(m.Z,{saveLoading:t,onSubmit:j,onCancel:function(){window.$(s.current).modal("hide")},modal:!0,single:!0})})]})})}),document.getElementById("modal-root"))},j=n(49513),b=n(43270),p=n(45788),N=n(15021);var g=function(e){var s=(0,b.Gc)(),n=s.setValue,c=s.getValues,o=(0,i.useState)(!1),d=(0,l.Z)(o,2),u=d[0],m=d[1],h=(0,p.v9)(N.Z.selectPermissionToCreate);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j.Z,(0,a.Z)((0,a.Z)({},e),{},{fetchFn:function(e,s){return r.Z.fetchUserAutocomplete(e,s)},mapper:{toAutocomplete:function(e){if(!e)return null;if(e.fullName||e.email){var s=e.email;return e.fullName&&(s="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:s}}return{value:e.id,label:e.label}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){return m(!0)},hasPermissionToCreate:h})),u&&(0,f.jsx)(x,{visible:u,onClose:function(){return m(!1)},onSuccess:function(s){var a=e.name,l=e.mode;n(a,l&&"multiple"===l?[].concat((0,t.Z)(c()[a]||[]),[s]):s),m(!1)}})]})}},1296:function(e,s,n){n(47313);var a=n(28303),t=n(45788),l=n(15021),i=n(46417);s.Z=function(e){var s=(0,t.v9)(l.Z.selectPermissionToRead),n=function(){var s=e.value;return s?Array.isArray(s)?s:[s]:[]},r=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return n().length?(0,i.jsx)(i.Fragment,{children:n().map((function(e){return n=e,s?(0,i.jsx)("div",{children:(0,i.jsx)(a.rU,{className:"btn btn-link",to:"/user/".concat(n.id),children:r(n)})},n.id):(0,i.jsx)("div",{children:r(n)},n.id);var n}))}):null}},22102:function(e,s,n){var a=n(1413),t=n(45987),l=n(46123),i=n.n(l),r=n(47313),c=n(68524),o=n(46417),d=["bsPrefix","fluid","as","className"],u=r.forwardRef((function(e,s){var n=e.bsPrefix,l=e.fluid,r=void 0!==l&&l,u=e.as,m=void 0===u?"div":u,h=e.className,f=(0,t.Z)(e,d),x=(0,c.vE)(n,"container"),j="string"===typeof r?"-".concat(r):"-fluid";return(0,o.jsx)(m,(0,a.Z)((0,a.Z)({ref:s},f),{},{className:i()(h,r?"".concat(x).concat(j):x)}))}));u.displayName="Container",s.Z=u}}]);