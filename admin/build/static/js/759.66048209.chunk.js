"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[759],{10759:function(e,i,t){t.r(i),t.d(i,{default:function(){return S}});var s=t(70885),o=t(47313),n=t(45788),l=t(63830),a=t(10499),r=t(9518),c=t(76747),d=function(e){return e.vip.form},u=(0,c.P1)([d],(function(e){return e.record})),m={selectInitLoading:(0,c.P1)([d],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,c.P1)([d],(function(e){return Boolean(e.saveLoading)})),selectRecord:u,selectRaw:d},f=t(40476),g=t(1413),p=t(43270),v=t(89994),b=t(95748),x=t(68160),j=t(3463),P=t(67357),h=t(47575),Z=t(68031),L=t(5544),N=t(46417),y=j.Ry().shape({futuresAmount:v.Z.decimal((0,a.ag)("entities.futures.fields.futuresAmount"),{required:!0}),contractDuration:v.Z.string((0,a.ag)("entities.futures.fields.contractDuration"),{required:!0}),direction:v.Z.string((0,a.ag)("entities.futures.fields.direction"),{required:!0}),openPositionPrice:v.Z.decimal((0,a.ag)("entities.futures.fields.openPositionPrice"),{required:!0}),openPositionTime:v.Z.datetime((0,a.ag)("entities.futures.fields.openPositionTime"),{required:!0}),closePositionPrice:v.Z.decimal((0,a.ag)("entities.futures.fields.closePositionPrice"),{}),closePositionTime:v.Z.datetime((0,a.ag)("entities.futures.fields.closePositionTime"),{}),profitAndLoss:v.Z.decimal((0,a.ag)("entities.futures.fields.profitAndLoss"),{}),leverage:v.Z.decimal((0,a.ag)("entities.futures.fields.leverage"),{required:!0}),control:v.Z.string((0,a.ag)("entities.futures.fields.control"),{required:!0}),operate:v.Z.string((0,a.ag)("entities.futures.fields.operate"),{required:!0}),auditor:v.Z.relationToOne((0,a.ag)("entities.futures.fields.auditor"),{})});var q=function(e){var i=(0,o.useState)((function(){var i=e.record||{};return{futuresAmount:i.futuresAmount,contractDuration:i.contractDuration,direction:i.direction,openPositionPrice:i.openPositionPrice,openPositionTime:i.openPositionTime,closePositionPrice:i.closePositionPrice,closePositionTime:i.closePositionTime,profitAndLoss:i.profitAndLoss,leverage:i.leverage,control:i.control,operate:i.operate,auditor:i.auditor||null}})),t=(0,s.Z)(i,1)[0],n=(0,p.cI)({resolver:(0,P.X)(y),mode:"all",defaultValues:t}),l=function(i){var t;e.onSubmit(null===(t=e.record)||void 0===t?void 0:t.id,i)};return(0,N.jsx)(x.Z,{children:(0,N.jsx)(p.RV,(0,g.Z)((0,g.Z)({},n),{},{children:(0,N.jsxs)("form",{onSubmit:n.handleSubmit(l),children:[(0,N.jsxs)("div",{className:"row g-3",children:[(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"futuresAmount",label:(0,a.ag)("entities.futures.fields.futuresAmount"),required:!0,type:"number"})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"contractDuration",label:(0,a.ag)("entities.futures.fields.contractDuration"),required:!0})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(L.Z,{name:"direction",label:(0,a.ag)("entities.futures.fields.direction"),options:[{value:"BUY",label:"Buy"},{value:"SELL",label:"Sell"}],required:!0})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"openPositionPrice",label:(0,a.ag)("entities.futures.fields.openPositionPrice"),required:!0,type:"number"})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"openPositionTime",label:(0,a.ag)("entities.futures.fields.openPositionTime"),required:!0,type:"datetime-local"})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"closePositionPrice",label:(0,a.ag)("entities.futures.fields.closePositionPrice"),type:"number"})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"closePositionTime",label:(0,a.ag)("entities.futures.fields.closePositionTime"),type:"datetime-local"})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"profitAndLoss",label:(0,a.ag)("entities.futures.fields.profitAndLoss"),type:"number"})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(h.Z,{name:"leverage",label:(0,a.ag)("entities.futures.fields.leverage"),required:!0,type:"number"})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(L.Z,{name:"control",label:(0,a.ag)("entities.futures.fields.control"),options:[{value:"normal",label:"Normal"},{value:"loss",label:"Loss"},{value:"profit",label:"Profit"}],required:!0})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(L.Z,{name:"operate",label:(0,a.ag)("entities.futures.fields.operate"),options:[{value:"high",label:"High"},{value:"low",label:"Low"}],required:!0})}),(0,N.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,N.jsx)(Z.Z,{name:"auditor",label:(0,a.ag)("entities.futures.fields.auditor")})})]}),(0,N.jsxs)("div",{className:"form-buttons d-flex flex-wrap gap-2 mt-3",children:[(0,N.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:n.handleSubmit(l),children:[(0,N.jsx)(b.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,a.ag)("common.save")]}),(0,N.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(t).forEach((function(e){n.setValue(e,t[e])}))},children:[(0,N.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,a.ag)("common.reset")]}),e.onCancel&&(0,N.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:e.onCancel,children:[(0,N.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,a.ag)("common.cancel")]})]})]})}))})},T=t(27829),A=t(61567),C=t(75352);var S=function(e){var i=(0,o.useState)(!1),t=(0,s.Z)(i,2),c=t[0],d=t[1],u=(0,n.I0)(),g=(0,l.$B)(),p=(0,n.v9)(m.selectInitLoading),v=(0,n.v9)(m.selectSaveLoading),b=(0,n.v9)(m.selectRecord),x=Boolean(g.params.id),j=x?(0,a.ag)("entities.futures.edit.title"):(0,a.ag)("entities.futures.new.title");return(0,o.useEffect)((function(){u(r.Z.doInit(g.params.id)),d(!0)}),[u,g.params.id]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(T.Z,{children:[(0,N.jsx)(C.Z,{children:j}),p&&(0,N.jsx)(A.Z,{}),c&&!p&&(0,N.jsx)(q,{saveLoading:v,initLoading:p,record:b,isEditing:x,onSubmit:function(e,i){u(x?r.Z.doUpdate(e,i):r.Z.doCreate(i))},onCancel:function(){return(0,f.s1)().push("/futures")}})]})})}},61567:function(e,i,t){t(47313);var s=t(46417);i.Z=function(){return(0,s.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,s.jsx)("div",{className:"spinner-border text-primary"})})}}}]);