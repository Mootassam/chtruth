"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[5454],{4694:function(e,t,n){var a=n(76747),s=n(86495),i=n(26319),l=n(71945),r=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),o=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),c=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),d=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),u={selectPermissionToRead:r,selectPermissionToEdit:o,selectPermissionToCreate:c,selectPermissionToDestroy:(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),selectPermissionToImport:d};t.Z=u},80197:function(e,t,n){var a=n(76747),s=n(86495),i=n(26319),l=n(71945),r=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),o=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),c=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),d=(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),u={selectPermissionToRead:r,selectPermissionToEdit:o,selectPermissionToCreate:c,selectPermissionToDestroy:(0,a.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(l.Z.values.categoryRead)})),selectPermissionToImport:d};t.Z=u},75454:function(e,t,n){n.d(t,{Z:function(){return x}});var a=n(1413),s=n(42982),i=n(70885),l=n(47313),r=n(54013),o=n(74165),c=n(15861),d=n(1168),u=n(10499),m=n(33512),h=n(34370),f=n(46417);var v=function(e){var t=(0,l.useRef)(),n=(0,l.useState)(!1),a=(0,i.Z)(n,2),s=a[0],v=a[1];(0,l.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var Z=function(){var n=(0,c.Z)((0,o.Z)().mark((function n(a,s){var i,l,c;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,v(!0),n.next=4,r.Z.create(s);case 4:return i=n.sent,l=i.id,n.next=8,r.Z.find(l);case 8:c=n.sent,window.$(t.current).modal("hide"),e.onSuccess(c),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),m.Z.handle(n.t0);case 16:return n.prev=16,v(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("entities.product.new.title")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(h.Z,{saveLoading:s,onSubmit:Z,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},Z=n(49513),g=n(43270),p=n(45788),b=n(4694);var x=function(e){var t=(0,g.Gc)(),n=t.setValue,o=t.getValues,c=(0,l.useState)(!1),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,p.v9)(b.Z.selectPermissionToCreate),x=function(){m(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Z.Z,(0,a.Z)((0,a.Z)({},e),{},{fetchFn:function(e,t){return r.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.id&&(n=e.label),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:h})),u&&(0,f.jsx)(v,{onClose:x,onSuccess:function(t){var a=e.name,i=e.mode;n(a,i&&"multiple"===i?[].concat((0,s.Z)(o()[a]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),x()}})]})}},34370:function(e,t,n){var a=n(1413),s=n(70885),i=n(47313),l=n(43270),r=n(10499),o=n(89994),c=n(95748),d=n(68160),u=n(3463),m=n(67357),h=n(47575),f=n(21538),v=n(85543),Z=n(96111),g=n(98278),p=n(48895),b=n(46417),x=u.Ry().shape({vip:o.Z.relationToOne((0,r.ag)("entities.product.fields.vip"),{required:!0}),title:o.Z.string((0,r.ag)("entities.product.fields.title"),{required:!0}),amount:o.Z.integer((0,r.ag)("entities.product.fields.amount"),{required:!0}),commission:o.Z.string((0,r.ag)("entities.product.fields.commission"),{required:!0}),photo:o.Z.images((0,r.ag)("entities.product.fields.photo"),{})});t.Z=function(e){var t=(0,i.useState)((function(){var t=e.record||{};return{title:t.title,amount:t.amount,commission:t.commission,vip:t.vip||[],photo:t.photo,combo:t.combo}})),n=(0,s.Z)(t,1)[0],o=(0,l.cI)({resolver:(0,m.X)(x),mode:"all",defaultValues:n}),u=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,b.jsx)(d.Z,{children:(0,b.jsx)(l.RV,(0,a.Z)((0,a.Z)({},o),{},{children:(0,b.jsxs)("form",{onSubmit:o.handleSubmit(u),children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(g.Z,{name:"vip",label:(0,r.ag)("entities.product.fields.vip"),required:!0,showCreate:!e.modal})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(h.Z,{name:"title",label:(0,r.ag)("entities.product.fields.title"),required:!0,autoFocus:!0})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(f.Z,{name:"amount",label:(0,r.ag)("entities.product.fields.amount"),required:!0})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(f.Z,{name:"commission",label:(0,r.ag)("entities.product.fields.commission"),required:!0})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(v.Z,{name:"photo",label:(0,r.ag)("entities.paymentsettings.fields.photo"),required:!1,storage:Z.Z.values.categoryPhoto,max:void 0})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(p.Z,{name:"combo",label:(0,r.ag)("entities.product.fields.combo")})})]}),(0,b.jsxs)("div",{className:"form-buttons",children:[(0,b.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:o.handleSubmit(u),children:[(0,b.jsx)(c.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,r.ag)("common.save")]}),(0,b.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){o.setValue(e,n[e])}))},children:[(0,b.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,r.ag)("common.reset")]}),e.onCancel?(0,b.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,b.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,r.ag)("common.cancel")]}):null]})]})}))})}},48895:function(e,t,n){n(47313);var a=n(43270),s=n(49384),i=n(46417);function l(e){var t=e.label,n=e.name,l=e.hint,r=e.required,o=e.externalErrorMessage,c=(0,a.Gc)(),d=c.register,u=c.errors,m=c.formState,h=m.touched,f=m.isSubmitted,v=s.Z.errorMessage(n,u,h,f,o);return(0,i.jsxs)("div",{className:"form-group",children:[Boolean(t)&&(0,i.jsx)("label",{className:"col-form-label ".concat(r?"required":null),htmlFor:n,children:t}),(0,i.jsxs)("div",{className:"adherent-control adherent-switch",children:[(0,i.jsx)("input",{type:"checkbox",className:"adherent-control-input",id:n,name:n,ref:d,onChange:function(t){e.onChange&&e.onChange(t.target.checked)},onBlur:function(t){e.onBlur&&e.onBlur(t)}}),(0,i.jsx)("label",{className:"adherent-control-label",htmlFor:n,children:"\xa0"})]}),(0,i.jsx)("div",{className:"invalid-feedback",children:v}),Boolean(l)&&(0,i.jsx)("small",{className:"form-text text-muted",children:l})]})}l.defaultProps={},t.Z=l},98278:function(e,t,n){n.d(t,{Z:function(){return q}});var a=n(1413),s=n(42982),i=n(70885),l=n(47313),r=n(96988),o=n(74165),c=n(15861),d=n(1168),u=n(10499),m=n(33512),h=n(43270),f=n(89994),v=n(95748),Z=n(68160),g=n(3463),p=n(67357),b=n(47575),x=n(21538),j=n(85543),y=n(96111),C=n(46417),N=g.Ry().shape({title:f.Z.string((0,u.ag)("entities.vip.fields.title"),{required:!0}),photo:f.Z.images((0,u.ag)("entities.vip.fields.photo"),{}),entrylimit:f.Z.string((0,u.ag)("entities.vip.fields.entrylimit"),{}),levellimit:f.Z.decimal((0,u.ag)("entities.vip.fields.levelLimit"),{required:!0}),dailyorder:f.Z.integer((0,u.ag)("entities.vip.fields.dailyorder"),{required:!0}),comisionrate:f.Z.decimal((0,u.ag)("entities.vip.fields.comisionrate"),{required:!0})});var w=function(e){var t=(0,l.useState)((function(){var t=e.record||{};return{title:t.title,photo:t.photo||[],entrylimit:t.entrylimit,levellimit:t.levellimit,dailyorder:t.dailyorder,comisionrate:t.comisionrate}})),n=(0,i.Z)(t,1)[0],s=(0,h.cI)({resolver:(0,p.X)(N),mode:"all",defaultValues:n}),r=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,C.jsx)(Z.Z,{children:(0,C.jsx)(h.RV,(0,a.Z)((0,a.Z)({},s),{},{children:(0,C.jsxs)("form",{onSubmit:s.handleSubmit(r),children:[(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,C.jsx)(b.Z,{name:"title",label:(0,u.ag)("entities.vip.fields.title"),required:!0,autoFocus:!0})}),(0,C.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,C.jsx)(j.Z,{name:"photo",label:(0,u.ag)("entities.paymentsettings.fields.photo"),required:!1,storage:y.Z.values.categoryPhoto,max:void 0})}),(0,C.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,C.jsx)(x.Z,{name:"dailyorder",label:(0,u.ag)("entities.vip.fields.dailyorder"),required:!0})}),(0,C.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,C.jsx)(x.Z,{name:"comisionrate",label:(0,u.ag)("entities.vip.fields.commissionrate"),required:!0})}),(0,C.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,C.jsx)(b.Z,{name:"levellimit",label:(0,u.ag)("entities.vip.fields.levelLimit"),required:!0,autoFocus:!0})})]}),(0,C.jsxs)("div",{className:"form-buttons",children:[(0,C.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:s.handleSubmit(r),children:[(0,C.jsx)(v.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,u.ag)("common.save")]}),(0,C.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){s.setValue(e,n[e])}))},children:[(0,C.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,u.ag)("common.reset")]}),e.onCancel?(0,C.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,C.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,u.ag)("common.cancel")]}):null]})]})}))})};var P=function(e){var t=(0,l.useRef)(),n=(0,l.useState)(!1),a=(0,i.Z)(n,2),s=a[0],h=a[1];(0,l.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var f=function(){var n=(0,c.Z)((0,o.Z)().mark((function n(a,s){var i,l,c;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,r.Z.create(s);case 4:return i=n.sent,l=i.id,n.next=8,r.Z.find(l);case 8:c=n.sent,window.$(t.current).modal("hide"),e.onSuccess(c),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),m.Z.handle(n.t0);case 16:return n.prev=16,h(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return d.createPortal((0,C.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,C.jsx)("div",{className:"modal-dialog modal-lg",children:(0,C.jsxs)("div",{className:"modal-content",children:[(0,C.jsxs)("div",{className:"modal-header",children:[(0,C.jsx)("h5",{className:"modal-title",children:(0,u.ag)("entities.vip.new.title")}),(0,C.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,C.jsx)("span",{children:"\xd7"})})]}),(0,C.jsx)("div",{className:"modal-body",children:(0,C.jsx)(w,{saveLoading:s,onSubmit:f,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},T=n(49513),S=n(45788),k=n(80197);var q=function(e){var t=(0,h.Gc)(),n=t.setValue,o=t.getValues,c=(0,l.useState)(!1),d=(0,i.Z)(c,2),u=d[0],m=d[1],f=(0,S.v9)(k.Z.selectPermissionToCreate),v=function(){m(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.Z,(0,a.Z)((0,a.Z)({},e),{},{fetchFn:function(e,t){return r.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.id&&(n=e.label),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:f})),u&&(0,C.jsx)(P,{onClose:v,onSuccess:function(t){var a=e.name,i=e.mode;n(a,i&&"multiple"===i?[].concat((0,s.Z)(o()[a]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),v()}})]})}}}]);