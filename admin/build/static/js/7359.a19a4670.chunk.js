"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[7359],{4694:function(n,e,t){var r=t(76747),a=t(86495),s=t(26319),i=t(71945),l=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.categoryRead)})),o=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.categoryRead)})),c=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.categoryRead)})),u=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.categoryRead)})),d={selectPermissionToRead:l,selectPermissionToEdit:o,selectPermissionToCreate:c,selectPermissionToDestroy:(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.categoryRead)})),selectPermissionToImport:u};e.Z=d},6891:function(n,e,t){t.d(e,{Z:function(){return g}});var r=t(70885),a=t(74165),s=t(15861),i=t(15671),l=t(43144),o=t(99811),c=t.n(o),u=t(10499),d=t(63922),m=t(95162),p=t(81384),f=t(31881),x=t.n(f),g=function(){function n(){(0,i.Z)(this,n)}return(0,l.Z)(n,null,[{key:"validate",value:function(n,e){if(e){if(e.image&&!n.type.startsWith("image"))throw new Error((0,u.ag)("fileUploader.image"));if(e.storage.maxSizeInBytes&&n.size>e.storage.maxSizeInBytes)throw new Error((0,u.ag)("fileUploader.size",c()(e.storage.maxSizeInBytes)));var t=v(n.name);if(e.formats&&!e.formats.includes(t))throw new Error((0,u.ag)("fileUploader.formats",e.formats.join(", ")))}}},{key:"upload",value:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(e,t){var r,s,i,l,o,c,u;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,this.validate(e,t),n.next=7;break;case 4:return n.prev=4,n.t0=n.catch(0),n.abrupt("return",Promise.reject(n.t0));case 7:return r=v(e.name),s=(0,m.Z)(),i="".concat(s,".").concat(r),n.next=12,this.fetchFileCredentials(i,t);case 12:return l=n.sent,o=l.uploadCredentials,c=l.downloadUrl,u=l.privateUrl,n.next=18,this.uploadToServer(e,o);case 18:return n.abrupt("return",{id:s,name:e.name,sizeInBytes:e.size,publicUrl:o&&o.publicUrl?o.publicUrl:null,privateUrl:u,downloadUrl:c,new:!0});case 19:case"end":return n.stop()}}),n,this,[[0,4]])})));return function(e,t){return n.apply(this,arguments)}}()},{key:"fetchFileCredentials",value:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(e,t){var r,s,i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=p.Z.get(),n.next=3,d.Z.get("/tenant/".concat(r,"/file/credentials"),{params:{filename:e,storageId:t.storage.id}});case 3:return s=n.sent,i=s.data,n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},{key:"uploadToServer",value:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(e,t){var s,i,l,o,c,u,d;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(n.prev=0,s=t.url,i=new FormData,l=0,o=Object.entries(t.fields||{});l<o.length;l++)c=(0,r.Z)(o[l],2),u=c[0],d=c[1],i.append(u,d);return i.append("file",e),n.abrupt("return",x().post(s,i,{headers:{"Content-Type":"multipart/form-data"}}));case 8:throw n.prev=8,n.t0=n.catch(0),console.error(n.t0),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()}]),n}();function v(n){if(!n)return null;var e=/(?:\.([^.]+))?$/.exec(n);return e?e[1]:null}},15021:function(n,e,t){var r=t(76747),a=t(86495),s=t(26319),i=t(71945),l=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.userRead)})),o=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.userEdit)})),c=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.userDestroy)})),u={selectPermissionToRead:l,selectPermissionToEdit:o,selectPermissionToCreate:(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.userCreate)})),selectPermissionToImport:(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(n,e){return new s.Z(n,e).match(i.Z.values.userImport)})),selectPermissionToDestroy:c};e.Z=u},27829:function(n,e,t){var r,a=t(30168),s=t(38269).ZP.div(r||(r=(0,a.Z)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n  .card-stats .card-body {\n    padding: 15px !important;\n  }\n  .text-center {\n    text-align: center !important;\n  }\n  .card-stats .icon-big.icon-danger, .card-stats .icon-big.icon-default, .card-stats .icon-big.icon-info, .card-stats .icon-big.icon-primary, .card-stats .icon-big.icon-secondary, .card-stats .icon-big.icon-success, .card-stats .icon-big.icon-warning {\n    border-radius: 5px;\n}\n.card-stats .icon-big.icon-danger i, .card-stats .icon-big.icon-default i, .card-stats .icon-big.icon-info i, .card-stats .icon-big.icon-primary i, .card-stats .icon-big.icon-secondary i, .card-stats .icon-big.icon-success i, .card-stats .icon-big.icon-warning i {\n  color: #fff!important;\n}\n  .pb-3,\n  .py-3 {\n    padding-bottom: 1rem !important;\n  }\n  .pt-3,\n  .py-3 {\n    padding-top: 1rem !important;\n  }\n  .d-inline-block {\n    display: inline-block !important;\n  }\n  .pl-3, .px-3 {\n    padding-left: 1rem !important;\n  }\n  .card-stats .icon-big {\n    width: 100%;\n    height: 100%;\n    font-size: 2.2em;\n    min-height: 64px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  \n  }\n  .bubble-shadow-small {\n  position: relative; \n  }\n\n  .card-title {\n    margin: 0;\n    color: #575962;\n    font-size: 18px;\n    font-weight: 400;\n    line-height: 1.6;\n  }\n  .card-stats .icon-big.icon-primary {\n    background: #177dff;\n  .mt-3,\n  .my-3 {\n    margin-top: 1rem !important;\n  }\n  "])));e.Z=s},95748:function(n,e,t){t(47313);var r=t(46417);e.Z=function(n){return n.loading?(0,r.jsx)("span",{className:"spinner-border spinner-border-sm"}):n.iconClass?(0,r.jsx)("i",{className:n.iconClass}):null}},61567:function(n,e,t){t(47313);var r=t(46417);e.Z=function(){return(0,r.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,r.jsx)("div",{className:"spinner-border text-primary"})})}},10419:function(n,e,t){var r,a=t(30168),s=t(38269).ZP.div(r||(r=(0,a.Z)(["\n  margin-bottom: 8px;\n\n  .btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"])));e.Z=s},25969:function(n,e,t){var r,a=t(30168),s=t(38269).ZP.div(r||(r=(0,a.Z)(["\n  .btn.btn-link {\n    padding-left: 0;\n  }\n"])));e.Z=s},89722:function(n,e,t){t.d(e,{Z:function(){return b}});var r,a,s=t(74165),i=t(42982),l=t(15861),o=t(70885),c=t(47313),u=t(6891),d=t(33512),m=t(10499),p=t(30168),f=t(38269),x=f.ZP.div(r||(r=(0,p.Z)(["\n  .img-card:hover .img-buttons {\n    display: block;\n  }\n\n  .img-buttons {\n    display: none;\n    position: relative;\n    bottom: 2.1rem;\n    width: calc(100px);\n    text-align: center;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  .img-buttons * {\n    color: white;\n  }\n"]))),g=t(46417),v=f.ZP.div(a||(a=(0,p.Z)(["\n  /* The Modal (background) */\n  .modal {\n    display: block;\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    padding-top: 100px; /* Location of the box */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    background-color: rgb(0, 0, 0); /* Fallback color */\n    background-color: rgba(\n      0,\n      0,\n      0,\n      0.9\n    ); /* Black w/ opacity */\n  }\n\n  /* Modal Content (Image) */\n  .modal-content {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n  }\n\n  /* Caption of Modal Image (Image Text) - Same Width as the Image */\n  #caption {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n    text-align: center;\n    color: #ccc;\n    padding: 10px 0;\n    height: 150px;\n  }\n\n  /* Add Animation - Zoom in the Modal */\n  .modal-content,\n  #caption {\n    animation-name: zoom;\n    animation-duration: 0.6s;\n  }\n\n  @keyframes zoom {\n    from {\n      transform: scale(0);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n\n  /* The Close Button */\n  .close {\n    position: absolute;\n    top: 15px;\n    right: 35px;\n    color: #f1f1f1;\n    font-size: 40px;\n    font-weight: bold;\n    transition: 0.3s;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: #bbb;\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  /* 100% Image Width on Smaller Screens */\n  @media only screen and (max-width: 700px) {\n    .modal-content {\n      width: 100%;\n    }\n  }\n"])));var h=function(n){return(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"modal",children:[(0,g.jsx)("span",{className:"close",onClick:n.onClose,children:"\xd7"}),(0,g.jsx)("img",{className:"modal-content",src:n.src,alt:n.alt})]})})},Z=t(95748);var b=function(n){var e=(0,c.useState)(!1),t=(0,o.Z)(e,2),r=t[0],a=t[1],p=(0,c.useState)(null),f=(0,o.Z)(p,2),v=f[0],b=f[1],j=(0,c.useRef)(),y=function(){var e=n.value;return e?Array.isArray(e)?e:[e]:[]},w=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var r,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(r=t.target.files)&&r.length){e.next=4;break}return e.abrupt("return");case 4:return l=r[0],u.Z.validate(l,{storage:n.storage,image:!0}),a(!0),e.next=9,u.Z.upload(l,{storage:n.storage,image:!0});case 9:l=e.sent,j.current.value="",a(!1),n.onChange([].concat((0,i.Z)(y()),[l])),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(0),j.current.value="",console.error(e.t0),a(!1),d.Z.showMessage(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(n){return e.apply(this,arguments)}}(),C=n.max,k=n.readonly,P=(0,g.jsxs)("label",{className:"btn btn-outline-secondary px-4 mb-2",style:{cursor:"pointer"},children:[(0,g.jsx)(Z.Z,{loading:r,iconClass:"fas fa-plus"}),(0,m.ag)("fileUploader.upload"),(0,g.jsx)("input",{style:{display:"none"},disabled:r||k,accept:"image/*",type:"file",onChange:w,ref:j})]});return(0,g.jsxs)(x,{children:[k||C&&y().map((function(n){return{uid:n.id||void 0,name:n.name,status:"done",url:n.downloadUrl}})).length>=C?null:P,y()&&y().length?(0,g.jsx)("div",{className:"d-flex flex-row flex-wrap",children:y().map((function(e){return(0,g.jsxs)("div",{className:"mr-2 mb-2 img-card",style:{height:"100px"},children:[(0,g.jsx)("img",{alt:e.name,src:e.downloadUrl,className:"img-thumbnail",style:{width:"100px",height:"100px",objectFit:"cover"}}),(0,g.jsxs)("div",{className:"img-buttons rounded-bottom",children:[(0,g.jsx)("button",{type:"button",className:"btn btn-link",onClick:function(){return function(n){b({src:n.downloadUrl,alt:n.name})}(e)},children:(0,g.jsx)("i",{className:"fas fa-search"})}),!k&&(0,g.jsx)("button",{type:"button",className:"btn btn-link ml-2",onClick:function(){return t=e.id,void n.onChange(y().filter((function(n){return n.id!==t})));var t},children:(0,g.jsx)("i",{className:"fas fa-times"})})]})]},e.id)}))}):null,v&&(0,g.jsx)(h,{src:v.src,alt:v.alt,onClose:function(){b(null)}})]})}},69727:function(n,e,t){t(47313);var r=t(89722),a=t(46417);e.Z=function(n){var e=function(){var e=n.value;return e?Array.isArray(e)?e:[e]:[]};return e().length?(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"col-form-label",children:n.label}),(0,a.jsx)("br",{}),(0,a.jsx)(r.Z,{readonly:!0,value:e()})]}):null}},31287:function(n,e,t){t(47313);var r=t(46417);e.Z=function(n){if(!n.value&&0!==n.value&&!1!==n.value)return null;var e="".concat(n.prefix?"".concat(n.prefix," "):"").concat(n.value);return(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"col-form-label",children:n.label}),(0,r.jsx)("input",{type:"text",readOnly:!0,className:"form-control-plaintext",value:e})]})}},87359:function(n,e,t){t.r(e),t.d(e,{default:function(){return E}});var r=t(47313),a=t(45788),s=t(63830),i=t(94688),l=t(76747),o=function(n){return n.user.view},c=(0,l.P1)([o],(function(n){return n.user})),u={selectLoading:(0,l.P1)([o],(function(n){return Boolean(n.loading)})),selectUser:c,selectRaw:o},d=t(27829),m=t(23516),p=t(15021),f=t(10419),x=t(27059),g=t(65487),v=t(17366),h=t(61567),Z=t(46417);var b=function(n){return!n.value&&0!==n.value&&!1!==n.value||Array.isArray(n.value)&&!n.value.length?null:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsx)("label",{className:"col-form-label",children:n.label}),(0,Z.jsx)("br",{}),n.render(n.value)]})},j=t(69727),y=t(31287),w=t(10499);var C=function(n){var e=n.value;return e?"actif"===e?(0,Z.jsx)("span",{className:"badge badge-success",children:(0,w.ag)("actif")}):"inactif"===e?(0,Z.jsx)("span",{className:"badge badge-danger",children:(0,w.ag)("inactif")}):(0,Z.jsx)("span",{className:"badge badge-warning",children:(0,w.ag)("Supprim\xe9")}):null},k=t(25969),P=t(70816),N=t.n(P),T=t(63849),U=t(31616);var I=function(n){var e=n.user;return n.loading||!e?(0,Z.jsx)(h.Z,{}):(0,Z.jsxs)(k.Z,{children:[(0,Z.jsxs)(T.Z,{style:{paddingBottom:"10px"},children:[(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("user.fields.email"),value:e.email})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(b,{label:(0,w.ag)("user.fields.roles"),value:e.roles,render:function(n){return n.map((function(n){return(0,Z.jsx)("div",{children:(0,Z.jsx)("span",{children:v.Z.labelOf(n)})},n)}))}})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Phone Number"),value:e.phoneNumber})})]}),(0,Z.jsxs)(T.Z,{children:[(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Date Create account"),value:e.createdAt})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Invitation Code"),value:e.invitationcode})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("country"),value:e.country})})]}),(0,Z.jsxs)(T.Z,{style:{paddingBottom:"10px"},children:[(0,Z.jsx)(U.Z,{sm:4,children:e.date_naissance&&(0,Z.jsx)(y.Z,{label:(0,w.ag)("date naissance"),value:N()(e.date_naissance).format("DD-MM-YYYY")})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Adresse"),value:e.adresse})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("C.I.N"),value:e.cin})})]}),(0,Z.jsxs)(T.Z,{children:[(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Etat Civil"),value:e.etat_civil&&(0,w.ag)("".concat(e.etat_civil))})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Lien Facebook"),value:e.lien_facebook})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(j.Z,{label:(0,w.ag)("user.fields.avatars"),value:e.avatars})})]}),(0,Z.jsxs)(T.Z,{style:{paddingBottom:"10px"},children:[(0,Z.jsx)(U.Z,{sm:4,children:e.parrain?(0,Z.jsx)(y.Z,{label:(0,w.ag)("Parrain"),value:e.parrain.email}):null}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(b,{label:(0,w.ag)("Statut"),value:e.stat,render:function(n){return(0,Z.jsx)(C,{value:n})}})}),(0,Z.jsx)(U.Z,{sm:4})]})]})};var B=function(n){var e=(0,a.I0)(),t=(0,s.$B)(),l=(0,a.v9)(u.selectLoading),o=(0,a.v9)(u.selectUser);return(0,r.useEffect)((function(){e(i.Z.doFind(t.params.id))}),[e,t.params.id]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(I,{loading:l,user:o})})})},A=t(37712);var F=function(n){var e=n.user;return n.loading||!e?(0,Z.jsx)(h.Z,{}):(0,Z.jsxs)(k.Z,{children:[(0,Z.jsxs)(T.Z,{style:{paddingBottom:"10px"},children:[(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Wallet Address"),value:e.erc20})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Wallet Address"),value:e.trc20})}),(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(y.Z,{label:(0,w.ag)("Balance"),value:e.balance})})]}),(0,Z.jsx)(T.Z,{style:{paddingBottom:"10px"},children:(0,Z.jsx)(U.Z,{sm:4,children:(0,Z.jsx)(A.Z,{label:(0,w.ag)("VIP"),value:e.vip})})})]})};var S=function(n){var e=(0,a.I0)(),t=(0,s.$B)(),l=(0,a.v9)(u.selectLoading),o=(0,a.v9)(u.selectUser);return(0,r.useEffect)((function(){e(i.Z.doFind(t.params.id))}),[e,t.params.id]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(F,{loading:l,user:o})})})};var z=function(n){return n.match,(0,a.v9)(u.selectUser),(0,a.v9)(m.Z.selectPermissionToRead),(0,a.v9)(p.Z.selectPermissionToEdit),(0,Z.jsx)(f.Z,{children:(0,Z.jsxs)(x.Z,{defaultActiveKey:"informations",id:"tab-inf-user",children:[(0,Z.jsx)(g.Z,{eventKey:"informations",title:"Informations",children:(0,Z.jsx)(B,{})}),(0,Z.jsx)(g.Z,{eventKey:"wallet",title:"wallet",children:(0,Z.jsx)(S,{})})]})})};var E=function(n){var e=(0,a.I0)(),t=(0,s.$B)();(0,r.useEffect)((function(){e(i.Z.doFind(t.params.id))}),[e,t.params.id]);var l=(0,a.v9)(u.selectUser);return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(z,{match:t,user:l})})})}},37712:function(n,e,t){t(47313);var r=t(45788),a=t(28303),s=t(4694),i=t(46417);e.Z=function(n){var e=(0,r.v9)(s.Z.selectPermissionToRead),t=function(){var e=n.value;return e?Array.isArray(e)?e:[e]:[]};return t().length?(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("label",{className:"col-form-label",children:n.label}),t().map((function(n){return t=n,e?(0,i.jsx)("div",{children:(0,i.jsx)(a.rU,{className:"btn btn-link",to:"/vip/".concat(t.id),children:t.title})},t.id):(0,i.jsx)("div",{children:t.title},t.id);var t}))]}):null}}}]);