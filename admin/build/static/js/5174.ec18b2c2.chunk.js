"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[5174],{47921:function(e,n,a){var r=a(76747),t=function(e){return e.user.form},s=(0,r.P1)([t],(function(e){return e.user})),o={selectInitLoading:(0,r.P1)([t],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,r.P1)([t],(function(e){return Boolean(e.saveLoading)})),selectUser:s,selectRaw:t};n.Z=o},63442:function(e,n,a){var r=a(17366),t={status:["active","empty-permissions"],genre:["male","female"],roles:Object.keys(r.Z.values)};n.Z=t},27829:function(e,n,a){var r,t=a(30168),s=a(38269).ZP.div(r||(r=(0,t.Z)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n  .card-stats .card-body {\n    padding: 15px !important;\n  }\n  .text-center {\n    text-align: center !important;\n  }\n  .card-stats .icon-big.icon-danger, .card-stats .icon-big.icon-default, .card-stats .icon-big.icon-info, .card-stats .icon-big.icon-primary, .card-stats .icon-big.icon-secondary, .card-stats .icon-big.icon-success, .card-stats .icon-big.icon-warning {\n    border-radius: 5px;\n}\n.card-stats .icon-big.icon-danger i, .card-stats .icon-big.icon-default i, .card-stats .icon-big.icon-info i, .card-stats .icon-big.icon-primary i, .card-stats .icon-big.icon-secondary i, .card-stats .icon-big.icon-success i, .card-stats .icon-big.icon-warning i {\n  color: #fff!important;\n}\n  .pb-3,\n  .py-3 {\n    padding-bottom: 1rem !important;\n  }\n  .pt-3,\n  .py-3 {\n    padding-top: 1rem !important;\n  }\n  .d-inline-block {\n    display: inline-block !important;\n  }\n  .pl-3, .px-3 {\n    padding-left: 1rem !important;\n  }\n  .card-stats .icon-big {\n    width: 100%;\n    height: 100%;\n    font-size: 2.2em;\n    min-height: 64px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  \n  }\n  .bubble-shadow-small {\n  position: relative; \n  }\n\n  .card-title {\n    margin: 0;\n    color: #575962;\n    font-size: 18px;\n    font-weight: 400;\n    line-height: 1.6;\n  }\n  .card-stats .icon-big.icon-primary {\n    background: #177dff;\n  .mt-3,\n  .my-3 {\n    margin-top: 1rem !important;\n  }\n  "])));n.Z=s},61567:function(e,n,a){a(47313);var r=a(46417);n.Z=function(){return(0,r.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,r.jsx)("div",{className:"spinner-border text-primary"})})}},49513:function(e,n,a){var r=a(1413),t=a(42982),s=a(74165),o=a(15861),i=a(70885),l=a(47313),u=a(49384),c=a(73622),d=a(10499),m=a(43270),f=a(35487),p=a.n(f),h=a(46417);function g(e){var n=(0,m.Gc)(),a=n.errors,f=n.watch,g=n.setValue,b=n.register,x=n.formState,Z=x.touched,v=x.isSubmitted,j=e.label,N=e.name,y=e.hint,C=e.placeholder,w=e.autoFocus,B=e.externalErrorMessage,q=e.mode,k=e.required,P=e.isClearable,S=e.mapper,M=e.fetchFn,V=e.election,D=f(N),F=(0,l.useState)([]),L=(0,i.Z)(F,2),E=L[0],O=L[1],I=(0,l.useState)(!1),z=(0,i.Z)(I,2),A=z[0],G=z[1];(0,l.useEffect)((function(){b({name:N})}),[b,N]),(0,l.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,M();case 4:n=(n=e.sent).map((function(e){return S.toAutocomplete(e)})),O(n),G(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),O([]),G(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[]);var U=function(e){return(E||[]).find((function(n){return n.value===e.value}))||e},R=function(){return"multiple"===q?T():_()},T=function(){return D?D.map((function(e){return U(S.toAutocomplete(e))})):[]},_=function(){return D?U(S.toAutocomplete(D)):null},X=function(n){if(!n)return g(N,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var a=n.map((function(e){return S.toValue(e)}));g(N,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},$=function(n){if(!n)return g(N,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var a=S.toValue(n);g(N,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},H=A?(0,d.ag)("autocomplete.loading"):y,J=u.Z.errorMessage(N,a,Z,v,B),K=Boolean(J)?{control:function(e){return(0,r.Z)((0,r.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,h.jsxs)("div",{className:"form-group",children:[Boolean(j)&&(0,h.jsx)("label",{className:"col-form-label ".concat(k?"required":null),htmlFor:N,children:j}),(0,h.jsxs)("div",{style:{display:"flex"},children:[(0,h.jsx)(c.ZP,{className:"w-100",styles:K,id:N,name:N,isMulti:"multiple"===q,placeholder:C||"",autoFocus:w||void 0,onChange:function(e){return"multiple"===q?X(e):$(e)},value:R(),isClearable:P,options:function(){var n=e.mode;return E?R()?"multiple"===n?p()([].concat((0,t.Z)(E),(0,t.Z)(R())),"value"):p()([].concat((0,t.Z)(E),[R()]),"value"):E:[]}(),onBlur:function(n){e.onBlur&&e.onBlur(n)},loadingMessage:function(){return(0,d.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,d.ag)("autocomplete.noOptions")}}),V&&e.showCreate&&e.hasPermissionToCreate?(0,h.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:(0,h.jsx)("i",{className:"fas fa-plus"})}):null]}),(0,h.jsx)("div",{className:"invalid-feedback",children:J}),Boolean(H)&&(0,h.jsx)("small",{className:"form-text text-muted",children:H})]})}g.defaultProps={isClearable:!0,mode:"default",required:!1},n.Z=g},47575:function(e,n,a){a(47313);var r=a(43270),t=a(49384),s=a(46417);function o(e){var n=e.label,a=e.description,o=e.name,i=e.hint,l=e.type,u=e.placeholder,c=e.autoFocus,d=e.autoComplete,m=e.required,f=e.externalErrorMessage,p=e.disabled,h=e.endAdornment,g=(0,r.Gc)(),b=g.register,x=g.errors,Z=g.formState,v=Z.touched,j=Z.isSubmitted,N=t.Z.errorMessage(o,x,v,j,f);return(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("div",{className:h?"input-group":"",children:[Boolean(n)&&(0,s.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:o,children:n}),a,(0,s.jsx)("input",{id:o,name:o,type:l,ref:b,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:u||void 0,autoFocus:c||void 0,autoComplete:d||void 0,disabled:p,className:"form-control ".concat(N?"is-invalid":"")}),h&&(0,s.jsx)("div",{className:"input-group-append",children:(0,s.jsx)("span",{className:"input-group-text",children:h})})]}),(0,s.jsx)("div",{className:"invalid-feedback",children:N}),Boolean(i)&&(0,s.jsx)("small",{className:"form-text text-muted",children:i})]})}o.defaultProps={type:"text",required:!1},n.Z=o},21538:function(e,n,a){a(47313);var r=a(43270),t=a(49384),s=a(46417);function o(e){var n=e.label,a=e.name,o=e.hint,i=e.type,l=e.placeholder,u=e.autoFocus,c=e.autoComplete,d=e.required,m=e.externalErrorMessage,f=e.disabled,p=(0,r.Gc)(),h=p.register,g=p.errors,b=p.formState,x=b.touched,Z=b.isSubmitted,v=t.Z.errorMessage(a,g,x,Z,m);return(0,s.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,s.jsx)("label",{className:"col-form-label ".concat(d?"required":null),htmlFor:a,children:n}),(0,s.jsx)("input",{id:a,name:a,type:i,ref:h,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:l||void 0,autoFocus:u||void 0,autoComplete:c||void 0,disabled:f,className:"form-control ".concat(v?"is-invalid":"")}),(0,s.jsx)("div",{className:"invalid-feedback",children:v}),Boolean(o)&&(0,s.jsx)("small",{className:"form-text text-muted",children:o})]})}o.defaultProps={type:"number",required:!1},n.Z=o},5544:function(e,n,a){var r=a(1413),t=a(47313),s=a(73622),o=a(10499),i=a(43270),l=a(49384),u=a(46417);function c(e){var n=e.label,a=e.name,c=e.hint,d=e.options,m=e.required,f=e.mode,p=e.placeholder,h=e.isClearable,g=e.externalErrorMessage,b=(0,i.Gc)(),x=b.register,Z=b.errors,v=b.formState,j=v.touched,N=v.isSubmitted,y=b.setValue,C=b.watch,w=l.Z.errorMessage(a,Z,j,N,g),B=C(a);(0,t.useEffect)((function(){x({name:a})}),[x,a]);var q=function(){return B?B.map((function(e){return d.find((function(n){return n.value===e}))})):[]},k=function(){var n=e.options;return null!=B?n.find((function(e){return e.value===B})):null},P=function(n){if(!n)return y(a,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var r=n.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));y(a,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},S=function(n){if(!n)return y(a,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));y(a,n.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.value)},M=Boolean(w)?{container:function(e){return(0,r.Z)((0,r.Z)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return(0,r.Z)((0,r.Z)({},e),{},{borderColor:"red"})}}:{container:function(e){return(0,r.Z)((0,r.Z)({},e),{},{color:"hsl(0,0%,20%)"})}};return(0,u.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,u.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),(0,u.jsx)("br",{}),(0,u.jsx)(s.ZP,{className:"w-100",value:"multiple"===e.mode?q():k(),onChange:function(n){return"multiple"===e.mode?P(n):S(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:a,name:a,options:d,isMulti:"multiple"===f,placeholder:p||"",isClearable:h,styles:M,loadingMessage:function(){return(0,o.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,o.ag)("autocomplete.noOptions")}}),(0,u.jsx)("div",{className:"invalid-feedback",children:w}),Boolean(c)&&(0,u.jsx)("small",{className:"form-text text-muted",children:c})]})}c.defaultProps={required:!1,isClearable:!0},n.Z=c},75352:function(e,n,a){var r,t=a(30168),s=a(38269).ZP.h1(r||(r=(0,t.Z)(["\n  margin-bottom: 24px;\n"])));n.Z=s},35185:function(e,n,a){a.r(n),a.d(n,{default:function(){return L}});var r=a(70885),t=a(47313),s=a(45788),o=a(63830),i=a(10499),l=a(72803),u=a(541),c=a(47921),d=a(27829),m=a(61567),f=a(75352),p=a(1413),h=a(43270),g=a(5544),b=a(68160),x=a(95748),Z=a(6473),v=a(89994),j=a(63442),N=a(67357),y=a(47575),C=a(63849),w=a(31616),B=a(48895),q=a(85543),k=a(96111),P=a(98278),S=a(75454),M=a(21538),V=a(46417),D=Z.Ry().shape({roles:v.Z.stringArray((0,i.ag)("user.fields.roles"),{min:1}),phoneNumber:v.Z.string((0,i.ag)("phoneNumber"),{max:24}),adresse:v.Z.string((0,i.ag)("adresse"),{required:!1}),fullName:v.Z.string((0,i.ag)("fullName"),{required:!1}),balance:v.Z.string((0,i.ag)("balance"),{required:!1}),score:v.Z.integer((0,i.ag)("score"),{required:!1,min:0,max:100}),product:v.Z.relationToOne((0,i.ag)("prodcut"),{}),itemNumber:v.Z.integer((0,i.ag)("itemNumber"),{required:!1}),status:v.Z.enumerator((0,i.ag)("user.fields.status"),{options:j.Z.status})});var F=function(e){var n=(0,s.I0)(),a=(0,t.useState)((function(){var n=e.user||{};return{roles:n.roles[0],phoneNumber:n.phoneNumber,passportNumber:n.passportNumber,fullName:n.fullName,firstName:n.firstName,lastName:n.lastName,country:n.country,balance:n.balance,score:n.score,withdrawPassword:n.withdrawPassword,state:n.state,passportPhoto:n.passportPhoto||[],vip:n.vip||[],status:n.status,product:n.product||[],itemNumber:n.itemNumber,grab:n.grab,withdraw:n.withdraw,freezeblance:n.freezeblance,tasksDone:n.tasksDone}})),o=(0,r.Z)(a,1)[0],l=(0,h.cI)({resolver:(0,N.X)(D),mode:"all",defaultValues:o}),c=function(a){var r=(0,p.Z)({id:e.user.id},a);delete r.email,n(u.Z.doUpdate(r))};return(0,V.jsx)(b.Z,{children:(0,V.jsx)(h.RV,(0,p.Z)((0,p.Z)({},l),{},{children:(0,V.jsxs)("form",{onSubmit:l.handleSubmit(c),children:[(0,V.jsxs)(C.Z,{style:{paddingBottom:"10px",display:"grid"},children:[(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsxs)("div",{className:"form-group",children:[(0,V.jsx)("label",{className:"col-form-label",htmlFor:"Username",children:(0,i.ag)("user.fields.username")}),(0,V.jsx)("input",{type:"text",readOnly:!0,className:"form-control-plaintext",id:"email",name:"email",value:e.user.email})]})}),(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)("div",{className:"form-group",children:(0,V.jsx)(y.Z,{name:"withdrawPassword",label:(0,i.ag)("user.fields.withdrawPassword"),required:!0})})}),(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(g.Z,{name:"roles",label:(0,i.ag)("user.fields.roles"),required:!0,options:j.Z.roles.map((function(e){return{value:e,label:(0,i.ag)("".concat(e))}}))})}),(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(g.Z,{name:"status",label:(0,i.ag)("user.fields.status"),options:j.Z.status.map((function(e){return{value:e,label:(0,i.ag)("user.status.".concat(e))}}))})})]}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(B.Z,{name:"grab",label:(0,i.ag)("user.fields.grab")})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(B.Z,{name:"withdraw",label:(0,i.ag)("user.fields.withdraw")})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(y.Z,{name:"balance",label:(0,i.ag)("user.fields.balance"),required:!0})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(y.Z,{name:"freezeblance",label:(0,i.ag)("user.fields.freezeblance"),required:!0})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(M.Z,{name:"tasksDone",label:(0,i.ag)("user.fields.tasksDone")})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(P.Z,{name:"vip",label:(0,i.ag)("entities.product.fields.vip"),required:!0,showCreate:!e.modal})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(q.Z,{name:"passportPhoto",label:(0,i.ag)("user.fields.passportphoto"),storage:k.Z.values.galleryPhotos,max:2})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(y.Z,{name:"fullName",label:(0,i.ag)("user.fields.fullName"),required:!0})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(y.Z,{name:"phoneNumber",label:(0,i.ag)("user.fields.phoneNumber"),required:!0})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(y.Z,{name:"country",label:(0,i.ag)("user.fields.country"),required:!0})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(M.Z,{name:"score",label:(0,i.ag)("user.fields.score")})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(S.Z,{name:"product",label:(0,i.ag)("user.fields.product")})})}),(0,V.jsx)(C.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(M.Z,{name:"itemNumber",label:(0,i.ag)("user.fields.itemNumber"),required:!0})})}),(0,V.jsxs)("div",{className:"form-buttons",children:[(0,V.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:l.handleSubmit(c),children:[(0,V.jsx)(x.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,i.ag)("common.save")]}),(0,V.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){Object.keys(o).forEach((function(e){l.setValue(e,o[e])}))},type:"button",children:[(0,V.jsx)("i",{className:"fas fa-undo"}),(0,i.ag)("common.reset")]}),e.onCancel?(0,V.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){return e.onCancel()},type:"button",children:[(0,V.jsx)("i",{className:"fas fa-times"}),(0,i.ag)("common.cancel")]}):null]})]})}))})};var L=function(e){var n=(0,s.I0)(),a=(0,t.useState)(!1),p=(0,r.Z)(a,2),h=p[0],g=p[1],b=(0,s.v9)(c.Z.selectInitLoading),x=(0,s.v9)(c.Z.selectSaveLoading),Z=(0,s.v9)(c.Z.selectUser),v=(0,o.$B)(),j=Boolean(v.params.id);return(0,t.useEffect)((function(){n(u.Z.doInit(v.params.id)),g(!0)}),[n,v.params.id]),(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(f.Z,{children:(0,i.ag)("user.edit.title")}),b&&(0,V.jsx)(m.Z,{}),h&&!b&&(0,V.jsx)(F,{user:Z,saveLoading:x,isEditing:j,onCancel:function(){return(0,l.s1)().push("/user")}})]})})}}}]);