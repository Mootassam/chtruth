"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[4280],{67922:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(74165),a=n(15861),i=n(15671),s=n(43144),o=n(63922),c=n(81384),u=function(){function e(){(0,i.Z)(this,e)}return(0,s.Z)(e,null,[{key:"update",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t,data:n},i=c.Z.get(),e.next=4,o.Z.put("/tenant/".concat(i,"/spot/").concat(t),a);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"destroyAll",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ids:t},a=c.Z.get(),e.next=4,o.Z.delete("/tenant/".concat(a,"/spot"),{params:n});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:t},a=c.Z.get(),e.next=4,o.Z.post("/tenant/".concat(a,"/spot"),n);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"import",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:t,importHash:n},i=c.Z.get(),e.next=4,o.Z.post("/tenant/".concat(i,"/spot/import"),a);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.Z.get(),e.next=3,o.Z.get("/tenant/".concat(n,"/spot/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,i){var s,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={filter:t,orderBy:n,limit:a,offset:i},u=c.Z.get(),e.next=4,o.Z.get("/tenant/".concat(u,"/spot"),{params:s});case 4:return l=e.sent,e.abrupt("return",l.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"listAutocomplete",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={query:t,limit:n},i=c.Z.get(),e.next=4,o.Z.get("/tenant/".concat(i,"/spot/autocomplete"),{params:a});case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},15021:function(e,t,n){var r=n(76747),a=n(86495),i=n(26319),s=n(71945),o=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(s.Z.values.userRead)})),c=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(s.Z.values.userEdit)})),u=(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(s.Z.values.userDestroy)})),l={selectPermissionToRead:o,selectPermissionToEdit:c,selectPermissionToCreate:(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(s.Z.values.userCreate)})),selectPermissionToImport:(0,r.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new i.Z(e,t).match(s.Z.values.userImport)})),selectPermissionToDestroy:u};t.Z=l},27829:function(e,t,n){var r,a=n(30168),i=n(38269).ZP.div(r||(r=(0,a.Z)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n  .card-stats .card-body {\n    padding: 15px !important;\n  }\n  .text-center {\n    text-align: center !important;\n  }\n  .card-stats .icon-big.icon-danger, .card-stats .icon-big.icon-default, .card-stats .icon-big.icon-info, .card-stats .icon-big.icon-primary, .card-stats .icon-big.icon-secondary, .card-stats .icon-big.icon-success, .card-stats .icon-big.icon-warning {\n    border-radius: 5px;\n}\n.card-stats .icon-big.icon-danger i, .card-stats .icon-big.icon-default i, .card-stats .icon-big.icon-info i, .card-stats .icon-big.icon-primary i, .card-stats .icon-big.icon-secondary i, .card-stats .icon-big.icon-success i, .card-stats .icon-big.icon-warning i {\n  color: #fff!important;\n}\n  .pb-3,\n  .py-3 {\n    padding-bottom: 1rem !important;\n  }\n  .pt-3,\n  .py-3 {\n    padding-top: 1rem !important;\n  }\n  .d-inline-block {\n    display: inline-block !important;\n  }\n  .pl-3, .px-3 {\n    padding-left: 1rem !important;\n  }\n  .card-stats .icon-big {\n    width: 100%;\n    height: 100%;\n    font-size: 2.2em;\n    min-height: 64px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  \n  }\n  .bubble-shadow-small {\n  position: relative; \n  }\n\n  .card-title {\n    margin: 0;\n    color: #575962;\n    font-size: 18px;\n    font-weight: 400;\n    line-height: 1.6;\n  }\n  .card-stats .icon-big.icon-primary {\n    background: #177dff;\n  .mt-3,\n  .my-3 {\n    margin-top: 1rem !important;\n  }\n  "])));t.Z=i},61567:function(e,t,n){n(47313);var r=n(46417);t.Z=function(){return(0,r.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,r.jsx)("div",{className:"spinner-border text-primary"})})}},75352:function(e,t,n){var r,a=n(30168),i=n(38269).ZP.h1(r||(r=(0,a.Z)(["\n  margin-bottom: 24px;\n"])));t.Z=i},14280:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r=n(70885),a=n(47313),i=n(45788),s=n(63830),o=n(10499),c=n(74165),u=n(15861),l=n(67922),d=n(33512),p=n(14122),m=n(72803),f="COUPONS_FORM",g={INIT_STARTED:"".concat(f,"_INIT_STARTED"),INIT_SUCCESS:"".concat(f,"_INIT_SUCCESS"),INIT_ERROR:"".concat(f,"_INIT_ERROR"),CREATE_STARTED:"".concat(f,"_CREATE_STARTED"),CREATE_SUCCESS:"".concat(f,"_CREATE_SUCCESS"),CREATE_ERROR:"".concat(f,"_CREATE_ERROR"),UPDATE_STARTED:"".concat(f,"_UPDATE_STARTED"),UPDATE_SUCCESS:"".concat(f,"_UPDATE_SUCCESS"),UPDATE_ERROR:"".concat(f,"_UPDATE_ERROR"),doInit:function(e){return function(){var t=(0,u.Z)((0,c.Z)().mark((function t(n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n({type:g.INIT_STARTED}),r={},!Boolean(e)){t.next=8;break}return t.next=7,l.Z.find(e);case 7:r=t.sent;case 8:n({type:g.INIT_SUCCESS,payload:r}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),d.Z.handle(t.t0),n({type:g.INIT_ERROR}),(0,m.s1)().push("/spot");case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},doCreate:function(e){return function(){var t=(0,u.Z)((0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:g.CREATE_STARTED}),t.next=4,l.Z.create(e);case 4:n({type:g.CREATE_SUCCESS}),p.Z.success((0,o.ag)("entities.vip.create.success")),(0,m.s1)().push("/spot"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),d.Z.handle(t.t0),n({type:g.CREATE_ERROR});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},doUpdate:function(e,t){return function(){var n=(0,u.Z)((0,c.Z)().mark((function n(r,a){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:g.UPDATE_STARTED}),n.next=4,l.Z.update(e,t);case 4:r({type:g.UPDATE_SUCCESS}),p.Z.success((0,o.ag)("entities.vip.update.success")),(0,m.s1)().push("/spot"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),d.Z.handle(n.t0),r({type:g.UPDATE_ERROR});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()}},Z=g,v=n(76747),h=function(e){return e.vip.form},b=(0,v.P1)([h],(function(e){return e.record})),x={selectInitLoading:(0,v.P1)([h],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,v.P1)([h],(function(e){return Boolean(e.saveLoading)})),selectRecord:b,selectRaw:h},y=n(1413),T=n(43270),E=n(89994),C=n(95748),S=n(68160),R=n(6473),w=n(67357),j=n(47575),P=n(68031),_=n(5544),k=n(46417),A=R.Ry().shape({orderNo:E.Z.string((0,o.ag)("entities.spot.fields.orderNo"),{required:!0}),orderType:E.Z.enumerator((0,o.ag)("entities.spot.fields.orderType"),{options:["type","market"],required:!0}),userAccount:E.Z.relationToOne((0,o.ag)("entities.spot.fields.userAccount"),{required:!0}),tradingPair:E.Z.string((0,o.ag)("entities.spot.fields.tradingPair"),{required:!0}),direction:E.Z.enumerator((0,o.ag)("entities.spot.fields.direction"),{options:["BUY","SELL"],required:!0}),delegateType:E.Z.string((0,o.ag)("entities.spot.fields.delegateType"),{required:!0}),delegateState:E.Z.string((0,o.ag)("entities.spot.fields.delegateState"),{required:!0}),orderQuantity:E.Z.decimal((0,o.ag)("entities.spot.fields.orderQuantity"),{required:!0}),commissionPrice:E.Z.decimal((0,o.ag)("entities.spot.fields.commissionPrice"),{required:!0}),entrustedValue:E.Z.decimal((0,o.ag)("entities.spot.fields.entrustedValue"),{required:!0}),transactionQuantity:E.Z.decimal((0,o.ag)("entities.spot.fields.transactionQuantity")),transactionValue:E.Z.decimal((0,o.ag)("entities.spot.fields.transactionValue")),closingPrice:E.Z.decimal((0,o.ag)("entities.spot.fields.closingPrice")),handlingFee:E.Z.decimal((0,o.ag)("entities.spot.fields.handlingFee")),commissionTime:E.Z.datetime((0,o.ag)("entities.spot.fields.commissionTime")),closingTime:E.Z.datetime((0,o.ag)("entities.spot.fields.closingTime")),status:E.Z.enumerator((0,o.ag)("entities.spot.fields.status"),{options:["pending","completed","canceled"],required:!0})});var N=function(e){var t=(0,a.useState)((function(){var t=e.record||{};return{orderNo:t.orderNo,orderType:t.orderType,userAccount:t.userAccount,tradingPair:t.tradingPair,direction:t.direction,delegateType:t.delegateType,delegateState:t.delegateState,orderQuantity:t.orderQuantity,commissionPrice:t.commissionPrice,entrustedValue:t.entrustedValue,transactionQuantity:t.transactionQuantity,transactionValue:t.transactionValue,closingPrice:t.closingPrice,handlingFee:t.handlingFee,commissionTime:t.commissionTime,closingTime:t.closingTime,status:t.status||"OPEN"}})),n=(0,r.Z)(t,1)[0],i=(0,T.cI)({resolver:(0,w.X)(A),mode:"all",defaultValues:n}),s=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,k.jsx)(S.Z,{children:(0,k.jsx)(T.RV,(0,y.Z)((0,y.Z)({},i),{},{children:(0,k.jsxs)("form",{onSubmit:i.handleSubmit(s),children:[(0,k.jsx)("div",{className:"row g-3",children:Object.keys(n).map((function(e){return(0,k.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:"userAccount"===e?(0,k.jsx)(P.Z,{name:e,label:(0,o.ag)("entities.spot.fields.".concat(e))}):"direction"===e?(0,k.jsx)(_.Z,{name:e,label:(0,o.ag)("entities.spot.fields.".concat(e)),options:["BUY","SELL"].map((function(e){return{value:e,label:e}}))}):"orderType"===e?(0,k.jsx)(_.Z,{name:e,label:(0,o.ag)("entities.spot.fields.".concat(e)),options:["type","market"].map((function(e){return{value:e,label:e}}))}):"status"===e?(0,k.jsx)(_.Z,{name:e,label:(0,o.ag)("entities.spot.fields.".concat(e)),options:["pending","completed","canceled"].map((function(e){return{value:e,label:e}}))}):e.includes("Time")?(0,k.jsx)(j.Z,{name:e,label:(0,o.ag)("entities.spot.fields.".concat(e)),type:"datetime-local"}):e.includes("Price")||e.includes("Quantity")||e.includes("Value")||e.includes("Fee")?(0,k.jsx)(j.Z,{name:e,label:(0,o.ag)("entities.spot.fields.".concat(e)),type:"number"}):(0,k.jsx)(j.Z,{name:e,label:(0,o.ag)("entities.spot.fields.".concat(e))})},e)}))}),(0,k.jsxs)("div",{className:"form-buttons d-flex flex-wrap gap-2 mt-3",children:[(0,k.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:i.handleSubmit(s),children:[(0,k.jsx)(C.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,o.ag)("common.save")]}),(0,k.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){return i.setValue(e,n[e])}))},children:[(0,k.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,o.ag)("common.reset")]}),e.onCancel&&(0,k.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:e.onCancel,children:[(0,k.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,o.ag)("common.cancel")]})]})]})}))})},U=n(27829),I=n(61567),D=n(75352);var L=function(e){var t=(0,a.useState)(!1),n=(0,r.Z)(t,2),c=n[0],u=n[1],l=(0,i.I0)(),d=(0,s.$B)(),p=(0,i.v9)(x.selectInitLoading),f=(0,i.v9)(x.selectSaveLoading),g=(0,i.v9)(x.selectRecord),v=Boolean(d.params.id),h=v?(0,o.ag)("entities.spot.edit.title"):(0,o.ag)("entities.spot.new.title");return(0,a.useEffect)((function(){l(Z.doInit(d.params.id)),u(!0)}),[l,d.params.id]),(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(U.Z,{children:[(0,k.jsx)(D.Z,{children:h}),p&&(0,k.jsx)(I.Z,{}),c&&!p&&(0,k.jsx)(N,{saveLoading:f,initLoading:p,record:g,isEditing:v,onSubmit:function(e,t){l(v?Z.doUpdate(e,t):Z.doCreate(t))},onCancel:function(){return(0,m.s1)().push("/spot")}})]})})}},68031:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(1413),a=n(42982),i=n(70885),s=n(47313),o=n(74773),c=n(74165),u=n(15861),l=n(1168),d=n(10499),p=n(89333),m=n(33512),f=n(46417);var g=function(e){var t=(0,s.useRef)(),n=(0,s.useState)(!1),r=(0,i.Z)(n,2),a=r[0],g=r[1];(0,s.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var Z=function(){var n=(0,u.Z)((0,c.Z)().mark((function n(r,a){var i,s;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,g(!0),n.next=4,o.Z.create(a);case 4:return n.next=6,o.Z.fetchUsers({email:a.emails[0]},null,1,0);case 6:i=n.sent,s=i.rows,window.$(t.current).modal("hide"),e.onSuccess(s[0]),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),m.Z.handle(n.t0);case 15:return n.prev=15,g(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e,t){return n.apply(this,arguments)}}();return l.createPortal((0,f.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,d.ag)("user.new.titleModal")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(p.Z,{saveLoading:a,onSubmit:Z,onCancel:function(){window.$(t.current).modal("hide")},modal:!0,single:!0})})]})})}),document.getElementById("modal-root"))},Z=n(49513),v=n(43270),h=n(45788),b=n(15021);var x=function(e){var t=(0,v.Gc)(),n=t.setValue,c=t.getValues,u=(0,s.useState)(!1),l=(0,i.Z)(u,2),d=l[0],p=l[1],m=(0,h.v9)(b.Z.selectPermissionToCreate);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Z.Z,(0,r.Z)((0,r.Z)({},e),{},{fetchFn:function(e,t){return o.Z.fetchUserAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;if(e.fullName||e.email){var t=e.email;return e.fullName&&(t="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:t}}return{value:e.id,label:e.label}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){return p(!0)},hasPermissionToCreate:m})),d&&(0,f.jsx)(g,{visible:d,onClose:function(){return p(!1)},onSuccess:function(t){var r=e.name,i=e.mode;n(r,i&&"multiple"===i?[].concat((0,a.Z)(c()[r]||[]),[t]):t),p(!1)}})]})}}}]);