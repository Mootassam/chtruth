"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[3961],{53961:function(e,n,s){s.r(n),s.d(n,{default:function(){return ce}});var t=s(47313),a=s(10499),r=s(27829),c=s(75352),i=s(22102),l=s(63849),o=s(31616),d=s(70885),u=s(23516),m=s(76747),h=s(86495),f=s(26319),x=s(71945),j=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),p=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),v=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),Z=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),b={selectPermissionToRead:j,selectPermissionToEdit:p,selectPermissionToCreate:v,selectPermissionToDestroy:(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),selectPermissionToImport:Z},g=s(74165),N=s(15861),S=s(81048),T=s(10674),C=s(33512),R=s(46356),y=s(14122),P="COUPONS_DESTROY",E={DESTROY_STARTED:"".concat(P,"_DESTROY_STARTED"),DESTROY_SUCCESS:"".concat(P,"_DESTROY_SUCCESS"),DESTROY_ERROR:"".concat(P,"_DESTROY_ERROR"),DESTROY_ALL_STARTED:"".concat(P,"_DESTROY_ALL_STARTED"),DESTROY_ALL_SUCCESS:"".concat(P,"_DESTROY_ALL_SUCCESS"),DESTROY_ALL_ERROR:"".concat(P,"_DESTROY_ALL_ERROR"),doDestroy:function(e){return function(){var n=(0,N.Z)((0,g.Z)().mark((function n(s){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s({type:E.DESTROY_STARTED}),n.next=4,T.Z.destroyAll([e]);case 4:s({type:E.DESTROY_SUCCESS}),y.Z.success((0,a.ag)("entities.vip.destroy.success")),s(S.Z.doFetchCurrentFilter()),(0,R.s1)().push("/futures"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),C.Z.handle(n.t0),s(S.Z.doFetchCurrentFilter()),s({type:E.DESTROY_ERROR});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},doDestroyAll:function(e){return function(){var n=(0,N.Z)((0,g.Z)().mark((function n(s){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s({type:E.DESTROY_ALL_STARTED}),n.next=4,T.Z.destroyAll(e);case 4:s({type:E.DESTROY_ALL_SUCCESS}),S.Z&&(s(S.Z.doClearAllSelected()),s(S.Z.doFetchCurrentFilter())),y.Z.success((0,a.ag)("entities.vip.destroyAll.success")),(0,R.s1)().push("/futures"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),C.Z.handle(n.t0),s(S.Z.doFetchCurrentFilter()),s({type:E.DESTROY_ALL_ERROR});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}},k=E,A={selectLoading:(0,m.P1)([function(e){return e.vip.destroy}],(function(e){return Boolean(e.loading)}))},D=s(85735),_=s(45788),w=s(44587),O=s(95748),L=s(10419),Y=s(28745),U=s(46417);var F=function(e){var n=(0,t.useState)(!1),s=(0,d.Z)(n,2),r=s[0],c=s[1],i=(0,_.I0)(),l=(0,_.v9)(D.Z.selectSelectedKeys),o=(0,_.v9)(D.Z.selectLoading),m=(0,_.v9)(A.selectLoading),h=((0,_.v9)(D.Z.selectExportLoading),(0,_.v9)(D.Z.selectHasRows),(0,_.v9)(u.Z.selectPermissionToRead),(0,_.v9)(b.selectPermissionToDestroy)),f=((0,_.v9)(b.selectPermissionToCreate),(0,_.v9)(b.selectPermissionToImport),function(){c(!0)}),x=function(){c(!1)};return(0,U.jsxs)(L.Z,{children:[function(){if(!h)return null;var e=!l.length||o,n=(0,U.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:f,children:(0,U.jsx)(O.Z,{loading:m,iconClass:"far fa-trash-alt"})});return e?(0,U.jsxs)("span",{"data-tip":(0,a.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[n,(0,U.jsx)(Y.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):n}(),r&&(0,U.jsx)(w.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return x(),void i(k.doDestroyAll(l))},onClose:function(){return x()},okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},I=s(61567),B=s(97249),V=s(1296),$=s(9518),H=s(5208);var K=function(){var e=(0,t.useState)(null),n=(0,d.Z)(e,2),s=n[0],r=n[1],c=(0,_.I0)(),i=(0,_.v9)(D.Z.selectLoading),l=(0,_.v9)(A.selectLoading),o=i||l,u=(0,_.v9)(D.Z.selectRows),m=(0,_.v9)(D.Z.selectPagination),h=(0,_.v9)(D.Z.selectSelectedKeys),f=(0,_.v9)(D.Z.selectHasRows),x=(0,_.v9)(D.Z.selectSorter),j=(0,_.v9)(D.Z.selectIsAllSelected),p=function(){return r(null)},v=function(e){var n=x.field===e&&"ascend"===x.order?"descend":"ascend";c(S.Z.doChangeSort({field:e,order:n}))};return(0,U.jsxs)("div",{className:"spot-list-container",children:[(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)("table",{className:"spot-list-table",children:[(0,U.jsx)("thead",{className:"table-header",children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"checkbox-column",children:f&&(0,U.jsx)("div",{className:"checkbox-wrapper",children:(0,U.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:Boolean(j),onChange:function(){return c(S.Z.doToggleAllSelected())}})})}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("futuresAmount")},children:[(0,a.ag)("entities.futures.fields.futuresAmount"),"futuresAmount"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("contractDuration")},children:[(0,a.ag)("entities.futures.fields.contractDuration"),"contractDuration"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("status")},children:[(0,a.ag)("entities.futures.fields.status"),"status"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("openPositionPrice")},children:[(0,a.ag)("entities.futures.fields.openPositionPrice"),"openPositionPrice"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("openPositionTime")},children:[(0,a.ag)("entities.futures.fields.openPositionTime"),"openPositionTime"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("closePositionPrice")},children:[(0,a.ag)("entities.futures.fields.closePositionPrice"),"closePositionPrice"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("closePositionTime")},children:[(0,a.ag)("entities.futures.fields.closePositionTime"),"closePositionTime"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("profitAndLossAmount")},children:[(0,a.ag)("entities.futures.fields.profitAndLossAmount"),"profitAndLossAmount"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("leverage")},children:[(0,a.ag)("entities.futures.fields.leverage"),"leverage"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return v("createdBy")},children:[(0,a.ag)("entities.futures.fields.createdBy"),"createdBy"===x.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===x.order?"\u2191":"\u2193"})]}),(0,U.jsx)("th",{className:"actions-header",children:"Control"})]})}),(0,U.jsxs)("tbody",{className:"table-body",children:[o&&(0,U.jsx)("tr",{children:(0,U.jsx)("td",{colSpan:15,className:"loading-cell",children:(0,U.jsxs)("div",{className:"loading-container",children:[(0,U.jsx)(I.Z,{}),(0,U.jsx)("span",{className:"loading-text",children:"Loading data..."})]})})}),!o&&!f&&(0,U.jsx)("tr",{children:(0,U.jsx)("td",{colSpan:15,className:"no-data-cell",children:(0,U.jsxs)("div",{className:"no-data-content",children:[(0,U.jsx)("i",{className:"fas fa-database no-data-icon"}),(0,U.jsx)("p",{children:(0,a.ag)("table.noData")})]})})}),!o&&u.map((function(e){return(0,U.jsxs)("tr",{className:"table-row",children:[(0,U.jsx)("td",{className:"checkbox-column",children:(0,U.jsx)("div",{className:"checkbox-wrapper",children:(0,U.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:h.includes(e.id),onChange:function(){return n=e.id,c(S.Z.doToggleOneSelected(n));var n}})})}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.futuresAmount}),(0,U.jsx)("td",{className:"table-cell",children:e.contractDuration}),(0,U.jsx)("td",{className:"table-cell",children:(0,U.jsx)("span",{className:"status-badge",children:e.futuresStatus})}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.openPositionPrice}),(0,U.jsx)("td",{className:"table-cell",children:(0,H.p)(e.openPositionTime)}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.closePositionPrice}),(0,U.jsx)("td",{className:"table-cell",children:(0,H.p)(e.closePositionTime)}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.profitAndLossAmount}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.leverage}),(0,U.jsx)("td",{className:"table-cell",children:(0,U.jsx)(V.Z,{value:e.createdBy})}),(0,U.jsx)("td",{className:"actions-cell",children:(0,U.jsx)("div",{className:"actions-container",children:e.finalized?(0,U.jsx)("span",{className:"status-badge",children:e.control}):["profit","loss"].map((function(n){return(0,U.jsx)("button",{type:"button",className:"btn-action ".concat("profit"===n?"edit":"delete"),onClick:function(){return function(e,n){var s={control:n.target.value};c($.Z.doUpdate(e,s))}(e.id,{target:{value:n}})},children:n},n)}))})})]},e.id)}))]})]})}),(0,U.jsx)("div",{className:"pagination-container",children:(0,U.jsx)(B.Z,{onChange:function(e){return c(S.Z.doChangePagination(e))},disabled:o,pagination:m})}),s&&(0,U.jsx)(w.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return e=s,p(),void c(k.doDestroy(e));var e},onClose:p,okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},z=s(1413),X=s(43270),q=s(47590),G=s(69138),J=s(3463),M=s(67357),Q=s(13586),W=s(40846),ee=s(47575),ne=s(68031),se=J.Ry().shape({user:q.Z.relationToOne((0,a.ag)("entities.transaction.fields.user")),idnumber:q.Z.decimal((0,a.ag)("entities.futures.fields.idnumber"))}),te={user:null,levellimit:null},ae={user:{label:(0,a.ag)("entities.transaction.fields.user"),render:W.Z.relationToOne()},idnumer:{label:(0,a.ag)("entities.futures.fields.idnumer"),render:W.Z.decimal()}};var re=function(e){var n=(0,_.v9)(D.Z.selectRawFilter),s=(0,_.I0)(),r=(0,t.useState)(!1),c=(0,d.Z)(r,2),i=c[0],l=c[1],o=(0,t.useState)((function(){return(0,z.Z)((0,z.Z)({},te),n)})),u=(0,d.Z)(o,1)[0],m=(0,X.cI)({resolver:(0,M.X)(se),defaultValues:u,mode:"all"});(0,t.useEffect)((function(){s(S.Z.doFetch(se.cast(u),n))}),[s]);var h=function(e){var n=m.getValues();s(S.Z.doFetch(e,n)),l(!1)};return(0,U.jsxs)(G.Z,{children:[(0,U.jsx)(Q.Z,{onClick:function(){l(!i)},renders:ae,values:n,expanded:i,onRemove:function(e){return m.setValue(e,te[e]),m.handleSubmit(h)()}}),(0,U.jsx)("div",{className:"container",children:(0,U.jsx)("div",{className:"collapse ".concat(i?"show":""),children:(0,U.jsx)(X.RV,(0,z.Z)((0,z.Z)({},m),{},{children:(0,U.jsxs)("form",{onSubmit:m.handleSubmit(h),children:[(0,U.jsxs)("div",{className:"row",children:[(0,U.jsx)("div",{className:"col-lg-6 col-12",children:(0,U.jsx)(ne.Z,{name:"user",label:(0,a.ag)("entities.transaction.fields.user")})}),(0,U.jsx)("div",{className:"col-lg-6 col-12",children:(0,U.jsx)(ee.Z,{name:"idnumber",label:(0,a.ag)("entities.futures.fields.idnumber")})})]}),(0,U.jsx)("div",{className:"row",children:(0,U.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,U.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,U.jsx)(O.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,a.ag)("common.search")]}),(0,U.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(te).forEach((function(e){m.setValue(e,te[e])})),s(S.Z.doReset()),l(!1)},disabled:e.loading,children:[(0,U.jsx)(O.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,a.ag)("common.reset")]})]})})]})}))})})]})};var ce=function(e){return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(r.Z,{children:[(0,U.jsx)(i.Z,{fluid:!0,children:(0,U.jsxs)(l.Z,{children:[(0,U.jsx)(o.Z,{xs:9,children:(0,U.jsx)(c.Z,{children:(0,a.ag)("entities.futures.list.title")})}),(0,U.jsx)(o.Z,{md:"auto",children:(0,U.jsx)(F,{})})]})}),(0,U.jsx)(re,{}),(0,U.jsx)(K,{})]})})}},5208:function(e,n,s){function t(e){if(!e)return"-";try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(n){return console.error("Invalid date format:",e,n),"-"}}s.d(n,{p:function(){return t}})},44587:function(e,n,s){var t=s(47313),a=s(1168),r=s(46417);n.Z=function(e){var n=(0,t.useRef)();(0,t.useEffect)((function(){window.$(n.current).modal("show"),window.$(n.current).on("hidden.bs.modal",e.onClose)}),[]);return a.createPortal((0,r.jsx)("div",{ref:n,className:"modal",tabIndex:-1,children:(0,r.jsx)("div",{className:"modal-dialog modal-sm",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:e.title}),(0,r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,r.jsx)("span",{children:"\xd7"})})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",children:e.cancelText}),(0,r.jsx)("button",{type:"button",onClick:function(){return window.$(n.current).modal("hide"),e.onConfirm()},className:"btn btn-primary btn-sm",children:e.okText})]})]})})}),document.getElementById("modal-root"))}},1296:function(e,n,s){s(47313);var t=s(28303),a=s(45788),r=s(15021),c=s(46417);n.Z=function(e){var n=(0,a.v9)(r.Z.selectPermissionToRead),s=function(){var n=e.value;return n?Array.isArray(n)?n:[n]:[]},i=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return s().length?(0,c.jsx)(c.Fragment,{children:s().map((function(e){return s=e,n?(0,c.jsx)("div",{children:(0,c.jsx)(t.rU,{className:"btn btn-link",to:"/user/".concat(s.id),children:i(s)})},s.id):(0,c.jsx)("div",{children:i(s)},s.id);var s}))}):null}},22102:function(e,n,s){var t=s(1413),a=s(45987),r=s(46123),c=s.n(r),i=s(47313),l=s(68524),o=s(46417),d=["bsPrefix","fluid","as","className"],u=i.forwardRef((function(e,n){var s=e.bsPrefix,r=e.fluid,i=void 0!==r&&r,u=e.as,m=void 0===u?"div":u,h=e.className,f=(0,a.Z)(e,d),x=(0,l.vE)(s,"container"),j="string"===typeof i?"-".concat(i):"-fluid";return(0,o.jsx)(m,(0,t.Z)((0,t.Z)({ref:n},f),{},{className:c()(h,i?"".concat(x).concat(j):x)}))}));u.displayName="Container",n.Z=u}}]);