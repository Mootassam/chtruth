"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[5174],{47921:function(e,n,r){var a=r(76747),s=function(e){return e.user.form},t=(0,a.P1)([s],(function(e){return e.user})),l={selectInitLoading:(0,a.P1)([s],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,a.P1)([s],(function(e){return Boolean(e.saveLoading)})),selectUser:t,selectRaw:s};n.Z=l},63442:function(e,n,r){var a=r(17366),s={status:["active","empty-permissions"],genre:["male","female"],roles:Object.keys(a.Z.values)};n.Z=s},61567:function(e,n,r){r(47313);var a=r(46417);n.Z=function(){return(0,a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,a.jsx)("div",{className:"spinner-border text-primary"})})}},49513:function(e,n,r){var a=r(1413),s=r(42982),t=r(74165),l=r(15861),o=r(70885),i=r(47313),u=r(49384),c=r(73622),d=r(10499),m=r(43270),f=r(35487),h=r.n(f),p=r(46417);function g(e){var n=(0,m.Gc)(),r=n.errors,f=n.watch,g=n.setValue,x=n.register,b=n.formState,Z=b.touched,v=b.isSubmitted,j=e.label,N=e.name,C=e.hint,y=e.placeholder,w=e.autoFocus,B=e.externalErrorMessage,q=e.mode,k=e.required,P=e.isClearable,S=e.mapper,M=e.fetchFn,V=e.election,D=f(N),F=(0,i.useState)([]),L=(0,o.Z)(F,2),E=L[0],O=L[1],I=(0,i.useState)(!1),A=(0,o.Z)(I,2),z=A[0],G=A[1];(0,i.useEffect)((function(){x({name:N})}),[x,N]),(0,i.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,M();case 4:n=(n=e.sent).map((function(e){return S.toAutocomplete(e)})),O(n),G(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),O([]),G(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[]);var U=function(e){return(E||[]).find((function(n){return n.value===e.value}))||e},R=function(){return"multiple"===q?T():_()},T=function(){return D?D.map((function(e){return U(S.toAutocomplete(e))})):[]},_=function(){return D?U(S.toAutocomplete(D)):null},X=function(n){if(!n)return g(N,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var r=n.map((function(e){return S.toValue(e)}));g(N,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},$=function(n){if(!n)return g(N,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var r=S.toValue(n);g(N,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},H=z?(0,d.ag)("autocomplete.loading"):C,J=u.Z.errorMessage(N,r,Z,v,B),K=Boolean(J)?{control:function(e){return(0,a.Z)((0,a.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,p.jsxs)("div",{className:"form-group",children:[Boolean(j)&&(0,p.jsx)("label",{className:"col-form-label ".concat(k?"required":null),htmlFor:N,children:j}),(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(c.ZP,{className:"w-100",styles:K,id:N,name:N,isMulti:"multiple"===q,placeholder:y||"",autoFocus:w||void 0,onChange:function(e){return"multiple"===q?X(e):$(e)},value:R(),isClearable:P,options:function(){var n=e.mode;return E?R()?"multiple"===n?h()([].concat((0,s.Z)(E),(0,s.Z)(R())),"value"):h()([].concat((0,s.Z)(E),[R()]),"value"):E:[]}(),onBlur:function(n){e.onBlur&&e.onBlur(n)},loadingMessage:function(){return(0,d.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,d.ag)("autocomplete.noOptions")}}),V&&e.showCreate&&e.hasPermissionToCreate?(0,p.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:(0,p.jsx)("i",{className:"fas fa-plus"})}):null]}),(0,p.jsx)("div",{className:"invalid-feedback",children:J}),Boolean(H)&&(0,p.jsx)("small",{className:"form-text text-muted",children:H})]})}g.defaultProps={isClearable:!0,mode:"default",required:!1},n.Z=g},47575:function(e,n,r){r(47313);var a=r(43270),s=r(49384),t=r(46417);function l(e){var n=e.label,r=e.description,l=e.name,o=e.hint,i=e.type,u=e.placeholder,c=e.autoFocus,d=e.autoComplete,m=e.required,f=e.externalErrorMessage,h=e.disabled,p=e.endAdornment,g=(0,a.Gc)(),x=g.register,b=g.errors,Z=g.formState,v=Z.touched,j=Z.isSubmitted,N=s.Z.errorMessage(l,b,v,j,f);return(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("div",{className:p?"input-group":"",children:[Boolean(n)&&(0,t.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:l,children:n}),r,(0,t.jsx)("input",{id:l,name:l,type:i,ref:x,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:u||void 0,autoFocus:c||void 0,autoComplete:d||void 0,disabled:h,className:"form-control ".concat(N?"is-invalid":"")}),p&&(0,t.jsx)("div",{className:"input-group-append",children:(0,t.jsx)("span",{className:"input-group-text",children:p})})]}),(0,t.jsx)("div",{className:"invalid-feedback",children:N}),Boolean(o)&&(0,t.jsx)("small",{className:"form-text text-muted",children:o})]})}l.defaultProps={type:"text",required:!1},n.Z=l},21538:function(e,n,r){r(47313);var a=r(43270),s=r(49384),t=r(46417);function l(e){var n=e.label,r=e.name,l=e.hint,o=e.type,i=e.placeholder,u=e.autoFocus,c=e.autoComplete,d=e.required,m=e.externalErrorMessage,f=e.disabled,h=(0,a.Gc)(),p=h.register,g=h.errors,x=h.formState,b=x.touched,Z=x.isSubmitted,v=s.Z.errorMessage(r,g,b,Z,m);return(0,t.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,t.jsx)("label",{className:"col-form-label ".concat(d?"required":null),htmlFor:r,children:n}),(0,t.jsx)("input",{id:r,name:r,type:o,ref:p,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:i||void 0,autoFocus:u||void 0,autoComplete:c||void 0,disabled:f,className:"form-control ".concat(v?"is-invalid":"")}),(0,t.jsx)("div",{className:"invalid-feedback",children:v}),Boolean(l)&&(0,t.jsx)("small",{className:"form-text text-muted",children:l})]})}l.defaultProps={type:"number",required:!1},n.Z=l},5544:function(e,n,r){var a=r(1413),s=r(47313),t=r(73622),l=r(10499),o=r(43270),i=r(49384),u=r(46417);function c(e){var n=e.label,r=e.name,c=e.hint,d=e.options,m=e.required,f=e.mode,h=e.placeholder,p=e.isClearable,g=e.externalErrorMessage,x=(0,o.Gc)(),b=x.register,Z=x.errors,v=x.formState,j=v.touched,N=v.isSubmitted,C=x.setValue,y=x.watch,w=i.Z.errorMessage(r,Z,j,N,g),B=y(r);(0,s.useEffect)((function(){b({name:r})}),[b,r]);var q=function(){return B?B.map((function(e){return d.find((function(n){return n.value===e}))})):[]},k=function(){var n=e.options;return null!=B?n.find((function(e){return e.value===B})):null},P=function(n){if(!n)return C(r,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var a=n.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));C(r,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},S=function(n){if(!n)return C(r,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));C(r,n.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.value)},M=Boolean(w)?{container:function(e){return(0,a.Z)((0,a.Z)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return(0,a.Z)((0,a.Z)({},e),{},{borderColor:"red"})}}:{container:function(e){return(0,a.Z)((0,a.Z)({},e),{},{color:"hsl(0,0%,20%)"})}};return(0,u.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,u.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),(0,u.jsx)("br",{}),(0,u.jsx)(t.ZP,{className:"w-100",value:"multiple"===e.mode?q():k(),onChange:function(n){return"multiple"===e.mode?P(n):S(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:r,name:r,options:d,isMulti:"multiple"===f,placeholder:h||"",isClearable:p,styles:M,loadingMessage:function(){return(0,l.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,l.ag)("autocomplete.noOptions")}}),(0,u.jsx)("div",{className:"invalid-feedback",children:w}),Boolean(c)&&(0,u.jsx)("small",{className:"form-text text-muted",children:c})]})}c.defaultProps={required:!1,isClearable:!0},n.Z=c},35185:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var a=r(70885),s=r(47313),t=r(45788),l=r(63830),o=r(10499),i=r(46356),u=r(541),c=r(47921),d=r(27829),m=r(61567),f=r(75352),h=r(1413),p=r(43270),g=r(5544),x=r(68160),b=r(95748),Z=r(3463),v=r(89994),j=r(63442),N=r(67357),C=r(47575),y=r(63849),w=r(31616),B=r(48895),q=r(85543),k=r(96111),P=r(98278),S=r(75454),M=r(21538),V=r(46417),D=Z.Ry().shape({roles:v.Z.stringArray((0,o.ag)("user.fields.roles"),{min:1}),phoneNumber:v.Z.string((0,o.ag)("phoneNumber"),{max:24}),adresse:v.Z.string((0,o.ag)("adresse"),{required:!1}),fullName:v.Z.string((0,o.ag)("fullName"),{required:!1}),balance:v.Z.string((0,o.ag)("balance"),{required:!1}),score:v.Z.integer((0,o.ag)("score"),{required:!1,min:0,max:100}),product:v.Z.relationToOne((0,o.ag)("prodcut"),{}),itemNumber:v.Z.integer((0,o.ag)("itemNumber"),{required:!1}),status:v.Z.enumerator((0,o.ag)("user.fields.status"),{options:j.Z.status})});var F=function(e){var n=(0,t.I0)(),r=(0,s.useState)((function(){var n=e.user||{};return{roles:n.roles[0],phoneNumber:n.phoneNumber,passportNumber:n.passportNumber,fullName:n.fullName,firstName:n.firstName,lastName:n.lastName,country:n.country,balance:n.balance,score:n.score,withdrawPassword:n.withdrawPassword,state:n.state,passportPhoto:n.passportPhoto||[],vip:n.vip||[],status:n.status,product:n.product||[],itemNumber:n.itemNumber,grab:n.grab,withdraw:n.withdraw,freezeblance:n.freezeblance,tasksDone:n.tasksDone}})),l=(0,a.Z)(r,1)[0],i=(0,p.cI)({resolver:(0,N.X)(D),mode:"all",defaultValues:l}),c=function(r){var a=(0,h.Z)({id:e.user.id},r);delete a.email,n(u.Z.doUpdate(a))};return(0,V.jsx)(x.Z,{children:(0,V.jsx)(p.RV,(0,h.Z)((0,h.Z)({},i),{},{children:(0,V.jsxs)("form",{onSubmit:i.handleSubmit(c),children:[(0,V.jsxs)(y.Z,{style:{paddingBottom:"10px",display:"grid"},children:[(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsxs)("div",{className:"form-group",children:[(0,V.jsx)("label",{className:"col-form-label",htmlFor:"Username",children:(0,o.ag)("user.fields.username")}),(0,V.jsx)("input",{type:"text",readOnly:!0,className:"form-control-plaintext",id:"email",name:"email",value:e.user.email})]})}),(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)("div",{className:"form-group",children:(0,V.jsx)(C.Z,{name:"withdrawPassword",label:(0,o.ag)("user.fields.withdrawPassword"),required:!0})})}),(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(g.Z,{name:"roles",label:(0,o.ag)("user.fields.roles"),required:!0,options:j.Z.roles.map((function(e){return{value:e,label:(0,o.ag)("".concat(e))}}))})}),(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(g.Z,{name:"status",label:(0,o.ag)("user.fields.status"),options:j.Z.status.map((function(e){return{value:e,label:(0,o.ag)("user.status.".concat(e))}}))})})]}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(B.Z,{name:"grab",label:(0,o.ag)("user.fields.grab")})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(B.Z,{name:"withdraw",label:(0,o.ag)("user.fields.withdraw")})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(C.Z,{name:"balance",label:(0,o.ag)("user.fields.balance"),required:!0})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(C.Z,{name:"freezeblance",label:(0,o.ag)("user.fields.freezeblance"),required:!0})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(M.Z,{name:"tasksDone",label:(0,o.ag)("user.fields.tasksDone")})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(P.Z,{name:"vip",label:(0,o.ag)("entities.product.fields.vip"),required:!0,showCreate:!e.modal})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(q.Z,{name:"passportPhoto",label:(0,o.ag)("user.fields.passportphoto"),storage:k.Z.values.galleryPhotos,max:2})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(C.Z,{name:"fullName",label:(0,o.ag)("user.fields.fullName"),required:!0})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(C.Z,{name:"phoneNumber",label:(0,o.ag)("user.fields.phoneNumber"),required:!0})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(C.Z,{name:"country",label:(0,o.ag)("user.fields.country"),required:!0})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(M.Z,{name:"score",label:(0,o.ag)("user.fields.score")})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(S.Z,{name:"product",label:(0,o.ag)("user.fields.product")})})}),(0,V.jsx)(y.Z,{children:(0,V.jsx)(w.Z,{sm:4,children:(0,V.jsx)(M.Z,{name:"itemNumber",label:(0,o.ag)("user.fields.itemNumber"),required:!0})})}),(0,V.jsxs)("div",{className:"form-buttons",children:[(0,V.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:i.handleSubmit(c),children:[(0,V.jsx)(b.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,o.ag)("common.save")]}),(0,V.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){Object.keys(l).forEach((function(e){i.setValue(e,l[e])}))},type:"button",children:[(0,V.jsx)("i",{className:"fas fa-undo"}),(0,o.ag)("common.reset")]}),e.onCancel?(0,V.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){return e.onCancel()},type:"button",children:[(0,V.jsx)("i",{className:"fas fa-times"}),(0,o.ag)("common.cancel")]}):null]})]})}))})};var L=function(e){var n=(0,t.I0)(),r=(0,s.useState)(!1),h=(0,a.Z)(r,2),p=h[0],g=h[1],x=(0,t.v9)(c.Z.selectInitLoading),b=(0,t.v9)(c.Z.selectSaveLoading),Z=(0,t.v9)(c.Z.selectUser),v=(0,l.$B)(),j=Boolean(v.params.id);return(0,s.useEffect)((function(){n(u.Z.doInit(v.params.id)),g(!0)}),[n,v.params.id]),(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(f.Z,{children:(0,o.ag)("user.edit.title")}),x&&(0,V.jsx)(m.Z,{}),p&&!x&&(0,V.jsx)(F,{user:Z,saveLoading:b,isEditing:j,onCancel:function(){return(0,i.s1)().push("/user")}})]})})}}}]);