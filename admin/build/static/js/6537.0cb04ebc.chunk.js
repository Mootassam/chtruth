"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[6537],{56537:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var a=t(47313),i=t(10499),r=t(1413),s=t(70885),o=t(43270),l=t(35188),c=t(23516),d=t(45788),u=t(63830),m=t(25803),g=t(94561),f=t(49384),h=t(46417);function p(e){var n=e.label,t=e.name,s=e.hint,l=e.externalErrorMessage,c=e.required,d=e.placeholder,u=e.isClearable,m=e.notFoundContent,p=(0,o.Gc)(),x=p.register,b=p.errors,y=p.formState,v=y.touched,j=y.isSubmitted,Z=p.setValue,N=p.watch,w=f.Z.errorMessage(t,b,v,j,l);(0,a.useEffect)((function(){x({name:t})}),[x,t]);var C=N(t),B=Boolean(w)?{control:function(e){return(0,r.Z)((0,r.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,h.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,h.jsx)("label",{className:"col-form-label ".concat(c?"required":null),children:n}),(0,h.jsx)("br",{}),(0,h.jsx)(g.ZP,{className:"w-100",value:C&&C.length?C.map((function(e){return{value:e,label:e}})):[],onChange:function(n){if(!n||!n.length)return Z(t,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var a=n.map((function(e){return e.value})).join(",").split(",");Z(t,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:t,name:t,placeholder:d||"",isClearable:u,styles:B,isMulti:!0,formatCreateLabel:function(e){return e},loadingMessage:function(){return(0,i.ag)("autocomplete.loading")},noOptionsMessage:function(){return m||""}}),(0,h.jsx)("div",{className:"invalid-feedback",children:w}),Boolean(s)&&(0,h.jsx)("small",{className:"form-text text-muted",children:s})]})}p.defaultProps={required:!1,isClearable:!0};var x=p,b=t(47575),y=t(95748),v=t(69138),j=t(47590),Z=t(3463),N=t(31172),w=t(67357),C=t(13586),B=t(40846),E=Z.Ry().shape({timestampRange:j.Z.datetimeRange((0,i.ag)("auditLog.fields.timestampRange")),entityNames:j.Z.stringArray((0,i.ag)("auditLog.fields.entityNames")),entityId:j.Z.string((0,i.ag)("auditLog.fields.entityId")),action:j.Z.string((0,i.ag)("auditLog.fields.action")),createdByEmail:j.Z.email((0,i.ag)("auditLog.fields.createdByEmail"))}),L={timestampRange:[],entityNames:[],entityId:null,action:null,createdByEmail:null},R={timestampRange:{label:(0,i.ag)("auditLog.fields.timestampRange"),render:B.Z.datetimeRange()},entityNames:{label:(0,i.ag)("auditLog.fields.entityNames"),render:B.Z.stringArray()},entityId:{label:(0,i.ag)("auditLog.fields.entityId"),render:B.Z.generic()},action:{label:(0,i.ag)("auditLog.fields.action"),render:B.Z.generic()},createdByEmail:{label:(0,i.ag)("auditLog.fields.createdByEmail"),render:B.Z.generic()}};var S=function(e){var n=(0,d.v9)(c.Z.selectRawFilter),t=(0,d.I0)(),g=(0,u.TH)(),f=(0,a.useState)(!1),p=(0,s.Z)(f,2),j=p[0],Z=p[1],B=(0,a.useState)((function(){var e=(0,r.Z)((0,r.Z)({},L),n),t=N.parse(g.search);return e.entityNames=t.entityNames||e.entityNames,e.entityNames&&!Array.isArray(e.entityNames)&&(e.entityNames=[e.entityNames]),e.entityId=t.entityId||e.entityId,e.createdByEmail=t.createdByEmail||e.createdByEmail,e})),S=(0,s.Z)(B,1)[0],I=(0,o.cI)({resolver:(0,w.X)(E),defaultValues:S,mode:"all"});(0,a.useEffect)((function(){t(l.Z.doFetch(E.cast(S),n))}),[t]);var k=function(e){var n=I.getValues();t(l.Z.doFetch(e,n)),Z(!1)},M=e.loading;return(0,h.jsxs)(v.Z,{children:[(0,h.jsx)(C.Z,{onClick:function(){Z(!j)},renders:R,values:n,expanded:j,onRemove:function(e){return I.setValue(e,L[e]),I.handleSubmit(k)()}}),(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"collapse ".concat(j?"show":""),children:(0,h.jsx)(o.RV,(0,r.Z)((0,r.Z)({},I),{},{children:(0,h.jsxs)("form",{onSubmit:I.handleSubmit(k),children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-lg-6 col-12",children:(0,h.jsx)(m.Z,{name:"timestampRange",label:(0,i.ag)("auditLog.fields.timestampRange"),showTimeInput:!0})}),(0,h.jsx)("div",{className:"col-lg-6 col-12",children:(0,h.jsx)(b.Z,{name:"createdByEmail",label:(0,i.ag)("auditLog.fields.createdByEmail")})}),(0,h.jsx)("div",{className:"col-lg-6 col-12",children:(0,h.jsx)(x,{name:"entityNames",label:(0,i.ag)("auditLog.fields.entityNames"),notFoundContent:(0,i.ag)("auditLog.entityNamesHint")})}),(0,h.jsx)("div",{className:"col-lg-6 col-12",children:(0,h.jsx)(b.Z,{name:"entityId",label:(0,i.ag)("auditLog.fields.entityId")})}),(0,h.jsx)("div",{className:"col-lg-6 col-12",children:(0,h.jsx)(b.Z,{name:"action",label:(0,i.ag)("auditLog.fields.action")})})]}),(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,h.jsxs)("button",{className:"btn btn-primary",type:"submit",children:[(0,h.jsx)(y.Z,{loading:M,iconClass:"fas fa-search"}),(0,i.ag)("common.search")]}),(0,h.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(L).forEach((function(e){I.setValue(e,L[e])})),t(l.Z.doReset()),Z(!1)},children:[(0,h.jsx)(y.Z,{loading:M,iconClass:"fas fa-undo"}),(0,i.ag)("common.reset")]})]})})]})}))})})]})},I=t(61567),k=t(27216),M=t(97249),F=t(98848),V=t(70816),A=t.n(V);var H=function(e){var n=(0,d.I0)(),t=function(e){var t=u.field===e&&"ascend"===u.order?"descend":"ascend";n(l.Z.doChangeSort({field:e,order:t}))},a=(0,d.v9)(c.Z.selectLoading),r=(0,d.v9)(c.Z.selectRows),s=(0,d.v9)(c.Z.selectPagination),o=(0,d.v9)(c.Z.selectHasRows),u=(0,d.v9)(c.Z.selectSorter);return(0,h.jsxs)(k.Z,{children:[(0,h.jsx)("div",{className:"table-responsive",children:(0,h.jsxs)("table",{className:"table table-striped mt-2",children:[(0,h.jsx)("thead",{className:"thead",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)(F.Z,{onSort:t,hasRows:o,sorter:u,name:"timestamp",label:(0,i.ag)("auditLog.fields.timestamp")}),(0,h.jsx)(F.Z,{onSort:t,hasRows:o,sorter:u,name:"createdByEmail",label:(0,i.ag)("auditLog.fields.createdByEmail")}),(0,h.jsx)(F.Z,{onSort:t,hasRows:o,sorter:u,name:"entityName",label:(0,i.ag)("auditLog.fields.entityName")}),(0,h.jsx)(F.Z,{onSort:t,hasRows:o,sorter:u,name:"action",label:(0,i.ag)("auditLog.fields.action")}),(0,h.jsx)(F.Z,{onSort:t,hasRows:o,sorter:u,name:"entityId",label:(0,i.ag)("auditLog.fields.entityId")}),(0,h.jsx)(F.Z,{className:"th-actions-sm"})]})}),(0,h.jsxs)("tbody",{children:[a&&(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:100,children:(0,h.jsx)(I.Z,{})})}),!a&&!o&&(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:100,children:(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,i.ag)("table.noData")})})}),!a&&r.map((function(e){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:A()(e.timestamp).format("YYYY-MM-DD HH:mm")}),(0,h.jsx)("td",{children:e.createdByEmail}),(0,h.jsx)("td",{children:e.entityName}),(0,h.jsx)("td",{children:e.action}),(0,h.jsx)("td",{children:e.entityId}),(0,h.jsx)("td",{children:(0,h.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return function(e){var n=JSON.stringify(e,null,2);window.open("","_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=400,height=400").document.write("<pre>".concat(n,"</pre>"))}(e.values)},children:(0,i.ag)("common.view")})})]},e.id)}))]})]})}),(0,h.jsx)(M.Z,{onChange:function(e){n(l.Z.doChangePagination(e))},disabled:a,pagination:s})]})},P=t(28745),T=t(10419);var q=function(e){var n=(0,d.v9)(c.Z.selectLoading),t=(0,d.v9)(c.Z.selectExportLoading),a=(0,d.v9)(c.Z.selectHasRows),r=(0,d.I0)(),s=!a||n;return(0,h.jsxs)(T.Z,{children:[(0,h.jsx)("span",{"data-tip":(0,i.ag)("common.noDataToExport"),"data-tip-disable":!s,"data-for":"audit-log-toolbar-export-tooltip",children:(0,h.jsx)("button",{className:"btn btn-light",type:"button",disabled:s,onClick:function(){r(l.Z.doExport())},children:(0,h.jsx)(y.Z,{loading:t,iconClass:"far fa-file-excel"})})}),(0,h.jsx)(P.Z,{id:"audit-log-toolbar-export-tooltip"})]})},D=t(27829),_=t(75352);var O=function(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(D.Z,{children:[(0,h.jsx)(_.Z,{children:(0,i.ag)("auditLog.title")}),(0,h.jsx)(q,{}),(0,h.jsx)(S,{}),(0,h.jsx)(H,{})]})})}},27829:function(e,n,t){var a,i=t(30168),r=t(38269).ZP.div(a||(a=(0,i.Z)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n  .card-stats .card-body {\n    padding: 15px !important;\n  }\n  .text-center {\n    text-align: center !important;\n  }\n  .card-stats .icon-big.icon-danger, .card-stats .icon-big.icon-default, .card-stats .icon-big.icon-info, .card-stats .icon-big.icon-primary, .card-stats .icon-big.icon-secondary, .card-stats .icon-big.icon-success, .card-stats .icon-big.icon-warning {\n    border-radius: 5px;\n}\n.card-stats .icon-big.icon-danger i, .card-stats .icon-big.icon-default i, .card-stats .icon-big.icon-info i, .card-stats .icon-big.icon-primary i, .card-stats .icon-big.icon-secondary i, .card-stats .icon-big.icon-success i, .card-stats .icon-big.icon-warning i {\n  color: #fff!important;\n}\n  .pb-3,\n  .py-3 {\n    padding-bottom: 1rem !important;\n  }\n  .pt-3,\n  .py-3 {\n    padding-top: 1rem !important;\n  }\n  .d-inline-block {\n    display: inline-block !important;\n  }\n  .pl-3, .px-3 {\n    padding-left: 1rem !important;\n  }\n  .card-stats .icon-big {\n    width: 100%;\n    height: 100%;\n    font-size: 2.2em;\n    min-height: 64px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  \n  }\n  .bubble-shadow-small {\n  position: relative; \n  }\n\n  .card-title {\n    margin: 0;\n    color: #575962;\n    font-size: 18px;\n    font-weight: 400;\n    line-height: 1.6;\n  }\n  .card-stats .icon-big.icon-primary {\n    background: #177dff;\n  .mt-3,\n  .my-3 {\n    margin-top: 1rem !important;\n  }\n  "])));n.Z=r},95748:function(e,n,t){t(47313);var a=t(46417);n.Z=function(e){return e.loading?(0,a.jsx)("span",{className:"spinner-border spinner-border-sm"}):e.iconClass?(0,a.jsx)("i",{className:e.iconClass}):null}},49384:function(e,n,t){t.d(n,{Z:function(){return r}});var a=t(15671),i=t(43144),r=function(){function e(){(0,a.Z)(this,e)}return(0,i.Z)(e,null,[{key:"errorMessage",value:function(e,n,t,a){var i,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(r)return r;if(!a&&!t[e])return null;var s=n[e];return(null===s||void 0===s||null===(i=s[0])||void 0===i?void 0:i.message)||(null===s||void 0===s?void 0:s.message)||s||null}}]),e}()},25803:function(e,n,t){var a=t(47313),i=t(43270),r=t(49384),s=t(61378),o=t.n(s),l=(t(72632),t(46417));function c(e){var n=e.label,t=e.name,s=e.hint,c=e.placeholder,d=e.autoFocus,u=e.required,m=e.showTimeInput,g=e.externalErrorMessage,f=(0,i.Gc)(),h=f.register,p=f.errors,x=f.formState,b=x.touched,y=x.isSubmitted,v=f.setValue,j=f.watch,Z=r.Z.errorMessage(t,p,b,y,g),N=j(t);(0,a.useEffect)((function(){h({name:t})}),[h,t]);var w=function(){return N?Array.isArray(!N)?null:N.length&&N[0]||null:null},C=function(){return N?Array.isArray(!N)||N.length<2?null:N[1]||null:null};return(0,l.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,l.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:t,children:n}),(0,l.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"baseline"},children:[(0,l.jsx)(o(),{id:"".concat(t,"Start"),name:"".concat(t,"Start"),onChange:function(n){return function(n){v(t,[n,C()],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([n,C()])}(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},selected:w(),className:"form-control ".concat(Z?"is-invalid":""),showTimeInput:m,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}},placeholderText:c||"",autoFocus:d||void 0,autoComplete:"off",dateFormat:m?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15}),(0,l.jsx)("div",{style:{flexShrink:1,marginLeft:"8px",marginRight:"8px"},children:"~"}),(0,l.jsx)(o(),{id:"".concat(t,"End"),name:"".concat(t,"End"),onChange:function(n){return function(n){v(t,[w(),n],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([w(),n])}(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},selected:C(),className:"form-control ".concat(Z?"is-invalid":""),showTimeInput:m,placeholderText:c||"",autoFocus:d||void 0,autoComplete:"off",dateFormat:m?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}})]}),(0,l.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(s)&&(0,l.jsx)("small",{className:"form-text text-muted",children:s})]})}c.defaultProps={required:!1},n.Z=c},47575:function(e,n,t){t(47313);var a=t(43270),i=t(49384),r=t(46417);function s(e){var n=e.label,t=e.description,s=e.name,o=e.hint,l=e.type,c=e.placeholder,d=e.autoFocus,u=e.autoComplete,m=e.required,g=e.externalErrorMessage,f=e.disabled,h=e.endAdornment,p=(0,a.Gc)(),x=p.register,b=p.errors,y=p.formState,v=y.touched,j=y.isSubmitted,Z=i.Z.errorMessage(s,b,v,j,g);return(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("div",{className:h?"input-group":"",children:[Boolean(n)&&(0,r.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:s,children:n}),t,(0,r.jsx)("input",{id:s,name:s,type:l,ref:x,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:c||void 0,autoFocus:d||void 0,autoComplete:u||void 0,disabled:f,className:"form-control ".concat(Z?"is-invalid":"")}),h&&(0,r.jsx)("div",{className:"input-group-append",children:(0,r.jsx)("span",{className:"input-group-text",children:h})})]}),(0,r.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(o)&&(0,r.jsx)("small",{className:"form-text text-muted",children:o})]})}s.defaultProps={type:"text",required:!1},n.Z=s},75352:function(e,n,t){var a,i=t(30168),r=t(38269).ZP.h1(a||(a=(0,i.Z)(["\n  margin-bottom: 24px;\n"])));n.Z=r},27216:function(e,n,t){var a,i=t(30168),r=t(38269).ZP.div(a||(a=(0,i.Z)(["\n  .table td {\n    white-space: nowrap;\n    border-collapse: collapse;\n  }\n  .itemType {\n    cursor:pointer;\n    background-color: #009efb;\n    padding: 0.5rem 1rem;\n    border-radius: 0.5rem;\n\n    \n  }\n  .itemType  span { \n   \n    color :#fff;\n\n  }\n  .p_items {\n  padding 0.3rem 1rem ;\n  cursor : pointer ;\n  }\n\n  .table td,\n  .table th {\n    vertical-align: middle;\n  }\n\n  .table .th-checkbox {\n    width: 50px;\n    vertical-align: middle;\n    text-align: center;\n  }\n\n  .table .th-actions,\n  .table .td-actions {\n    width: 230px;\n    vertical-align: middle;\n    text-align: right;\n  }\n\n  .table .th-actions-sm,\n  .table .td-actions-sm {\n    width: 100px;\n    vertical-align: middle;\n    text-align: right;\n  }\n\n  .table .td-actions a {\n    margin-right: 8px;\n  }\n"])));n.Z=r},98848:function(e,n,t){var a,i=t(30168),r=(t(47313),t(38269)),s=t(46417),o=r.ZP.th(a||(a=(0,i.Z)(["\n  cursor: pointer;\n  opacity: 1;\n  transition: opacity 0.15s ease-in;\n\n  &:hover,\n  &:focus {\n    opacity: 0.5;\n    transition: opacity 0.15s ease-in;\n  }\n\n  &:active {\n    opacity: 0.8;\n    transition: opacity 0.15s ease-out;\n  }\n"])));n.Z=function(e){var n=e.sorter,t=e.onSort,a=e.name,i=e.label,r=e.hasRows,l=e.children,c=e.align,d=void 0===c?"left":c;return r&&t?(0,s.jsx)(o,{onClick:function(){return t(a)},className:"".concat(e.className||""," sortable"),scope:"col",children:(0,s.jsxs)("div",{className:"table__th",children:[l||i||"",n.field===a&&"descend"===n.order&&(0,s.jsx)("i",{className:"ml-2 fas fa-sort-up"}),n.field===a&&"ascend"===n.order&&(0,s.jsx)("i",{className:"ml-2 fas fa-sort-down"})]})}):(0,s.jsx)("th",{className:e.className||"",style:{textAlign:d},scope:"col",children:l||i||""})}}}]);