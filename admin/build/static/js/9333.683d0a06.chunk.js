"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[9333],{93184:function(e,n,a){var t=a(76747),r=a(86495),s=a(26319),o=a(71945),l=(0,t.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsRead)})),i=(0,t.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsEdit)})),u=(0,t.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsCreate)})),c=(0,t.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsImport)})),d={selectPermissionToRead:l,selectPermissionToEdit:i,selectPermissionToCreate:u,selectPermissionToDestroy:(0,t.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsDestroy)})),selectPermissionToImport:c};n.Z=d},46952:function(e,n,a){var t=a(1413),r=a(70885),s=a(47313),o=a(43270),l=a(10499),i=a(89994),u=a(95748),c=a(68160),d=a(6473),m=a(67357),f=a(47575),h=a(21538),p=a(5544),g=a(35482),v=a(46417),b=d.Ry().shape({title:i.Z.string((0,l.ag)("entities.coupons.fields.title"),{required:!0}),codeName:i.Z.string((0,l.ag)("entities.coupons.fields.codeName"),{}),discount:i.Z.decimal((0,l.ag)("entities.coupons.fields.discount"),{required:!0}),noOfTimes:i.Z.integer((0,l.ag)("entities.coupons.fields.noOfTimes"),{required:!0}),status:i.Z.enumerator((0,l.ag)("entities.coupons.fields.status"),{options:g.Z.status}),type:i.Z.enumerator((0,l.ag)("entities.coupons.fields.type"),{required:!0,options:g.Z.type})});n.Z=function(e){var n=(0,s.useState)((function(){var n=e.record||{};return{title:n.title,codeName:n.codeName,discount:n.discount,noOfTimes:n.noOfTimes,type:n.type}})),a=(0,r.Z)(n,1)[0],i=(0,o.cI)({resolver:(0,m.X)(b),mode:"all",defaultValues:a}),d=function(n){var a;e.onSubmit(null===(a=e.record)||void 0===a?void 0:a.id,n)};return(0,v.jsx)(c.Z,{children:(0,v.jsx)(o.RV,(0,t.Z)((0,t.Z)({},i),{},{children:(0,v.jsxs)("form",{onSubmit:i.handleSubmit(d),children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(f.Z,{name:"title",label:(0,l.ag)("entities.coupons.fields.title"),required:!0,autoFocus:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(h.Z,{name:"noOfTimes",label:(0,l.ag)("entities.coupons.fields.noOfTimes"),required:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(p.Z,{name:"type",label:(0,l.ag)("entities.coupons.fields.type"),options:g.Z.type.map((function(e){return{value:e,label:(0,l.ag)("entities.coupons.enumerators.type.".concat(e))}})),required:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(f.Z,{name:"discount",label:(0,l.ag)("entities.coupons.fields.discount"),required:!0})})]}),(0,v.jsxs)("div",{className:"form-buttons",children:[(0,v.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:i.handleSubmit(d),children:[(0,v.jsx)(u.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,l.ag)("common.save")]}),(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(a).forEach((function(e){i.setValue(e,a[e])}))},children:[(0,v.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,l.ag)("common.reset")]}),e.onCancel?(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,v.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,l.ag)("common.cancel")]}):null]})]})}))})}},49513:function(e,n,a){var t=a(1413),r=a(42982),s=a(74165),o=a(15861),l=a(70885),i=a(47313),u=a(49384),c=a(73622),d=a(10499),m=a(43270),f=a(35487),h=a.n(f),p=a(46417);function g(e){var n=(0,m.Gc)(),a=n.errors,f=n.watch,g=n.setValue,v=n.register,b=n.formState,x=b.touched,Z=b.isSubmitted,j=e.label,N=e.name,C=e.hint,y=e.placeholder,I=e.autoFocus,S=e.externalErrorMessage,O=e.mode,T=e.required,E=e.isClearable,w=e.mapper,M=e.fetchFn,A=e.election,B=f(N),k=(0,i.useState)([]),R=(0,l.Z)(k,2),D=R[0],q=R[1],U=(0,i.useState)(!1),V=(0,l.Z)(U,2),P=V[0],L=V[1];(0,i.useEffect)((function(){v({name:N})}),[v,N]),(0,i.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,e.next=4,M();case 4:n=(n=e.sent).map((function(e){return w.toAutocomplete(e)})),q(n),L(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),q([]),L(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[]);var F=function(e){return(D||[]).find((function(n){return n.value===e.value}))||e},G=function(){return"multiple"===O?_():H()},_=function(){return B?B.map((function(e){return F(w.toAutocomplete(e))})):[]},H=function(){return B?F(w.toAutocomplete(B)):null},Y=function(n){if(!n)return g(N,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var a=n.map((function(e){return w.toValue(e)}));g(N,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},Q=function(n){if(!n)return g(N,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var a=w.toValue(n);g(N,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},$=P?(0,d.ag)("autocomplete.loading"):C,X=u.Z.errorMessage(N,a,x,Z,S),W=Boolean(X)?{control:function(e){return(0,t.Z)((0,t.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,p.jsxs)("div",{className:"form-group",children:[Boolean(j)&&(0,p.jsx)("label",{className:"col-form-label ".concat(T?"required":null),htmlFor:N,children:j}),(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(c.ZP,{className:"w-100",styles:W,id:N,name:N,isMulti:"multiple"===O,placeholder:y||"",autoFocus:I||void 0,onChange:function(e){return"multiple"===O?Y(e):Q(e)},value:G(),isClearable:E,options:function(){var n=e.mode;return D?G()?"multiple"===n?h()([].concat((0,r.Z)(D),(0,r.Z)(G())),"value"):h()([].concat((0,r.Z)(D),[G()]),"value"):D:[]}(),onBlur:function(n){e.onBlur&&e.onBlur(n)},loadingMessage:function(){return(0,d.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,d.ag)("autocomplete.noOptions")}}),A&&e.showCreate&&e.hasPermissionToCreate?(0,p.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:(0,p.jsx)("i",{className:"fas fa-plus"})}):null]}),(0,p.jsx)("div",{className:"invalid-feedback",children:X}),Boolean($)&&(0,p.jsx)("small",{className:"form-text text-muted",children:$})]})}g.defaultProps={isClearable:!0,mode:"default",required:!1},n.Z=g},71896:function(e,n,a){var t=a(47313),r=a(43270),s=a(49384),o=a(61378),l=a.n(o),i=(a(72632),a(46417));function u(e){var n=e.label,a=e.name,o=e.hint,u=e.placeholder,c=e.autoFocus,d=e.externalErrorMessage,m=e.required,f=e.showTimeInput,h=e.scrollableYearDropdown,p=e.showYearDropdown,g=e.showMonthDropdown,v=(0,r.Gc)(),b=v.register,x=v.errors,Z=v.formState,j=Z.touched,N=Z.isSubmitted,C=v.setValue,y=v.watch;(0,t.useEffect)((function(){b({name:a})}),[b,a]);var I=s.Z.errorMessage(a,x,j,N,d);return(0,i.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,i.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:a,children:n}),(0,i.jsx)("br",{}),(0,i.jsx)(l(),{id:a,name:a,className:"form-control ".concat(I?"is-invalid":""),onChange:function(n){C(a,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},selected:y(a),showTimeInput:f,scrollableYearDropdown:h,showYearDropdown:p,showMonthDropdown:g,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1}},placeholderText:u||"",autoFocus:c||void 0,autoComplete:"off",dateFormat:f?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15}),(0,i.jsx)("div",{className:"invalid-feedback",children:I}),Boolean(o)&&(0,i.jsx)("small",{className:"form-text text-muted",children:o})]})}u.defaultProps={required:!1},n.Z=u},47575:function(e,n,a){a(47313);var t=a(43270),r=a(49384),s=a(46417);function o(e){var n=e.label,a=e.description,o=e.name,l=e.hint,i=e.type,u=e.placeholder,c=e.autoFocus,d=e.autoComplete,m=e.required,f=e.externalErrorMessage,h=e.disabled,p=e.endAdornment,g=(0,t.Gc)(),v=g.register,b=g.errors,x=g.formState,Z=x.touched,j=x.isSubmitted,N=r.Z.errorMessage(o,b,Z,j,f);return(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("div",{className:p?"input-group":"",children:[Boolean(n)&&(0,s.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:o,children:n}),a,(0,s.jsx)("input",{id:o,name:o,type:i,ref:v,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:u||void 0,autoFocus:c||void 0,autoComplete:d||void 0,disabled:h,className:"form-control ".concat(N?"is-invalid":"")}),p&&(0,s.jsx)("div",{className:"input-group-append",children:(0,s.jsx)("span",{className:"input-group-text",children:p})})]}),(0,s.jsx)("div",{className:"invalid-feedback",children:N}),Boolean(l)&&(0,s.jsx)("small",{className:"form-text text-muted",children:l})]})}o.defaultProps={type:"text",required:!1},n.Z=o},21538:function(e,n,a){a(47313);var t=a(43270),r=a(49384),s=a(46417);function o(e){var n=e.label,a=e.name,o=e.hint,l=e.type,i=e.placeholder,u=e.autoFocus,c=e.autoComplete,d=e.required,m=e.externalErrorMessage,f=e.disabled,h=(0,t.Gc)(),p=h.register,g=h.errors,v=h.formState,b=v.touched,x=v.isSubmitted,Z=r.Z.errorMessage(a,g,b,x,m);return(0,s.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,s.jsx)("label",{className:"col-form-label ".concat(d?"required":null),htmlFor:a,children:n}),(0,s.jsx)("input",{id:a,name:a,type:l,ref:p,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:i||void 0,autoFocus:u||void 0,autoComplete:c||void 0,disabled:f,className:"form-control ".concat(Z?"is-invalid":"")}),(0,s.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(o)&&(0,s.jsx)("small",{className:"form-text text-muted",children:o})]})}o.defaultProps={type:"number",required:!1},n.Z=o},5544:function(e,n,a){var t=a(1413),r=a(47313),s=a(73622),o=a(10499),l=a(43270),i=a(49384),u=a(46417);function c(e){var n=e.label,a=e.name,c=e.hint,d=e.options,m=e.required,f=e.mode,h=e.placeholder,p=e.isClearable,g=e.externalErrorMessage,v=(0,l.Gc)(),b=v.register,x=v.errors,Z=v.formState,j=Z.touched,N=Z.isSubmitted,C=v.setValue,y=v.watch,I=i.Z.errorMessage(a,x,j,N,g),S=y(a);(0,r.useEffect)((function(){b({name:a})}),[b,a]);var O=function(){return S?S.map((function(e){return d.find((function(n){return n.value===e}))})):[]},T=function(){var n=e.options;return null!=S?n.find((function(e){return e.value===S})):null},E=function(n){if(!n)return C(a,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var t=n.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));C(a,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},w=function(n){if(!n)return C(a,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));C(a,n.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.value)},M=Boolean(I)?{container:function(e){return(0,t.Z)((0,t.Z)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return(0,t.Z)((0,t.Z)({},e),{},{borderColor:"red"})}}:{container:function(e){return(0,t.Z)((0,t.Z)({},e),{},{color:"hsl(0,0%,20%)"})}};return(0,u.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,u.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),(0,u.jsx)("br",{}),(0,u.jsx)(s.ZP,{className:"w-100",value:"multiple"===e.mode?O():T(),onChange:function(n){return"multiple"===e.mode?E(n):w(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:a,name:a,options:d,isMulti:"multiple"===f,placeholder:h||"",isClearable:p,styles:M,loadingMessage:function(){return(0,o.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,o.ag)("autocomplete.noOptions")}}),(0,u.jsx)("div",{className:"invalid-feedback",children:I}),Boolean(c)&&(0,u.jsx)("small",{className:"form-text text-muted",children:c})]})}c.defaultProps={required:!1,isClearable:!0},n.Z=c},89333:function(e,n,a){a.d(n,{Z:function(){return X}});var t=a(1413),r=a(36459),s=a(70885),o=a(43270),l=a(10499),i=a(47313),u=a(47575),c=a(5544),d=a(71896),m=a(68160),f=a(95748),h=a(6473),p=a(89994),g=a(67357),v=a(15671),b=a(43144),x=function(){function e(){(0,v.Z)(this,e)}return(0,b.Z)(e,null,[{key:"values",get:function(){return{AGRO_ALIMENTAIRE:"AGRO-ALIMENTAIRE",ASSURANCES:"ASSURANCES",AUDIOVISUEL:"AUDIOVISUEL",BANCAIRE:"BANCAIRE",CHIMIE:"CHIMIE",COMPOSANTS_AUTOMOBILES:"COMPOSANTS AUTOMOBILES",DISTRIBUTION:"DISTRIBUTION",DISTRIBUTION_AUTOMOBILE:"DISTRIBUTION AUTOMOBILE",DIVERS:"DIVERS",FINANCIER:"FINANCIER",HOLDING:"HOLDING",IMMOBILIER:"IMMOBILIER",INDUSTRIEL:"INDUSTRIEL",LEASING:"LEASING",LOGISTIQUE_TRANSPORT:"LOGISTIQUE ET TRANSPORT",PHARMACEUTIQUE:"PHARMACEUTIQUE","SANT\xc9":"SANT\xc9",TOURSIME:"TOURSIME",INFORMATION_TECHNOLOGY:"INFORMATION TECHNOLOGY"}}},{key:"labelOf",value:function(e){return this.values[e]?(0,l.ag)("secteur.".concat(e,".label")):e}},{key:"descriptionOf",value:function(e){return this.values[e]?(0,l.ag)("secteur.".concat(e,".description")):e}}]),e}(),Z={secteur:Object.keys(x.values)},j=a(70816),N=a.n(j),C=function(){function e(){(0,v.Z)(this,e)}return(0,b.Z)(e,null,[{key:"values",get:function(){return{"c\xe9l\xe9bataire":"c\xe9l\xe9bataire","mari\xe9":"mari\xe9"}}},{key:"labelOf",value:function(e){return this.values[e]?(0,l.ag)("".concat(e)):e}},{key:"descriptionOf",value:function(e){return this.values[e]?(0,l.ag)("etat.".concat(e,".description")):e}}]),e}(),y={Etat:Object.keys(C.values)},I=a(63849),S=a(31616),O=a(85543),T=a(96111),E=a(42982),w=a(81437),M=a(74165),A=a(15861),B=a(1168),k=a(33512),R=a(46952),D=a(46417);var q=function(e){var n=(0,i.useRef)(),a=(0,i.useState)(!1),t=(0,s.Z)(a,2),r=t[0],o=t[1];(0,i.useEffect)((function(){window.$(n.current).modal("show"),window.$(n.current).on("hidden.bs.modal",e.onClose)}),[]);var u=function(){var a=(0,A.Z)((0,M.Z)().mark((function a(t,r){var s,l,i;return(0,M.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o(!0),a.next=4,w.Z.create(r);case 4:return s=a.sent,l=s.id,a.next=8,w.Z.find(l);case 8:i=a.sent,window.$(n.current).modal("hide"),e.onSuccess(i),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),k.Z.handle(a.t0);case 16:return a.prev=16,o(!1),a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[0,13,16,19]])})));return function(e,n){return a.apply(this,arguments)}}();return B.createPortal((0,D.jsx)("div",{ref:n,className:"modal",tabIndex:-1,children:(0,D.jsx)("div",{className:"modal-dialog modal-lg",children:(0,D.jsxs)("div",{className:"modal-content",children:[(0,D.jsxs)("div",{className:"modal-header",children:[(0,D.jsx)("h5",{className:"modal-title",children:(0,l.ag)("entities.coupons.new.title")}),(0,D.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,D.jsx)("span",{children:"\xd7"})})]}),(0,D.jsx)("div",{className:"modal-body",children:(0,D.jsx)(R.Z,{saveLoading:r,onSubmit:u,onCancel:function(){window.$(n.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},U=a(49513),V=a(45788),P=a(93184);var L=function(e){var n=(0,o.Gc)(),a=n.setValue,r=n.getValues,l=(0,i.useState)(!1),u=(0,s.Z)(l,2),c=u[0],d=u[1],m=(0,V.v9)(P.Z.selectPermissionToCreate),f=function(){d(!1)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(U.Z,(0,t.Z)((0,t.Z)({},e),{},{fetchFn:function(e,n){return w.Z.listAutocomplete(e,n)},mapper:{toAutocomplete:function(e){if(!e)return null;var n=e.id,a=e.label;return e.id&&(a=e.label),{key:n,value:n,label:a}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){d(!0)},hasPermissionToCreate:m})),c&&(0,D.jsx)(q,{onClose:f,onSuccess:function(n){var t=e.name,s=e.mode;a(t,s&&"multiple"===s?[].concat((0,E.Z)(r()[t]||[]),[n]):n,{shouldValidate:!0,shouldDirty:!0}),f()}})]})},F=a(6891);var G=function(e){var n=(0,i.useState)(!1),a=(0,s.Z)(n,2),t=a[0],r=a[1],o=(0,i.useRef)(),u=function(){var n=e.value;return n?Array.isArray(n)?n:[n]:[]},c=function(){var n=(0,A.Z)((0,M.Z)().mark((function n(a){var t,s;return(0,M.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,(t=a.target.files)&&t.length){n.next=4;break}return n.abrupt("return");case 4:return s=t[0],F.Z.validate(s,{storage:e.storage,formats:e.formats}),r(!0),n.next=9,F.Z.upload(s,{storage:e.storage,formats:e.formats});case 9:s=n.sent,o.current.value="",r(!1),e.onChange([].concat((0,E.Z)(u()),[s])),n.next=21;break;case 15:n.prev=15,n.t0=n.catch(0),o.current.value="",console.error(n.t0),r(!1),k.Z.showMessage(n.t0);case 21:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}(),d=e.max,m=e.readonly,h=(0,D.jsxs)("label",{className:"btn btn-outline-secondary px-4 mb-2",style:{cursor:"pointer"},children:[(0,D.jsx)(f.Z,{loading:t,iconClass:"fas fa-plus"}),(0,l.ag)("fileUploader.upload"),(0,D.jsx)("input",{style:{display:"none"},disabled:t||m,accept:function(){var n=e.schema;if(n&&n.formats)return n.formats.map((function(e){return".".concat(e)})).join(",")}(),type:"file",onChange:c,ref:o})]});return(0,D.jsxs)("div",{children:[m||d&&u().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl}})).length>=d?null:h,u()&&u().length?(0,D.jsx)("div",{children:u().map((function(n){return(0,D.jsxs)("div",{children:[(0,D.jsx)("i",{className:"fas fa-link text-muted mr-2"}),(0,D.jsx)("a",{href:n.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:!0,children:n.name}),!m&&(0,D.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return a=n.id,void e.onChange(u().filter((function(e){return e.id!==a})));var a},children:(0,D.jsx)("i",{className:"fas fa-times"})})]},n.id)}))}):null]})},_=a(49384);function H(e){var n=e.label,a=e.name,t=e.hint,r=e.storage,s=e.formats,l=e.max,u=e.required,c=e.externalErrorMessage,d=(0,o.Gc)(),m=d.register,f=d.errors,h=d.formState,p=h.touched,g=h.isSubmitted,v=d.setValue,b=d.watch;(0,i.useEffect)((function(){m({name:a})}),[m,a]);var x=_.Z.errorMessage(a,f,p,g,c);return(0,D.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,D.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:a,children:n}),(0,D.jsx)("br",{}),(0,D.jsx)(G,{storage:r,formats:s,value:b(a),onChange:function(n){v(a,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},max:l}),(0,D.jsx)("div",{className:"invalid-feedback",children:x}),Boolean(t)&&(0,D.jsx)("small",{className:"form-text text-muted",children:t})]})}H.defaultProps={max:void 0,required:!1};var Y=H,Q=h.Ry().shape({email:p.Z.email((0,l.ag)("user.fields.email")),roles:p.Z.stringArray((0,l.ag)("user.fields.roles"),{}),phoneNumber:p.Z.string((0,l.ag)("phoneNumber"),{max:24}),secteur:p.Z.enumerator((0,l.ag)("secteur"),{options:Z.secteur}),adresse:p.Z.string((0,l.ag)("adresse"),{}),fullName:p.Z.string((0,l.ag)("fullName"),{}),cin:p.Z.integer((0,l.ag)("cin"),{max:8}),bearthday:p.Z.date((0,l.ag)("Date Naissance"),{})}),$=h.Ry().shape({emails:h.IX().label((0,l.ag)("user.fields.emails")).of(h.Z_().transform((function(e,n){return""===n?null:e})).email((0,l.ag)("user.validations.email")).label((0,l.ag)("user.fields.email")).max(255).required()).required().min(1),roles:p.Z.stringArray((0,l.ag)("user.fields.roles"),{required:!1})});var X=function(e){e.single;var n=e.saveLoading,a=e.user||{},h=e.single?Q:$,p=(0,i.useState)((function(){return{emails:[],email:"",roles:[],phoneNumber:"",passportNumber:"",nationality:"",country:"",state:"",payee:"",fullName:"",bearthday:a.date_naissance?N()(a.date_naissance,"DD-MM-YYYY").toDate():null,visa:"",visaDocument:[""]}})),v=(0,s.Z)(p,1)[0],b=(0,o.cI)({resolver:(0,g.X)(h),mode:"all",defaultValues:v}),x=function(n){var a=Object.assign({},((0,r.Z)(n),n));a.roles[0]="membre",a.email&&(a.emails=[a.email],delete a.email),e.onSubmit(null,a)},Z=(0,i.useState)(new Date),j=(0,s.Z)(Z,2);return j[0],j[1],(0,D.jsx)(m.Z,{children:(0,D.jsx)(o.RV,(0,t.Z)((0,t.Z)({},b),{},{children:(0,D.jsxs)("form",{onSubmit:b.handleSubmit(x),children:[(0,D.jsxs)(I.Z,{style:{paddingBottom:"10px"},children:[(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(u.Z,{name:"emails[0]",label:(0,l.ag)("user.fields.email"),required:!0})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(u.Z,{name:"fullName",label:(0,l.ag)("user.fields.fullName"),required:!0})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(u.Z,{name:"phoneNumber",label:(0,l.ag)("user.fields.phoneNumber"),autoComplete:"phoneNumber"})})]}),(0,D.jsxs)(I.Z,{children:[(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(u.Z,{name:"nationality",label:(0,l.ag)("user.fields.Nationality")})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(u.Z,{name:"country",label:(0,l.ag)("user.fields.Country"),autoComplete:"Country"})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(u.Z,{name:"state",label:(0,l.ag)("user.fields.state"),autoComplete:"state"})})]}),(0,D.jsxs)(I.Z,{style:{paddingBottom:"10px"},children:[(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(u.Z,{name:"passportNumber",label:(0,l.ag)("user.fields.passportNumber")})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(O.Z,{name:"photo",label:(0,l.ag)("entities.category.fields.passportphoto"),required:!1,storage:T.Z.values.categoryPhoto,max:void 0})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(d.Z,{name:"bearthday",label:(0,l.ag)("user.fields.bearthday")})})]}),(0,D.jsxs)(I.Z,{children:[(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(c.Z,{name:"payee",label:(0,l.ag)("user.fields.payee"),options:y.Etat.map((function(e){return{value:e,label:(0,l.ag)("user.maritalStatus.".concat(e))}}))})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(Y,{name:"attachements",label:(0,l.ag)("entities.projet.fields.attachements"),required:!1,storage:T.Z.values.projetAttachements,max:void 0,formats:void 0})}),(0,D.jsx)(S.Z,{sm:4,children:(0,D.jsx)(L,{name:"coupons",label:(0,l.ag)("entities.subcategories.fields.categoryId"),required:!0,showCreate:!e.modal})})]}),(0,D.jsxs)("div",{className:"form-buttons",children:[(0,D.jsxs)("button",{className:"btn btn-primary",disabled:n,type:"button",onClick:b.handleSubmit(x),children:[(0,D.jsx)(f.Z,{loading:n,iconClass:"far fa-save"}),(0,l.ag)("common.save")]}),(0,D.jsxs)("button",{disabled:n,onClick:function(){Object.keys(v).forEach((function(e){b.setValue(e,v[e])}))},className:"btn btn-light",type:"button",children:[(0,D.jsx)("i",{className:"fas fa-undo"}),(0,l.ag)("common.reset")]}),e.onCancel?(0,D.jsxs)("button",{disabled:n,onClick:function(){return e.onCancel()},className:"btn btn-light",type:"button",children:[(0,D.jsx)("i",{className:"fas fa-times"}),(0,l.ag)("common.cancel")]}):null]})]})}))})}}}]);