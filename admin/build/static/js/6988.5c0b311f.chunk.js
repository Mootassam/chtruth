"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[6988],{15021:function(e,s,n){var a=n(76747),t=n(86495),l=n(26319),r=n(71945),c=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(r.Z.values.userRead)})),i=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(r.Z.values.userEdit)})),o=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(r.Z.values.userDestroy)})),d={selectPermissionToRead:c,selectPermissionToEdit:i,selectPermissionToCreate:(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(r.Z.values.userCreate)})),selectPermissionToImport:(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],(function(e,s){return new l.Z(e,s).match(r.Z.values.userImport)})),selectPermissionToDestroy:o};s.Z=d},46988:function(e,s,n){n.r(s),n.d(s,{default:function(){return O}});var a=n(47313),t=n(10499),l=n(27829),r=n(75352),c=n(22102),i=n(63849),o=n(31616),d=n(70885),u=n(23516),m=n(26270),h=n(52540),f=n(42715),x=n(2262),j=n(72053),p=n(45788),g=n(44587),Z=n(95748),v=n(10419),b=n(28745),N=n(46417);var C=function(e){var s=(0,a.useState)(!1),n=(0,d.Z)(s,2),l=n[0],r=n[1],c=(0,p.I0)(),i=(0,p.v9)(j.Z.selectSelectedKeys),o=(0,p.v9)(j.Z.selectLoading),x=(0,p.v9)(f.Z.selectLoading),C=((0,p.v9)(j.Z.selectExportLoading),(0,p.v9)(j.Z.selectHasRows),(0,p.v9)(u.Z.selectPermissionToRead),(0,p.v9)(m.Z.selectPermissionToDestroy)),y=((0,p.v9)(m.Z.selectPermissionToCreate),(0,p.v9)(m.Z.selectPermissionToImport),function(){r(!0)}),k=function(){r(!1)};return(0,N.jsxs)(v.Z,{children:[function(){if(!C)return null;var e=!i.length||o,s=(0,N.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:y,children:(0,N.jsx)(Z.Z,{loading:x,iconClass:"far fa-trash-alt"})});return e?(0,N.jsxs)("span",{"data-tip":(0,t.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[s,(0,N.jsx)(b.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):s}(),l&&(0,N.jsx)(g.Z,{title:(0,t.ag)("common.areYouSure"),onConfirm:function(){return k(),void c(h.Z.doDestroyAll(i))},onClose:function(){return k()},okText:(0,t.ag)("common.yes"),cancelText:(0,t.ag)("common.no")})]})},y=n(61567),k=n(97249),T=n(1296);var P=function(){var e=(0,a.useState)(null),s=(0,d.Z)(e,2),n=s[0],l=s[1],r=(0,p.I0)(),c=(0,p.v9)(j.Z.selectLoading),i=(0,p.v9)(f.Z.selectLoading),o=c||i,u=(0,p.v9)(j.Z.selectRows),Z=(0,p.v9)(j.Z.selectPagination),v=(0,p.v9)(j.Z.selectSelectedKeys),b=(0,p.v9)(j.Z.selectHasRows),C=(0,p.v9)(j.Z.selectSorter),P=(0,p.v9)(j.Z.selectIsAllSelected),w=((0,p.v9)(m.Z.selectPermissionToEdit),(0,p.v9)(m.Z.selectPermissionToDestroy),function(){return l(null)}),S=function(e){var s=C.field===e&&"ascend"===C.order?"descend":"ascend";r(x.Z.doChangeSort({field:e,order:s}))};return(0,N.jsxs)("div",{className:"spot-list-container",children:[(0,N.jsx)("div",{className:"table-responsive",children:(0,N.jsxs)("table",{className:"spot-list-table",children:[(0,N.jsx)("thead",{className:"table-header",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"checkbox-column",children:b&&(0,N.jsx)("div",{className:"checkbox-wrapper",children:(0,N.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:Boolean(P),onChange:function(){return r(x.Z.doToggleAllSelected())}})})}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("orderNo")},children:[(0,t.ag)("entities.spot.fields.orderNo"),"orderNo"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("userAccount")},children:[(0,t.ag)("entities.spot.fields.userAccount"),"userAccount"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("tradingPair")},children:[(0,t.ag)("entities.spot.fields.tradingPair"),"tradingPair"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("direction")},children:[(0,t.ag)("entities.spot.fields.direction"),"direction"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("delegateType")},children:[(0,t.ag)("entities.spot.fields.delegateType"),"delegateType"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("delegateState")},children:[(0,t.ag)("entities.spot.fields.delegateState"),"delegateState"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("orderQuantity")},children:[(0,t.ag)("entities.spot.fields.orderQuantity"),"orderQuantity"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("commissionPrice")},children:[(0,t.ag)("entities.spot.fields.commissionPrice"),"commissionPrice"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("entrustedValue")},children:[(0,t.ag)("entities.spot.fields.entrustedValue"),"entrustedValue"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("transactionQuantity")},children:[(0,t.ag)("entities.spot.fields.transactionQuantity"),"transactionQuantity"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("transactionValue")},children:[(0,t.ag)("entities.spot.fields.transactionValue"),"transactionValue"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("closingPrice")},children:[(0,t.ag)("entities.spot.fields.closingPrice"),"closingPrice"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("handlingFee")},children:[(0,t.ag)("entities.spot.fields.handlingFee"),"handlingFee"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("commissionTime")},children:[(0,t.ag)("entities.spot.fields.commissionTime"),"commissionTime"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("closingTime")},children:[(0,t.ag)("entities.spot.fields.closingTime"),"closingTime"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return S("createdBy")},children:[(0,t.ag)("entities.spot.fields.createdBy"),"createdBy"===C.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===C.order?"\u2191":"\u2193"})]})]})}),(0,N.jsxs)("tbody",{className:"table-body",children:[o&&(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:18,className:"loading-cell",children:(0,N.jsxs)("div",{className:"loading-container",children:[(0,N.jsx)(y.Z,{}),(0,N.jsx)("span",{className:"loading-text",children:"Loading data..."})]})})}),!o&&!b&&(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:18,className:"no-data-cell",children:(0,N.jsxs)("div",{className:"no-data-content",children:[(0,N.jsx)("i",{className:"fas fa-database no-data-icon"}),(0,N.jsx)("p",{children:(0,t.ag)("table.noData")})]})})}),!o&&u.map((function(e){return(0,N.jsxs)("tr",{className:"table-row",children:[(0,N.jsx)("td",{className:"checkbox-column",children:(0,N.jsx)("div",{className:"checkbox-wrapper",children:(0,N.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:v.includes(e.id),onChange:function(){return s=e.id,r(x.Z.doToggleOneSelected(s));var s}})})}),(0,N.jsx)("td",{className:"table-cell",children:e.orderNo}),(0,N.jsx)("td",{className:"table-cell",children:e.userAccount}),(0,N.jsx)("td",{className:"table-cell",children:e.tradingPair}),(0,N.jsx)("td",{className:"table-cell",children:(0,N.jsx)("span",{className:"direction-badge ".concat("buy"===e.direction?"buy":"sell"),children:e.direction})}),(0,N.jsx)("td",{className:"table-cell",children:e.delegateType}),(0,N.jsx)("td",{className:"table-cell",children:(0,N.jsx)("span",{className:"status-badge",children:e.delegateState})}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.orderQuantity}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.commissionPrice}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.entrustedValue}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.transactionQuantity}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.transactionValue}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.closingPrice}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.handlingFee}),(0,N.jsx)("td",{className:"table-cell",children:e.commissionTime}),(0,N.jsx)("td",{className:"table-cell",children:e.closingTime}),(0,N.jsx)("td",{className:"table-cell",children:(0,N.jsx)(T.Z,{value:e.createdBy})})]},e.id)}))]})]})}),(0,N.jsx)("div",{className:"pagination-container",children:(0,N.jsx)(k.Z,{onChange:function(e){return r(x.Z.doChangePagination(e))},disabled:o,pagination:Z})}),n&&(0,N.jsx)(g.Z,{title:(0,t.ag)("common.areYouSure"),onConfirm:function(){return e=n,w(),void r(h.Z.doDestroy(e));var e},onClose:w,okText:(0,t.ag)("common.yes"),cancelText:(0,t.ag)("common.no")}),(0,N.jsx)("style",{children:"\n     \n      "})]})},w=n(1413),S=n(43270),V=n(47590),R=n(69138),A=n(3463),F=n(67357),I=n(13586),E=n(40846),Q=n(68031),U=A.Ry().shape({user:V.Z.relationToOne((0,t.ag)("entities.transaction.fields.user"))}),D={user:null,levellimit:null},L={user:{label:(0,t.ag)("entities.transaction.fields.user"),render:E.Z.relationToOne()}};var B=function(e){var s=(0,p.v9)(j.Z.selectRawFilter),n=(0,p.I0)(),l=(0,a.useState)(!1),r=(0,d.Z)(l,2),c=r[0],i=r[1],o=(0,a.useState)((function(){return(0,w.Z)((0,w.Z)({},D),s)})),u=(0,d.Z)(o,1)[0],m=(0,S.cI)({resolver:(0,F.X)(U),defaultValues:u,mode:"all"});(0,a.useEffect)((function(){n(x.Z.doFetch(U.cast(u),s))}),[n]);var h=function(e){var s=m.getValues();n(x.Z.doFetch(e,s)),i(!1)};return(0,N.jsxs)(R.Z,{children:[(0,N.jsx)(I.Z,{onClick:function(){i(!c)},renders:L,values:s,expanded:c,onRemove:function(e){return m.setValue(e,D[e]),m.handleSubmit(h)()}}),(0,N.jsx)("div",{className:"container",children:(0,N.jsx)("div",{className:"collapse ".concat(c?"show":""),children:(0,N.jsx)(S.RV,(0,w.Z)((0,w.Z)({},m),{},{children:(0,N.jsxs)("form",{onSubmit:m.handleSubmit(h),children:[(0,N.jsx)("div",{className:"row",children:(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(Q.Z,{name:"user",label:(0,t.ag)("entities.transaction.fields.user")})})}),(0,N.jsx)("div",{className:"row",children:(0,N.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,N.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,N.jsx)(Z.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,t.ag)("common.search")]}),(0,N.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(D).forEach((function(e){m.setValue(e,D[e])})),n(x.Z.doReset()),i(!1)},disabled:e.loading,children:[(0,N.jsx)(Z.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,t.ag)("common.reset")]})]})})]})}))})})]})};var O=function(e){return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(c.Z,{fluid:!0,children:(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(o.Z,{xs:9,children:(0,N.jsx)(r.Z,{children:(0,t.ag)("entities.spot.list.title")})}),(0,N.jsx)(o.Z,{md:"auto",children:(0,N.jsx)(C,{})})]})}),(0,N.jsx)(B,{}),(0,N.jsx)(P,{})]})})}},68031:function(e,s,n){n.d(s,{Z:function(){return v}});var a=n(1413),t=n(42982),l=n(70885),r=n(47313),c=n(74773),i=n(74165),o=n(15861),d=n(1168),u=n(10499),m=n(89333),h=n(33512),f=n(46417);var x=function(e){var s=(0,r.useRef)(),n=(0,r.useState)(!1),a=(0,l.Z)(n,2),t=a[0],x=a[1];(0,r.useEffect)((function(){window.$(s.current).modal("show"),window.$(s.current).on("hidden.bs.modal",e.onClose)}),[]);var j=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(a,t){var l,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,x(!0),n.next=4,c.Z.create(t);case 4:return n.next=6,c.Z.fetchUsers({email:t.emails[0]},null,1,0);case 6:l=n.sent,r=l.rows,window.$(s.current).modal("hide"),e.onSuccess(r[0]),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),h.Z.handle(n.t0);case 15:return n.prev=15,x(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e,s){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:s,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("user.new.titleModal")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(m.Z,{saveLoading:t,onSubmit:j,onCancel:function(){window.$(s.current).modal("hide")},modal:!0,single:!0})})]})})}),document.getElementById("modal-root"))},j=n(49513),p=n(43270),g=n(45788),Z=n(15021);var v=function(e){var s=(0,p.Gc)(),n=s.setValue,i=s.getValues,o=(0,r.useState)(!1),d=(0,l.Z)(o,2),u=d[0],m=d[1],h=(0,g.v9)(Z.Z.selectPermissionToCreate);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j.Z,(0,a.Z)((0,a.Z)({},e),{},{fetchFn:function(e,s){return c.Z.fetchUserAutocomplete(e,s)},mapper:{toAutocomplete:function(e){if(!e)return null;if(e.fullName||e.email){var s=e.email;return e.fullName&&(s="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:s}}return{value:e.id,label:e.label}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){return m(!0)},hasPermissionToCreate:h})),u&&(0,f.jsx)(x,{visible:u,onClose:function(){return m(!1)},onSuccess:function(s){var a=e.name,l=e.mode;n(a,l&&"multiple"===l?[].concat((0,t.Z)(i()[a]||[]),[s]):s),m(!1)}})]})}},1296:function(e,s,n){n(47313);var a=n(28303),t=n(45788),l=n(15021),r=n(46417);s.Z=function(e){var s=(0,t.v9)(l.Z.selectPermissionToRead),n=function(){var s=e.value;return s?Array.isArray(s)?s:[s]:[]},c=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return n().length?(0,r.jsx)(r.Fragment,{children:n().map((function(e){return n=e,s?(0,r.jsx)("div",{children:(0,r.jsx)(a.rU,{className:"btn btn-link",to:"/user/".concat(n.id),children:c(n)})},n.id):(0,r.jsx)("div",{children:c(n)},n.id);var n}))}):null}},22102:function(e,s,n){var a=n(1413),t=n(45987),l=n(46123),r=n.n(l),c=n(47313),i=n(68524),o=n(46417),d=["bsPrefix","fluid","as","className"],u=c.forwardRef((function(e,s){var n=e.bsPrefix,l=e.fluid,c=void 0!==l&&l,u=e.as,m=void 0===u?"div":u,h=e.className,f=(0,t.Z)(e,d),x=(0,i.vE)(n,"container"),j="string"===typeof c?"-".concat(c):"-fluid";return(0,o.jsx)(m,(0,a.Z)((0,a.Z)({ref:s},f),{},{className:r()(h,c?"".concat(x).concat(j):x)}))}));u.displayName="Container",s.Z=u}}]);