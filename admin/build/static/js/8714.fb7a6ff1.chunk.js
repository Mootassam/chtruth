"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[8714],{4694:function(e,t,n){var s=n(76747),a=n(86495),r=n(26319),o=n(71945),l=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),i=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),c=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),d=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),u={selectPermissionToRead:l,selectPermissionToEdit:i,selectPermissionToCreate:c,selectPermissionToDestroy:(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),selectPermissionToImport:d};t.Z=u},31848:function(e,t,n){var s={selectLoading:(0,n(76747).P1)([function(e){return e.record.destroy}],(function(e){return Boolean(e.loading)}))};t.Z=s},90462:function(e,t,n){var s=n(76747),a=n(86495),r=n(26319),o=n(71945),l=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),i=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),c=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),d=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),u={selectPermissionToRead:l,selectPermissionToEdit:i,selectPermissionToCreate:c,selectPermissionToDestroy:(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),selectPermissionToImport:d};t.Z=u},15021:function(e,t,n){var s=n(76747),a=n(86495),r=n(26319),o=n(71945),l=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.userRead)})),i=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.userEdit)})),c=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.userDestroy)})),d={selectPermissionToRead:l,selectPermissionToEdit:i,selectPermissionToCreate:(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.userCreate)})),selectPermissionToImport:(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.userImport)})),selectPermissionToDestroy:c};t.Z=d},80197:function(e,t,n){var s=n(76747),a=n(86495),r=n(26319),o=n(71945),l=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),i=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),c=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),d=(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),u={selectPermissionToRead:l,selectPermissionToEdit:i,selectPermissionToCreate:c,selectPermissionToDestroy:(0,s.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,t){return new r.Z(e,t).match(o.Z.values.categoryRead)})),selectPermissionToImport:d};t.Z=u},43968:function(e,t,n){n.d(t,{Z:function(){return N}});var s=n(1413),a=n(70885),r=n(47313),o=n(43270),l=n(10499),i=n(89994),c=n(95748),d=n(68160),u=n(3463),m=n(67357),h=n(47575),f=n(21538),x=n(85543),Z=n(96111),v=n(98278),b=n(49384),p=n(46417);function g(e){var t=e.label,n=e.name,s=e.hint,a=e.required,r=e.externalErrorMessage,l=(0,o.Gc)(),i=l.register,c=l.errors,d=l.formState,u=d.touched,m=d.isSubmitted,h=b.Z.errorMessage(n,c,u,m,r);return(0,p.jsxs)("div",{className:"form-group",children:[Boolean(t)&&(0,p.jsx)("label",{className:"col-form-label ".concat(a?"required":null),htmlFor:n,children:t}),(0,p.jsxs)("div",{className:"adherent-control adherent-switch",children:[(0,p.jsx)("input",{type:"checkbox",className:"adherent-control-input",id:n,name:n,ref:i,onChange:function(t){e.onChange&&e.onChange(t.target.checked)},onBlur:function(t){e.onBlur&&e.onBlur(t)}}),(0,p.jsx)("label",{className:"adherent-control-label",htmlFor:n,children:"\xa0"})]}),(0,p.jsx)("div",{className:"invalid-feedback",children:h}),Boolean(s)&&(0,p.jsx)("small",{className:"form-text text-muted",children:s})]})}g.defaultProps={};var j=g,y=u.Ry().shape({vip:i.Z.relationToOne((0,l.ag)("entities.product.fields.vip"),{required:!0}),title:i.Z.string((0,l.ag)("entities.product.fields.title"),{required:!0}),amount:i.Z.integer((0,l.ag)("entities.product.fields.amount"),{required:!0}),commission:i.Z.string((0,l.ag)("entities.product.fields.commission"),{required:!0}),photo:i.Z.images((0,l.ag)("entities.product.fields.photo"),{})});var N=function(e){var t=(0,r.useState)((function(){var t=e.record||{};return{title:t.title,amount:t.amount,commission:t.commission,vip:t.vip||[],photo:t.photo,combo:t.combo}})),n=(0,a.Z)(t,1)[0],i=(0,o.cI)({resolver:(0,m.X)(y),mode:"all",defaultValues:n}),u=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,p.jsx)(d.Z,{children:(0,p.jsx)(o.RV,(0,s.Z)((0,s.Z)({},i),{},{children:(0,p.jsxs)("form",{onSubmit:i.handleSubmit(u),children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(v.Z,{name:"vip",label:(0,l.ag)("entities.product.fields.vip"),required:!0,showCreate:!e.modal})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(h.Z,{name:"title",label:(0,l.ag)("entities.product.fields.title"),required:!0,autoFocus:!0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(f.Z,{name:"amount",label:(0,l.ag)("entities.product.fields.amount"),required:!0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(f.Z,{name:"commission",label:(0,l.ag)("entities.product.fields.commission"),required:!0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(x.Z,{name:"photo",label:(0,l.ag)("entities.paymentsettings.fields.photo"),required:!1,storage:Z.Z.values.categoryPhoto,max:void 0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(j,{name:"combo",label:(0,l.ag)("entities.product.fields.combo")})})]}),(0,p.jsxs)("div",{className:"form-buttons",children:[(0,p.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:i.handleSubmit(u),children:[(0,p.jsx)(c.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,l.ag)("common.save")]}),(0,p.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){i.setValue(e,n[e])}))},children:[(0,p.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,l.ag)("common.reset")]}),e.onCancel?(0,p.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,p.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,l.ag)("common.cancel")]}):null]})]})}))})}},98714:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae}});var s=n(47313),a=n(10499),r=n(1413),o=n(70885),l=n(78940),i=n(78589),c=n(45788),d=n(43270),u=n(47590),m=n(95748),h=n(69138),f=n(3463),x=n(67357),Z=n(13586),v=n(40846),b=n(5544),p=n(18245),g=n(68031),j=n(42982),y=n(54013),N=n(74165),C=n(15861),w=n(1168),T=n(33512),P=n(43968),S=n(46417);var k=function(e){var t=(0,s.useRef)(),n=(0,s.useState)(!1),r=(0,o.Z)(n,2),l=r[0],i=r[1];(0,s.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var c=function(){var n=(0,C.Z)((0,N.Z)().mark((function n(s,a){var r,o,l;return(0,N.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(!0),n.next=4,y.Z.create(a);case 4:return r=n.sent,o=r.id,n.next=8,y.Z.find(o);case 8:l=n.sent,window.$(t.current).modal("hide"),e.onSuccess(l),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),T.Z.handle(n.t0);case 16:return n.prev=16,i(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return w.createPortal((0,S.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,S.jsx)("div",{className:"modal-dialog modal-lg",children:(0,S.jsxs)("div",{className:"modal-content",children:[(0,S.jsxs)("div",{className:"modal-header",children:[(0,S.jsx)("h5",{className:"modal-title",children:(0,a.ag)("entities.product.new.title")}),(0,S.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,S.jsx)("span",{children:"\xd7"})})]}),(0,S.jsx)("div",{className:"modal-body",children:(0,S.jsx)(P.Z,{saveLoading:l,onSubmit:c,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},R=n(49513),U=n(4694);var E=function(e){var t=(0,d.Gc)(),n=t.setValue,a=t.getValues,l=(0,s.useState)(!1),i=(0,o.Z)(l,2),u=i[0],m=i[1],h=(0,c.v9)(U.Z.selectPermissionToCreate),f=function(){m(!1)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(R.Z,(0,r.Z)((0,r.Z)({},e),{},{fetchFn:function(e,t){return y.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.id&&(n=e.label),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:h})),u&&(0,S.jsx)(k,{onClose:f,onSuccess:function(t){var s=e.name,r=e.mode;n(s,r&&"multiple"===r?[].concat((0,j.Z)(a()[s]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),f()}})]})},L=n(21538),V=f.Ry().shape({user:u.Z.relationToOne((0,a.ag)("entities.record.fields.user")),product:u.Z.relationToOne((0,a.ag)("entities.record.fields.product")),number:u.Z.decimal((0,a.ag)("entities.record.fields.number")),status:u.Z.enumerator((0,a.ag)("entities.record.fields.status"))}),I={user:null,product:null,number:null,status:null},q={user:{label:(0,a.ag)("entities.record.fields.user"),render:v.Z.relationToOne()},product:{label:(0,a.ag)("entities.record.fields.product"),render:v.Z.relationToOne()},number:{label:(0,a.ag)("entities.record.fields.number"),render:v.Z.decimal()},status:{label:(0,a.ag)("entities.record.fields.status"),render:v.Z.enumerator("entities.record.enumerators.status")}};var A=function(e){var t=(0,c.v9)(i.Z.selectRawFilter),n=(0,c.I0)(),u=(0,s.useState)(!1),f=(0,o.Z)(u,2),v=f[0],j=f[1],y=(0,s.useState)((function(){return(0,r.Z)((0,r.Z)({},I),t)})),N=(0,o.Z)(y,1)[0],C=(0,d.cI)({resolver:(0,x.X)(V),defaultValues:N,mode:"all"});(0,s.useEffect)((function(){n(l.Z.doFetch(V.cast(N),t))}),[n]);var w=function(e){var t=C.getValues();n(l.Z.doFetch(e,t)),j(!1)};return(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(Z.Z,{onClick:function(){j(!v)},renders:q,values:t,expanded:v,onRemove:function(e){return C.setValue(e,I[e]),C.handleSubmit(w)()}}),(0,S.jsx)("div",{className:"container",children:(0,S.jsx)("div",{className:"collapse ".concat(v?"show":""),children:(0,S.jsx)(d.RV,(0,r.Z)((0,r.Z)({},C),{},{children:(0,S.jsxs)("form",{onSubmit:C.handleSubmit(w),children:[(0,S.jsxs)("div",{className:"row",children:[(0,S.jsx)("div",{className:"col-lg-6 col-12",children:(0,S.jsx)(g.Z,{name:"user",label:(0,a.ag)("entities.record.fields.user")})}),(0,S.jsx)("div",{className:"col-lg-6 col-12",children:(0,S.jsx)(E,{name:"product",label:(0,a.ag)("entities.record.fields.product")})}),(0,S.jsx)("div",{className:"col-lg-6 col-12",children:(0,S.jsx)(L.Z,{name:"number",label:(0,a.ag)("entities.record.fields.number")})}),(0,S.jsx)("div",{className:"col-lg-6 col-12",children:(0,S.jsx)(b.Z,{name:"status",label:(0,a.ag)("entities.record.fields.status"),options:p.Z.status.map((function(e){return{value:e,label:(0,a.ag)("entities.record.enumerators.status.".concat(e))}}))})})]}),(0,S.jsx)("div",{className:"row",children:(0,S.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,S.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,S.jsx)(m.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,a.ag)("common.search")]}),(0,S.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(I).forEach((function(e){C.setValue(e,I[e])})),n(l.Z.doReset()),j(!1)},disabled:e.loading,children:[(0,S.jsx)(m.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,a.ag)("common.reset")]})]})})]})}))})})]})},F=n(28303),$=n(90462),D=n(65187),O=n(31848),B=n(98848),M=n(44587),_=n(61567),G=n(27216),X=n(97249),H=(n(63667),n(1296));var K=function(e){var t=(0,s.useState)(null),n=(0,o.Z)(t,2),r=n[0],d=n[1],u=(0,c.I0)(),m=(0,c.v9)(i.Z.selectLoading),h=(0,c.v9)(O.Z.selectLoading),f=m||h,x=(0,c.v9)(i.Z.selectRows),Z=(0,c.v9)(i.Z.selectPagination),v=(0,c.v9)(i.Z.selectSelectedKeys),b=(0,c.v9)(i.Z.selectHasRows),p=(0,c.v9)(i.Z.selectSorter),g=(0,c.v9)(i.Z.selectIsAllSelected),j=(0,c.v9)($.Z.selectPermissionToEdit),y=(0,c.v9)($.Z.selectPermissionToDestroy),N=function(){d(null)},C=function(e){var t=p.field===e&&"ascend"===p.order?"descend":"ascend";u(l.Z.doChangeSort({field:e,order:t}))},w=function(e){switch(e){case"pending":return"pending";case"canceled":return"canceled";default:return"completed"}};return(0,S.jsxs)(G.Z,{children:[(0,S.jsx)("div",{className:"table-responsive",children:(0,S.jsxs)("table",{className:"table table-striped     mt-2",children:[(0,S.jsx)("thead",{className:"thead",children:(0,S.jsxs)("tr",{children:[(0,S.jsx)(B.Z,{className:"th-checkbox",children:b&&(0,S.jsxs)("div",{className:"adherent-control adherent-checkbox",children:[(0,S.jsx)("input",{type:"checkbox",className:"adherent-control-input",id:"table-header-checkbox",checked:Boolean(g),onChange:function(){u(l.Z.doToggleAllSelected())}}),(0,S.jsx)("label",{htmlFor:"table-header-checkbox",className:"adherent-control-label",children:"\xa0"})]})}),(0,S.jsx)(B.Z,{onSort:C,hasRows:b,sorter:p,name:"title",label:(0,a.ag)("entities.record.fields.user")}),(0,S.jsx)(B.Z,{onSort:C,hasRows:b,sorter:p,name:"type",label:(0,a.ag)("entities.record.fields.coins")}),(0,S.jsx)(B.Z,{onSort:C,hasRows:b,sorter:p,name:"type",label:(0,a.ag)("entities.record.fields.price")}),(0,S.jsx)(B.Z,{onSort:C,hasRows:b,sorter:p,name:"noOfTimes",label:(0,a.ag)("entities.record.fields.time"),align:"right"}),(0,S.jsx)(B.Z,{onSort:C,hasRows:b,sorter:p,name:"discount",label:(0,a.ag)("entities.record.fields.percent"),align:"right"}),(0,S.jsx)(B.Z,{onSort:C,hasRows:b,sorter:p,name:"discount",label:(0,a.ag)("entities.record.fields.amount"),align:"right"}),(0,S.jsx)(B.Z,{className:"th-actions"})]})}),(0,S.jsxs)("tbody",{children:[f&&(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:100,children:(0,S.jsx)(_.Z,{})})}),!f&&!b&&(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:100,children:(0,S.jsx)("div",{className:"d-flex justify-content-center",children:(0,a.ag)("table.noData")})})}),!f&&x.map((function(e){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{className:"th-checkbox",scope:"row",children:(0,S.jsxs)("div",{className:"adherent-control adherent-checkbox",children:[(0,S.jsx)("input",{type:"checkbox",className:"adherent-control-input",id:"table-header-checkbox-".concat(e.id),checked:v.includes(e.id),onChange:function(){return t=e.id,void u(l.Z.doToggleOneSelected(t));var t}}),(0,S.jsx)("label",{htmlFor:"table-header-checkbox-".concat(e.id),className:"adherent-control-label",children:"\xa0"})]})}),(0,S.jsx)("td",{style:{textAlign:"center"},children:(0,S.jsx)(H.Z,{value:e.user})}),(0,S.jsx)("td",{style:{textAlign:"center"},children:e.coin}),(0,S.jsxs)("td",{style:{textAlign:"center"},children:["$ ",e.price]}),(0,S.jsxs)("td",{style:{textAlign:"center"},children:[e.time,"s"]}),(0,S.jsxs)("td",{style:{textAlign:"center"},children:[e.profit,"%"]}),(0,S.jsx)("td",{style:{textAlign:"center"},children:(0,S.jsxs)("span",{className:w(e.status),children:[" ",e.amount]})}),(0,S.jsxs)("td",{className:"td-actions",children:[(0,S.jsx)(F.rU,{className:"btn btn-link",to:"/record/".concat(e.id),children:(0,a.ag)("common.view")}),j&&(0,S.jsx)(F.rU,{className:"btn btn-link",to:"/record/".concat(e.id,"/edit"),children:(0,a.ag)("common.edit")}),y&&(0,S.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return t=e.id,void d(t);var t},children:(0,a.ag)("common.destroy")})]})]},e.id)}))]})]})}),(0,S.jsx)(X.Z,{onChange:function(e){u(l.Z.doChangePagination(e))},disabled:f,pagination:Z}),r&&(0,S.jsx)(M.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return e=r,N(),void u(D.Z.doDestroy(e));var e},onClose:function(){return N()},okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},Y=n(23516),z=n(10419),J=n(28745);var Q=function(e){var t=(0,s.useState)(!1),n=(0,o.Z)(t,2),r=n[0],d=n[1],u=(0,c.I0)(),h=(0,c.v9)(i.Z.selectSelectedKeys),f=(0,c.v9)(i.Z.selectLoading),x=(0,c.v9)(O.Z.selectLoading),Z=(0,c.v9)(i.Z.selectExportLoading),v=(0,c.v9)(i.Z.selectHasRows),b=(0,c.v9)(Y.Z.selectPermissionToRead),p=(0,c.v9)($.Z.selectPermissionToDestroy),g=(0,c.v9)($.Z.selectPermissionToCreate),j=(0,c.v9)($.Z.selectPermissionToImport),y=function(){d(!0)},N=function(){d(!1)},C=function(){u(l.Z.doExport())};return(0,S.jsxs)(z.Z,{children:[g&&(0,S.jsx)(F.rU,{to:"/record/new",children:(0,S.jsxs)("span",{"data-tip":(0,a.ag)("common.new"),"data-for":"charge-list-toolbar-new-tooltip",children:[(0,S.jsx)("button",{className:"btn btn-primary",type:"button",children:(0,S.jsx)(m.Z,{iconClass:"fas fa-plus"})}),(0,S.jsx)(J.Z,{id:"charge-list-toolbar-new-tooltip"})]})}),j&&(0,S.jsx)(F.rU,{to:"/record/importer",children:(0,S.jsxs)("span",{"data-tip":(0,a.ag)("common.import"),"data-for":"charge-list-toolbar-import-tooltip",children:[(0,S.jsx)("button",{className:"btn btn-primary",type:"button",children:(0,S.jsx)(m.Z,{iconClass:"fas fa-upload"})}),(0,S.jsx)(J.Z,{id:"charge-list-toolbar-import-tooltip"})]})}),function(){if(!p)return null;var e=!h.length||f,t=(0,S.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:y,children:(0,S.jsx)(m.Z,{loading:x,iconClass:"far fa-trash-alt"})});return e?(0,S.jsxs)("span",{"data-tip":(0,a.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[t,(0,S.jsx)(J.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):t}(),b&&(0,S.jsx)(F.rU,{to:"/audit-logs?entityNames=coupons",children:(0,S.jsxs)("span",{"data-tip":(0,a.ag)("auditLog.menu"),"data-for":"charge-list-toolbar-auditLog-tooltip",children:[(0,S.jsx)("button",{className:"btnCircle btn-light",type:"button",children:(0,S.jsx)(m.Z,{iconClass:"fas fa-history"})}),(0,S.jsx)(J.Z,{id:"charge-list-toolbar-auditLog-tooltip"})]})}),function(){var e=!v||f,t=(0,S.jsxs)("span",{"data-tip":(0,a.ag)("common.export"),"data-for":"charge-list-toolbar-export",children:[(0,S.jsx)("button",{className:"btnCircle btn-light",disabled:e,onClick:C,type:"button",children:(0,S.jsx)(m.Z,{loading:Z,iconClass:"far fa-file-excel"})}),(0,S.jsx)(J.Z,{id:"charge-list-toolbar-export"})]});return e?(0,S.jsxs)("span",{"data-tip":(0,a.ag)("common.noDataToExport"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-export-tooltip",children:[t,(0,S.jsx)(J.Z,{id:"coupons-list-toolbar-export-tooltip"})]}):t}(),r&&(0,S.jsx)(M.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return N(),void u(D.Z.doDestroyAll(h))},onClose:function(){return N()},okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},W=n(27829),ee=n(75352),te=n(22102),ne=n(63849),se=n(31616);var ae=function(e){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(W.Z,{children:[(0,S.jsx)(te.Z,{fluid:!0,children:(0,S.jsxs)(ne.Z,{children:[(0,S.jsx)(se.Z,{xs:9,children:(0,S.jsx)(ee.Z,{children:(0,a.ag)("entities.record.list.title")})}),(0,S.jsx)(se.Z,{md:"auto",children:(0,S.jsx)(Q,{})})]})}),(0,S.jsx)(A,{}),(0,S.jsx)(K,{})]})})}},44587:function(e,t,n){var s=n(47313),a=n(1168),r=n(46417);t.Z=function(e){var t=(0,s.useRef)();(0,s.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);return a.createPortal((0,r.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,r.jsx)("div",{className:"modal-dialog modal-sm",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:e.title}),(0,r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,r.jsx)("span",{children:"\xd7"})})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",children:e.cancelText}),(0,r.jsx)("button",{type:"button",onClick:function(){return window.$(t.current).modal("hide"),e.onConfirm()},className:"btn btn-primary btn-sm",children:e.okText})]})]})})}),document.getElementById("modal-root"))}},27216:function(e,t,n){var s,a=n(30168),r=n(38269).ZP.div(s||(s=(0,a.Z)(["\n  .table td {\n    white-space: nowrap;\n    border-collapse: collapse;\n  }\n  .itemType {\n    cursor:pointer;\n    background-color: #009efb;\n    padding: 0.5rem 1rem;\n    border-radius: 0.5rem;\n\n    \n  }\n  .itemType  span { \n   \n    color :#fff;\n\n  }\n  .p_items {\n  padding 0.3rem 1rem ;\n  cursor : pointer ;\n  }\n\n  .table td,\n  .table th {\n    vertical-align: middle;\n  }\n\n  .table .th-checkbox {\n    width: 50px;\n    vertical-align: middle;\n    text-align: center;\n  }\n\n  .table .th-actions,\n  .table .td-actions {\n    width: 230px;\n    vertical-align: middle;\n    text-align: right;\n  }\n\n  .table .th-actions-sm,\n  .table .td-actions-sm {\n    width: 100px;\n    vertical-align: middle;\n    text-align: right;\n  }\n\n  .table .td-actions a {\n    margin-right: 8px;\n  }\n"])));t.Z=r},98848:function(e,t,n){var s,a=n(30168),r=(n(47313),n(38269)),o=n(46417),l=r.ZP.th(s||(s=(0,a.Z)(["\n  cursor: pointer;\n  opacity: 1;\n  transition: opacity 0.15s ease-in;\n\n  &:hover,\n  &:focus {\n    opacity: 0.5;\n    transition: opacity 0.15s ease-in;\n  }\n\n  &:active {\n    opacity: 0.8;\n    transition: opacity 0.15s ease-out;\n  }\n"])));t.Z=function(e){var t=e.sorter,n=e.onSort,s=e.name,a=e.label,r=e.hasRows,i=e.children,c=e.align,d=void 0===c?"left":c;return r&&n?(0,o.jsx)(l,{onClick:function(){return n(s)},className:"".concat(e.className||""," sortable"),scope:"col",children:(0,o.jsxs)("div",{className:"table__th",children:[i||a||"",t.field===s&&"descend"===t.order&&(0,o.jsx)("i",{className:"ml-2 fas fa-sort-up"}),t.field===s&&"ascend"===t.order&&(0,o.jsx)("i",{className:"ml-2 fas fa-sort-down"})]})}):(0,o.jsx)("th",{className:e.className||"",style:{textAlign:d},scope:"col",children:i||a||""})}},68031:function(e,t,n){n.d(t,{Z:function(){return g}});var s=n(1413),a=n(42982),r=n(70885),o=n(47313),l=n(74773),i=n(74165),c=n(15861),d=n(1168),u=n(10499),m=n(89333),h=n(33512),f=n(46417);var x=function(e){var t=(0,o.useRef)(),n=(0,o.useState)(!1),s=(0,r.Z)(n,2),a=s[0],x=s[1];(0,o.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var Z=function(){var n=(0,c.Z)((0,i.Z)().mark((function n(s,a){var r,o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,x(!0),n.next=4,l.Z.create(a);case 4:return n.next=6,l.Z.fetchUsers({email:a.emails[0]},null,1,0);case 6:r=n.sent,o=r.rows,window.$(t.current).modal("hide"),e.onSuccess(o[0]),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),h.Z.handle(n.t0);case 15:return n.prev=15,x(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e,t){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("user.new.titleModal")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(m.Z,{saveLoading:a,onSubmit:Z,onCancel:function(){window.$(t.current).modal("hide")},modal:!0,single:!0})})]})})}),document.getElementById("modal-root"))},Z=n(49513),v=n(43270),b=n(45788),p=n(15021);var g=function(e){var t=(0,v.Gc)(),n=t.setValue,i=t.getValues,c=(0,o.useState)(!1),d=(0,r.Z)(c,2),u=d[0],m=d[1],h=(0,b.v9)(p.Z.selectPermissionToCreate);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{fetchFn:function(e,t){return l.Z.fetchUserAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;if(e.fullName||e.email){var t=e.email;return e.fullName&&(t="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:t}}return{value:e.id,label:e.label}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){return m(!0)},hasPermissionToCreate:h})),u&&(0,f.jsx)(x,{visible:u,onClose:function(){return m(!1)},onSuccess:function(t){var s=e.name,r=e.mode;n(s,r&&"multiple"===r?[].concat((0,a.Z)(i()[s]||[]),[t]):t),m(!1)}})]})}},1296:function(e,t,n){n(47313);var s=n(28303),a=n(45788),r=n(15021),o=n(46417);t.Z=function(e){var t=(0,a.v9)(r.Z.selectPermissionToRead),n=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},l=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return n().length?(0,o.jsx)(o.Fragment,{children:n().map((function(e){return n=e,t?(0,o.jsx)("div",{children:(0,o.jsx)(s.rU,{className:"btn btn-link",to:"/user/".concat(n.id),children:l(n)})},n.id):(0,o.jsx)("div",{children:l(n)},n.id);var n}))}):null}},98278:function(e,t,n){n.d(t,{Z:function(){return R}});var s=n(1413),a=n(42982),r=n(70885),o=n(47313),l=n(96988),i=n(74165),c=n(15861),d=n(1168),u=n(10499),m=n(33512),h=n(43270),f=n(89994),x=n(95748),Z=n(68160),v=n(3463),b=n(67357),p=n(47575),g=n(21538),j=n(85543),y=n(96111),N=n(46417),C=v.Ry().shape({title:f.Z.string((0,u.ag)("entities.vip.fields.title"),{required:!0}),photo:f.Z.images((0,u.ag)("entities.vip.fields.photo"),{}),entrylimit:f.Z.string((0,u.ag)("entities.vip.fields.entrylimit"),{}),levellimit:f.Z.decimal((0,u.ag)("entities.vip.fields.levelLimit"),{required:!0}),dailyorder:f.Z.integer((0,u.ag)("entities.vip.fields.dailyorder"),{required:!0}),comisionrate:f.Z.decimal((0,u.ag)("entities.vip.fields.comisionrate"),{required:!0})});var w=function(e){var t=(0,o.useState)((function(){var t=e.record||{};return{title:t.title,photo:t.photo||[],entrylimit:t.entrylimit,levellimit:t.levellimit,dailyorder:t.dailyorder,comisionrate:t.comisionrate}})),n=(0,r.Z)(t,1)[0],a=(0,h.cI)({resolver:(0,b.X)(C),mode:"all",defaultValues:n}),l=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,N.jsx)(Z.Z,{children:(0,N.jsx)(h.RV,(0,s.Z)((0,s.Z)({},a),{},{children:(0,N.jsxs)("form",{onSubmit:a.handleSubmit(l),children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,N.jsx)(p.Z,{name:"title",label:(0,u.ag)("entities.vip.fields.title"),required:!0,autoFocus:!0})}),(0,N.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,N.jsx)(j.Z,{name:"photo",label:(0,u.ag)("entities.paymentsettings.fields.photo"),required:!1,storage:y.Z.values.categoryPhoto,max:void 0})}),(0,N.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,N.jsx)(g.Z,{name:"dailyorder",label:(0,u.ag)("entities.vip.fields.dailyorder"),required:!0})}),(0,N.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,N.jsx)(g.Z,{name:"comisionrate",label:(0,u.ag)("entities.vip.fields.commissionrate"),required:!0})}),(0,N.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,N.jsx)(p.Z,{name:"levellimit",label:(0,u.ag)("entities.vip.fields.levelLimit"),required:!0,autoFocus:!0})})]}),(0,N.jsxs)("div",{className:"form-buttons",children:[(0,N.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:a.handleSubmit(l),children:[(0,N.jsx)(x.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,u.ag)("common.save")]}),(0,N.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){a.setValue(e,n[e])}))},children:[(0,N.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,u.ag)("common.reset")]}),e.onCancel?(0,N.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,N.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,u.ag)("common.cancel")]}):null]})]})}))})};var T=function(e){var t=(0,o.useRef)(),n=(0,o.useState)(!1),s=(0,r.Z)(n,2),a=s[0],h=s[1];(0,o.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var f=function(){var n=(0,c.Z)((0,i.Z)().mark((function n(s,a){var r,o,c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,l.Z.create(a);case 4:return r=n.sent,o=r.id,n.next=8,l.Z.find(o);case 8:c=n.sent,window.$(t.current).modal("hide"),e.onSuccess(c),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),m.Z.handle(n.t0);case 16:return n.prev=16,h(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return d.createPortal((0,N.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,N.jsx)("div",{className:"modal-dialog modal-lg",children:(0,N.jsxs)("div",{className:"modal-content",children:[(0,N.jsxs)("div",{className:"modal-header",children:[(0,N.jsx)("h5",{className:"modal-title",children:(0,u.ag)("entities.vip.new.title")}),(0,N.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,N.jsx)("span",{children:"\xd7"})})]}),(0,N.jsx)("div",{className:"modal-body",children:(0,N.jsx)(w,{saveLoading:a,onSubmit:f,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},P=n(49513),S=n(45788),k=n(80197);var R=function(e){var t=(0,h.Gc)(),n=t.setValue,i=t.getValues,c=(0,o.useState)(!1),d=(0,r.Z)(c,2),u=d[0],m=d[1],f=(0,S.v9)(k.Z.selectPermissionToCreate),x=function(){m(!1)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(P.Z,(0,s.Z)((0,s.Z)({},e),{},{fetchFn:function(e,t){return l.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.id&&(n=e.label),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:f})),u&&(0,N.jsx)(T,{onClose:x,onSuccess:function(t){var s=e.name,r=e.mode;n(s,r&&"multiple"===r?[].concat((0,a.Z)(i()[s]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),x()}})]})}},22102:function(e,t,n){var s=n(1413),a=n(45987),r=n(46123),o=n.n(r),l=n(47313),i=n(68524),c=n(46417),d=["bsPrefix","fluid","as","className"],u=l.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,l=void 0!==r&&r,u=e.as,m=void 0===u?"div":u,h=e.className,f=(0,a.Z)(e,d),x=(0,i.vE)(n,"container"),Z="string"===typeof l?"-".concat(l):"-fluid";return(0,c.jsx)(m,(0,s.Z)((0,s.Z)({ref:t},f),{},{className:o()(h,l?"".concat(x).concat(Z):x)}))}));u.displayName="Container",t.Z=u}}]);