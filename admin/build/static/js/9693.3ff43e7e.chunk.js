"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[9693],{5208:function(e,n,t){function s(e){if(!e)return"-";try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(n){return console.error("Invalid date format:",e,n),"-"}}t.d(n,{p:function(){return s}})},44587:function(e,n,t){var s=t(47313),a=t(1168),r=t(46417);n.Z=function(e){var n=(0,s.useRef)();(0,s.useEffect)((function(){window.$(n.current).modal("show"),window.$(n.current).on("hidden.bs.modal",e.onClose)}),[]);return a.createPortal((0,r.jsx)("div",{ref:n,className:"modal",tabIndex:-1,children:(0,r.jsx)("div",{className:"modal-dialog modal-sm",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:e.title}),(0,r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,r.jsx)("span",{children:"\xd7"})})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",children:e.cancelText}),(0,r.jsx)("button",{type:"button",onClick:function(){return window.$(n.current).modal("hide"),e.onConfirm()},className:"btn btn-primary btn-sm",children:e.okText})]})]})})}),document.getElementById("modal-root"))}},1296:function(e,n,t){t(47313);var s=t(28303),a=t(45788),r=t(15021),c=t(46417);n.Z=function(e){var n=(0,a.v9)(r.Z.selectPermissionToRead),t=function(){var n=e.value;return n?Array.isArray(n)?n:[n]:[]},l=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return t().length?(0,c.jsx)(c.Fragment,{children:t().map((function(e){return t=e,n?(0,c.jsx)("div",{children:(0,c.jsx)(s.rU,{className:"btn btn-link",to:"/user/".concat(t.id),children:l(t)})},t.id):(0,c.jsx)("div",{children:l(t)},t.id);var t}))}):null}},39693:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var s=t(47313),a=t(10499),r=t(27829),c=t(75352),l=t(22102),i=t(63849),o=t(31616),d=t(70885),u=t(23516),h=t(76747),m=t(86495),f=t(26319),x=t(71945),j=(0,h.P1)([m.Z.selectCurrentTenant,m.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),Z=(0,h.P1)([m.Z.selectCurrentTenant,m.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),v=(0,h.P1)([m.Z.selectCurrentTenant,m.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),p=(0,h.P1)([m.Z.selectCurrentTenant,m.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),b={selectPermissionToRead:j,selectPermissionToEdit:Z,selectPermissionToCreate:v,selectPermissionToDestroy:(0,h.P1)([m.Z.selectCurrentTenant,m.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),selectPermissionToImport:p},N=t(74165),g=t(15861),w=t(4233),S=t(63703),R=t(33512),y=t(40476),C=t(14122),T="COUPONS_DESTROY",E={DESTROY_STARTED:"".concat(T,"_DESTROY_STARTED"),DESTROY_SUCCESS:"".concat(T,"_DESTROY_SUCCESS"),DESTROY_ERROR:"".concat(T,"_DESTROY_ERROR"),DESTROY_ALL_STARTED:"".concat(T,"_DESTROY_ALL_STARTED"),DESTROY_ALL_SUCCESS:"".concat(T,"_DESTROY_ALL_SUCCESS"),DESTROY_ALL_ERROR:"".concat(T,"_DESTROY_ALL_ERROR"),doDestroy:function(e){return function(){var n=(0,g.Z)((0,N.Z)().mark((function n(t){return(0,N.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:E.DESTROY_STARTED}),n.next=4,S.Z.destroyAll([e]);case 4:t({type:E.DESTROY_SUCCESS}),C.Z.success((0,a.ag)("entities.vip.destroy.success")),t(w.Z.doFetchCurrentFilter()),(0,y.s1)().push("/withdraw"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),R.Z.handle(n.t0),t(w.Z.doFetchCurrentFilter()),t({type:E.DESTROY_ERROR});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},doDestroyAll:function(e){return function(){var n=(0,g.Z)((0,N.Z)().mark((function n(t){return(0,N.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:E.DESTROY_ALL_STARTED}),n.next=4,S.Z.destroyAll(e);case 4:t({type:E.DESTROY_ALL_SUCCESS}),w.Z&&(t(w.Z.doClearAllSelected()),t(w.Z.doFetchCurrentFilter())),C.Z.success((0,a.ag)("entities.vip.destroyAll.success")),(0,y.s1)().push("/withdraw"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),R.Z.handle(n.t0),t(w.Z.doFetchCurrentFilter()),t({type:E.DESTROY_ALL_ERROR});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}},A=E,_={selectLoading:(0,h.P1)([function(e){return e.vip.destroy}],(function(e){return Boolean(e.loading)}))},k=t(22043),D=t(45788),O=t(44587),L=t(95748),P=t(10419),Y=t(28745),U=t(46417);var F=function(e){var n=(0,s.useState)(!1),t=(0,d.Z)(n,2),r=t[0],c=t[1],l=(0,D.I0)(),i=(0,D.v9)(k.Z.selectSelectedKeys),o=(0,D.v9)(k.Z.selectLoading),h=(0,D.v9)(_.selectLoading),m=((0,D.v9)(k.Z.selectExportLoading),(0,D.v9)(k.Z.selectHasRows),(0,D.v9)(u.Z.selectPermissionToRead),(0,D.v9)(b.selectPermissionToDestroy)),f=((0,D.v9)(b.selectPermissionToCreate),(0,D.v9)(b.selectPermissionToImport),function(){c(!0)}),x=function(){c(!1)};return(0,U.jsxs)(P.Z,{children:[function(){if(!m)return null;var e=!i.length||o,n=(0,U.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:f,children:(0,U.jsx)(L.Z,{loading:h,iconClass:"far fa-trash-alt"})});return e?(0,U.jsxs)("span",{"data-tip":(0,a.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[n,(0,U.jsx)(Y.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):n}(),r&&(0,U.jsx)(O.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return x(),void l(A.doDestroyAll(i))},onClose:function(){return x()},okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},I=t(1413),B=t(61567),V=t(97249),$=t(1296),H=t(40736),K=t(5208);var X=function(e){var n=(0,s.useState)(null),t=(0,d.Z)(n,2),r=t[0],c=t[1],l=(0,D.I0)(),i=(0,D.v9)(k.Z.selectLoading),o=(0,D.v9)(_.selectLoading),u=i||o,h=(0,D.v9)(k.Z.selectRows),m=(0,D.v9)(k.Z.selectPagination),f=(0,D.v9)(k.Z.selectSelectedKeys),x=(0,D.v9)(k.Z.selectHasRows),j=(0,D.v9)(k.Z.selectSorter),Z=(0,D.v9)(k.Z.selectIsAllSelected),v=((0,D.v9)(b.selectPermissionToEdit),(0,D.v9)(b.selectPermissionToDestroy),function(){return c(null)}),p=function(e,n){var t=(0,I.Z)((0,I.Z)({},e),{},{status:n});l(H.Z.Update(e.id,t))},N=function(e){var n=j.field===e&&"ascend"===j.order?"descend":"ascend";l(w.Z.doChangeSort({field:e,order:n}))};return(0,U.jsxs)("div",{className:"spot-list-container",children:[(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)("table",{className:"spot-list-table",children:[(0,U.jsx)("thead",{className:"table-header",children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"checkbox-column",children:x&&(0,U.jsx)("div",{className:"checkbox-wrapper",children:(0,U.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:Boolean(Z),onChange:function(){return l(w.Z.doToggleAllSelected())}})})}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("orderNo")},children:[(0,a.ag)("entities.withdraw.fields.orderNo"),"orderNo"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("createdBy")},children:[(0,a.ag)("entities.withdraw.fields.createdBy"),"createdBy"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("currency")},children:[(0,a.ag)("entities.withdraw.fields.currency"),"currency"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("withdrawAmount")},children:[(0,a.ag)("entities.withdraw.fields.withdrawAmount"),"withdrawAmount"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("fee")},children:[(0,a.ag)("entities.withdraw.fields.fee"),"fee"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("totalAmount")},children:[(0,a.ag)("entities.withdraw.fields.totalAmount"),"totalAmount"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{children:["  ",(0,a.ag)("entities.withdraw.fields.withdrawAddress")]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("auditor")},children:[(0,a.ag)("entities.withdraw.fields.auditor"),"auditor"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return N("acceptTime")},children:[(0,a.ag)("entities.withdraw.fields.acceptTime"),"acceptTime"===j.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===j.order?"\u2191":"\u2193"})]}),(0,U.jsx)("th",{className:"actions-header",children:"Actions"})]})}),(0,U.jsxs)("tbody",{className:"table-body",children:[u&&(0,U.jsx)("tr",{children:(0,U.jsx)("td",{colSpan:11,className:"loading-cell",children:(0,U.jsxs)("div",{className:"loading-container",children:[(0,U.jsx)(B.Z,{}),(0,U.jsx)("span",{className:"loading-text",children:"Loading data..."})]})})}),!u&&!x&&(0,U.jsx)("tr",{children:(0,U.jsx)("td",{colSpan:11,className:"no-data-cell",children:(0,U.jsxs)("div",{className:"no-data-content",children:[(0,U.jsx)("i",{className:"fas fa-database no-data-icon"}),(0,U.jsx)("p",{children:(0,a.ag)("table.noData")})]})})}),!u&&h.map((function(e,n){return(0,U.jsxs)("tr",{className:"table-row",children:[(0,U.jsx)("td",{className:"checkbox-column",children:(0,U.jsx)("div",{className:"checkbox-wrapper",children:(0,U.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:f.includes(e.id),onChange:function(){return n=e.id,l(w.Z.doToggleOneSelected(n));var n}})})}),(0,U.jsx)("td",{className:"table-cell",children:e.orderNo}),(0,U.jsx)("td",{className:"table-cell",children:(0,U.jsx)($.Z,{value:e.createdBy})}),(0,U.jsx)("td",{className:"table-cell",children:e.currency}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.withdrawAmount}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.fee}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.totalAmount}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.withdrawAdress}),(0,U.jsx)("td",{className:"table-cell",children:(0,U.jsx)($.Z,{value:e.auditor})}),(0,U.jsx)("td",{className:"table-cell",children:(0,K.p)(e.updatedAt)}),(0,U.jsx)("td",{className:"actions-cell",children:(0,U.jsx)("div",{className:"actions-container ",children:"pending"===e.status?(0,U.jsxs)("div",{className:"flex__table",children:[(0,U.jsx)("button",{className:"btn-action edit",onClick:function(){return p(e,"success")},children:"Pass"}),(0,U.jsx)("button",{className:"btn-action delete",onClick:function(){return p(e,"canceled")},children:"Rejection"})]}):(0,U.jsx)("span",{className:"status-badge ".concat("success"===e.status?"success":"canceled"),children:e.status})})})]},e.id)}))]})]})}),(0,U.jsx)("div",{className:"pagination-container",children:(0,U.jsx)(V.Z,{onChange:function(e){l(w.Z.doChangePagination(e))},disabled:u,pagination:m})}),r&&(0,U.jsx)(O.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return e=r,v(),void l(A.doDestroy(e));var e},onClose:v,okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},q=t(43270),z=t(47590),G=t(69138),J=t(3463),M=t(67357),Q=t(13586),W=t(40846),ee=t(68031),ne=J.Ry().shape({user:z.Z.relationToOne((0,a.ag)("entities.transaction.fields.user"))}),te={user:null,levellimit:null},se={user:{label:(0,a.ag)("entities.transaction.fields.user"),render:W.Z.relationToOne()}};var ae=function(e){var n=(0,D.v9)(k.Z.selectRawFilter),t=(0,D.I0)(),r=(0,s.useState)(!1),c=(0,d.Z)(r,2),l=c[0],i=c[1],o=(0,s.useState)((function(){return(0,I.Z)((0,I.Z)({},te),n)})),u=(0,d.Z)(o,1)[0],h=(0,q.cI)({resolver:(0,M.X)(ne),defaultValues:u,mode:"all"});(0,s.useEffect)((function(){t(w.Z.doFetch(ne.cast(u),n))}),[t]);var m=function(e){var n=h.getValues();t(w.Z.doFetch(e,n)),i(!1)};return(0,U.jsxs)(G.Z,{children:[(0,U.jsx)(Q.Z,{onClick:function(){i(!l)},renders:se,values:n,expanded:l,onRemove:function(e){return h.setValue(e,te[e]),h.handleSubmit(m)()}}),(0,U.jsx)("div",{className:"container",children:(0,U.jsx)("div",{className:"collapse ".concat(l?"show":""),children:(0,U.jsx)(q.RV,(0,I.Z)((0,I.Z)({},h),{},{children:(0,U.jsxs)("form",{onSubmit:h.handleSubmit(m),children:[(0,U.jsx)("div",{className:"row",children:(0,U.jsx)("div",{className:"col-lg-6 col-12",children:(0,U.jsx)(ee.Z,{name:"user",label:(0,a.ag)("entities.transaction.fields.user")})})}),(0,U.jsx)("div",{className:"row",children:(0,U.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,U.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,U.jsx)(L.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,a.ag)("common.search")]}),(0,U.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(te).forEach((function(e){h.setValue(e,te[e])})),t(w.Z.doReset()),i(!1)},disabled:e.loading,children:[(0,U.jsx)(L.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,a.ag)("common.reset")]})]})})]})}))})})]})};var re=function(e){return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(r.Z,{children:[(0,U.jsx)(l.Z,{fluid:!0,children:(0,U.jsxs)(i.Z,{children:[(0,U.jsx)(o.Z,{xs:9,children:(0,U.jsx)(c.Z,{children:(0,a.ag)("entities.withdraw.list.title")})}),(0,U.jsx)(o.Z,{md:"auto",children:(0,U.jsx)(F,{})})]})}),(0,U.jsx)(ae,{}),(0,U.jsx)(X,{})]})})}},22102:function(e,n,t){var s=t(1413),a=t(45987),r=t(46123),c=t.n(r),l=t(47313),i=t(68524),o=t(46417),d=["bsPrefix","fluid","as","className"],u=l.forwardRef((function(e,n){var t=e.bsPrefix,r=e.fluid,l=void 0!==r&&r,u=e.as,h=void 0===u?"div":u,m=e.className,f=(0,a.Z)(e,d),x=(0,i.vE)(t,"container"),j="string"===typeof l?"-".concat(l):"-fluid";return(0,o.jsx)(h,(0,s.Z)((0,s.Z)({ref:n},f),{},{className:c()(m,l?"".concat(x).concat(j):x)}))}));u.displayName="Container",n.Z=u}}]);