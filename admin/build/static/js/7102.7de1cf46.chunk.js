"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[7102],{47102:function(e,n,s){s.r(n),s.d(n,{default:function(){return re}});var t=s(47313),a=s(10499),c=s(27829),r=s(75352),i=s(22102),l=s(63849),o=s(31616),d=s(70885),u=s(23516),m=s(76747),h=s(86495),f=s(26319),x=s(71945),p=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),j=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),Z=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),v=(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),b={selectPermissionToRead:p,selectPermissionToEdit:j,selectPermissionToCreate:Z,selectPermissionToDestroy:(0,m.P1)([h.Z.selectCurrentTenant,h.Z.selectCurrentUser],(function(e,n){return new f.Z(e,n).match(x.Z.values.categoryRead)})),selectPermissionToImport:v},g=s(74165),N=s(15861),S=s(36784),R=s(37751),C=s(33512),y=s(72803),T=s(14122),E="COUPONS_DESTROY",k={DESTROY_STARTED:"".concat(E,"_DESTROY_STARTED"),DESTROY_SUCCESS:"".concat(E,"_DESTROY_SUCCESS"),DESTROY_ERROR:"".concat(E,"_DESTROY_ERROR"),DESTROY_ALL_STARTED:"".concat(E,"_DESTROY_ALL_STARTED"),DESTROY_ALL_SUCCESS:"".concat(E,"_DESTROY_ALL_SUCCESS"),DESTROY_ALL_ERROR:"".concat(E,"_DESTROY_ALL_ERROR"),doDestroy:function(e){return function(){var n=(0,N.Z)((0,g.Z)().mark((function n(s){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s({type:k.DESTROY_STARTED}),n.next=4,R.Z.destroyAll([e]);case 4:s({type:k.DESTROY_SUCCESS}),T.Z.success((0,a.ag)("entities.vip.destroy.success")),s(S.Z.doFetchCurrentFilter()),(0,y.s1)().push("/deposit"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),C.Z.handle(n.t0),s(S.Z.doFetchCurrentFilter()),s({type:k.DESTROY_ERROR});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},doDestroyAll:function(e){return function(){var n=(0,N.Z)((0,g.Z)().mark((function n(s){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s({type:k.DESTROY_ALL_STARTED}),n.next=4,R.Z.destroyAll(e);case 4:s({type:k.DESTROY_ALL_SUCCESS}),S.Z&&(s(S.Z.doClearAllSelected()),s(S.Z.doFetchCurrentFilter())),T.Z.success((0,a.ag)("entities.vip.destroyAll.success")),(0,y.s1)().push("/deposit"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),C.Z.handle(n.t0),s(S.Z.doFetchCurrentFilter()),s({type:k.DESTROY_ALL_ERROR});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}},_=k,D={selectLoading:(0,m.P1)([function(e){return e.vip.destroy}],(function(e){return Boolean(e.loading)}))},w=s(91717),O=s(45788),A=s(44587),L=s(95748),P=s(10419),Y=s(28745),U=s(46417);var F=function(e){var n=(0,t.useState)(!1),s=(0,d.Z)(n,2),c=s[0],r=s[1],i=(0,O.I0)(),l=(0,O.v9)(w.Z.selectSelectedKeys),o=(0,O.v9)(w.Z.selectLoading),m=(0,O.v9)(D.selectLoading),h=((0,O.v9)(w.Z.selectExportLoading),(0,O.v9)(w.Z.selectHasRows),(0,O.v9)(u.Z.selectPermissionToRead),(0,O.v9)(b.selectPermissionToDestroy)),f=((0,O.v9)(b.selectPermissionToCreate),(0,O.v9)(b.selectPermissionToImport),function(){r(!0)}),x=function(){r(!1)};return(0,U.jsxs)(P.Z,{children:[function(){if(!h)return null;var e=!l.length||o,n=(0,U.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:f,children:(0,U.jsx)(L.Z,{loading:m,iconClass:"far fa-trash-alt"})});return e?(0,U.jsxs)("span",{"data-tip":(0,a.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[n,(0,U.jsx)(Y.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):n}(),c&&(0,U.jsx)(A.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return x(),void i(_.doDestroyAll(l))},onClose:function(){return x()},okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},I=s(1413),B=s(61567),V=s(97249),$=s(1296),H=s(38388),K=s(5208);var X=function(e){var n=(0,t.useState)(null),s=(0,d.Z)(n,2),c=s[0],r=s[1],i=(0,O.I0)(),l=(0,O.v9)(w.Z.selectLoading),o=(0,O.v9)(D.selectLoading),u=l||o,m=(0,O.v9)(w.Z.selectRows),h=(0,O.v9)(w.Z.selectPagination),f=(0,O.v9)(w.Z.selectSelectedKeys),x=(0,O.v9)(w.Z.selectHasRows),p=(0,O.v9)(w.Z.selectSorter),j=(0,O.v9)(w.Z.selectIsAllSelected),Z=((0,O.v9)(b.selectPermissionToEdit),(0,O.v9)(b.selectPermissionToDestroy),function(){return r(null)}),v=function(e,n){var s=(0,I.Z)((0,I.Z)({},e),{},{status:n});i(H.Z.Update(e.id,s))},g=function(e){var n=p.field===e&&"ascend"===p.order?"descend":"ascend";i(S.Z.doChangeSort({field:e,order:n}))};return(0,U.jsxs)("div",{className:"spot-list-container",children:[(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)("table",{className:"spot-list-table",children:[(0,U.jsx)("thead",{className:"table-header",children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"checkbox-column",children:x&&(0,U.jsx)("div",{className:"checkbox-wrapper",children:(0,U.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:Boolean(j),onChange:function(){return i(S.Z.doToggleAllSelected())}})})}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("orderno")},children:[(0,a.ag)("entities.deposit.fields.orderno"),"orderno"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("createdBy")},children:[(0,a.ag)("entities.deposit.fields.createdBy"),"createdBy"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("amount")},children:[(0,a.ag)("entities.deposit.fields.amount"),"amount"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("rechargechannel")},children:[(0,a.ag)("entities.deposit.fields.rechargechannel"),"rechargechannel"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("txid")},children:[(0,a.ag)("entities.deposit.fields.txid"),"txid"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("rechargetime")},children:[(0,a.ag)("entities.deposit.fields.rechargetime"),"rechargetime"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("auditor")},children:[(0,a.ag)("entities.deposit.fields.auditor"),"auditor"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsxs)("th",{className:"sortable-header",onClick:function(){return g("acceptime")},children:[(0,a.ag)("entities.deposit.fields.acceptime"),"acceptime"===p.field&&(0,U.jsx)("span",{className:"sort-icon",children:"ascend"===p.order?"\u2191":"\u2193"})]}),(0,U.jsx)("th",{className:"actions-header",children:"Actions"})]})}),(0,U.jsxs)("tbody",{className:"table-body",children:[u&&(0,U.jsx)("tr",{children:(0,U.jsx)("td",{colSpan:12,className:"loading-cell",children:(0,U.jsxs)("div",{className:"loading-container",children:[(0,U.jsx)(B.Z,{}),(0,U.jsx)("span",{className:"loading-text",children:"Loading data..."})]})})}),!u&&!x&&(0,U.jsx)("tr",{children:(0,U.jsx)("td",{colSpan:12,className:"no-data-cell",children:(0,U.jsxs)("div",{className:"no-data-content",children:[(0,U.jsx)("i",{className:"fas fa-database no-data-icon"}),(0,U.jsx)("p",{children:(0,a.ag)("table.noData")})]})})}),!u&&m.map((function(e){return(0,U.jsxs)("tr",{className:"table-row",children:[(0,U.jsx)("td",{className:"checkbox-column",children:(0,U.jsx)("div",{className:"checkbox-wrapper",children:(0,U.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:f.includes(e.id),onChange:function(){return n=e.id,i(S.Z.doToggleOneSelected(n));var n}})})}),(0,U.jsx)("td",{className:"table-cell",children:e.orderno}),(0,U.jsx)("td",{className:"table-cell",children:(0,U.jsx)($.Z,{value:e.createdBy})}),(0,U.jsx)("td",{className:"table-cell numeric",children:e.amount}),(0,U.jsx)("td",{className:"table-cell",children:e.rechargechannel}),(0,U.jsx)("td",{className:"table-cell",children:e.txid}),(0,U.jsx)("td",{className:"table-cell",children:(0,K.p)(e.rechargetime)}),(0,U.jsx)("td",{className:"table-cell",children:(0,U.jsx)($.Z,{value:e.auditor})}),(0,U.jsx)("td",{className:"table-cell",children:(0,K.p)(e.acceptime)}),(0,U.jsx)("td",{className:"actions-cell",children:(0,U.jsx)("div",{className:"actions-container",children:"pending"===e.status?(0,U.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,U.jsx)("button",{className:"btn-action edit",onClick:function(){return v(e,"success")},children:"Pass"}),(0,U.jsx)("button",{className:"btn-action delete",onClick:function(){return v(e,"canceled")},children:"Rejection"})]}):(0,U.jsx)("span",{className:"status-badge ".concat("success"===e.status?"success":"canceled"),children:e.status})})})]},e.id)}))]})]})}),(0,U.jsx)("div",{className:"pagination-container",children:(0,U.jsx)(V.Z,{onChange:function(e){i(S.Z.doChangePagination(e))},disabled:u,pagination:h})}),c&&(0,U.jsx)(A.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return e=c,Z(),void i(_.doDestroy(e));var e},onClose:Z,okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},q=s(43270),z=s(47590),G=s(69138),J=s(6473),M=s(67357),Q=s(13586),W=s(40846),ee=s(47575),ne=s(68031),se=J.Ry().shape({user:z.Z.relationToOne((0,a.ag)("entities.transaction.fields.user")),idnumber:z.Z.decimal((0,a.ag)("entities.deposit.fields.idnumber"))}),te={user:null,levellimit:null},ae={user:{label:(0,a.ag)("entities.transaction.fields.user"),render:W.Z.relationToOne()},idnumer:{label:(0,a.ag)("entities.deposit.fields.idnumer"),render:W.Z.decimal()}};var ce=function(e){var n=(0,O.v9)(w.Z.selectRawFilter),s=(0,O.I0)(),c=(0,t.useState)(!1),r=(0,d.Z)(c,2),i=r[0],l=r[1],o=(0,t.useState)((function(){return(0,I.Z)((0,I.Z)({},te),n)})),u=(0,d.Z)(o,1)[0],m=(0,q.cI)({resolver:(0,M.X)(se),defaultValues:u,mode:"all"});(0,t.useEffect)((function(){s(S.Z.doFetch(se.cast(u),n))}),[s]);var h=function(e){var n=m.getValues();s(S.Z.doFetch(e,n)),l(!1)};return(0,U.jsxs)(G.Z,{children:[(0,U.jsx)(Q.Z,{onClick:function(){l(!i)},renders:ae,values:n,expanded:i,onRemove:function(e){return m.setValue(e,te[e]),m.handleSubmit(h)()}}),(0,U.jsx)("div",{className:"container",children:(0,U.jsx)("div",{className:"collapse ".concat(i?"show":""),children:(0,U.jsx)(q.RV,(0,I.Z)((0,I.Z)({},m),{},{children:(0,U.jsxs)("form",{onSubmit:m.handleSubmit(h),children:[(0,U.jsxs)("div",{className:"row",children:[(0,U.jsx)("div",{className:"col-lg-6 col-12",children:(0,U.jsx)(ne.Z,{name:"user",label:(0,a.ag)("entities.transaction.fields.user")})}),(0,U.jsx)("div",{className:"col-lg-6 col-12",children:(0,U.jsx)(ee.Z,{name:"idnumber",label:(0,a.ag)("entities.deposit.fields.idnumber")})})]}),(0,U.jsx)("div",{className:"row",children:(0,U.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,U.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,U.jsx)(L.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,a.ag)("common.search")]}),(0,U.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(te).forEach((function(e){m.setValue(e,te[e])})),s(S.Z.doReset()),l(!1)},disabled:e.loading,children:[(0,U.jsx)(L.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,a.ag)("common.reset")]})]})})]})}))})})]})};var re=function(e){return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(c.Z,{children:[(0,U.jsx)(i.Z,{fluid:!0,children:(0,U.jsxs)(l.Z,{children:[(0,U.jsx)(o.Z,{xs:9,children:(0,U.jsx)(r.Z,{children:(0,a.ag)("entities.deposit.list.title")})}),(0,U.jsx)(o.Z,{md:"auto",children:(0,U.jsx)(F,{})})]})}),(0,U.jsx)(ce,{}),(0,U.jsx)(X,{})]})})}},5208:function(e,n,s){function t(e){if(!e)return"-";try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(n){return console.error("Invalid date format:",e,n),"-"}}s.d(n,{p:function(){return t}})},44587:function(e,n,s){var t=s(47313),a=s(1168),c=s(46417);n.Z=function(e){var n=(0,t.useRef)();(0,t.useEffect)((function(){window.$(n.current).modal("show"),window.$(n.current).on("hidden.bs.modal",e.onClose)}),[]);return a.createPortal((0,c.jsx)("div",{ref:n,className:"modal",tabIndex:-1,children:(0,c.jsx)("div",{className:"modal-dialog modal-sm",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",children:e.title}),(0,c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,c.jsx)("span",{children:"\xd7"})})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",children:e.cancelText}),(0,c.jsx)("button",{type:"button",onClick:function(){return window.$(n.current).modal("hide"),e.onConfirm()},className:"btn btn-primary btn-sm",children:e.okText})]})]})})}),document.getElementById("modal-root"))}},1296:function(e,n,s){s(47313);var t=s(28303),a=s(45788),c=s(15021),r=s(46417);n.Z=function(e){var n=(0,a.v9)(c.Z.selectPermissionToRead),s=function(){var n=e.value;return n?Array.isArray(n)?n:[n]:[]},i=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return s().length?(0,r.jsx)(r.Fragment,{children:s().map((function(e){return s=e,n?(0,r.jsx)("div",{children:(0,r.jsx)(t.rU,{className:"btn btn-link",to:"/user/".concat(s.id),children:i(s)})},s.id):(0,r.jsx)("div",{children:i(s)},s.id);var s}))}):null}},22102:function(e,n,s){var t=s(1413),a=s(45987),c=s(46123),r=s.n(c),i=s(47313),l=s(68524),o=s(46417),d=["bsPrefix","fluid","as","className"],u=i.forwardRef((function(e,n){var s=e.bsPrefix,c=e.fluid,i=void 0!==c&&c,u=e.as,m=void 0===u?"div":u,h=e.className,f=(0,a.Z)(e,d),x=(0,l.vE)(s,"container"),p="string"===typeof i?"-".concat(i):"-fluid";return(0,o.jsx)(m,(0,t.Z)((0,t.Z)({ref:n},f),{},{className:r()(h,i?"".concat(x).concat(p):x)}))}));u.displayName="Container",n.Z=u}}]);